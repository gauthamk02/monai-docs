
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Applications &#8212; MONAI 1.5.1 Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=26ac546f" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=cb7e6255"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'apps';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Auto3dseg" href="auto3dseg.html" />
    <link rel="prev" title="API Reference" href="api.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="1.5.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/MONAI-logo-color.png" class="logo__image only-light" alt="MONAI 1.5.1 Documentation - Home"/>
    <img src="_static/MONAI-logo-color.png" class="logo__image only-dark pst-js-only" alt="MONAI 1.5.1 Documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="whatsnew.html">
    What’s New
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="highlights.html">
    Highlights
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="precision_accelerating.html">
    Precision and Accelerating
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="contrib.html">
    Development
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="bundle_intro.html">
    Bundle
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="lazy_resampling.html">
    Lazy Resampling
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/Project-MONAI/tutorials">
    Tutorials
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/project-monai/monai" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/projectmonai" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-twitter-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="whatsnew.html">
    What’s New
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="highlights.html">
    Highlights
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Installation Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="precision_accelerating.html">
    Precision and Accelerating
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="contrib.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="bundle_intro.html">
    Bundle
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="lazy_resampling.html">
    Lazy Resampling
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/Project-MONAI/tutorials">
    Tutorials
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/project-monai/monai" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/projectmonai" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-twitter-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto3dseg.html">Auto3dseg</a></li>
<li class="toctree-l1"><a class="reference internal" href="fl.html">Federated Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="bundle.html">Model Bundle</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="losses.html">Loss functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="networks.html">Network architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="engines.html">Engines</a></li>
<li class="toctree-l1"><a class="reference internal" href="inferers.html">Inference methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="handlers.html">Event handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualize.html">Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="api.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Applications</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="applications">
<span id="apps"></span><h1>Applications<a class="headerlink" href="#applications" title="Link to this heading">#</a></h1>
<section id="datasets">
<h2><cite>Datasets</cite><a class="headerlink" href="#datasets" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.MedNISTDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">MedNISTDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">section</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9223372036854775807</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_contiguous</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runtime_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L47-L194"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.MedNISTDataset" title="Link to this definition">#</a></dt>
<dd><p>The Dataset to automatically download MedNIST data and generate items for training, validation or test.
It’s based on <cite>CacheDataset</cite> to accelerate the training process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – target directory to download and load MedNIST dataset.</p></li>
<li><p><strong>section</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – expected data section, can be: <cite>training</cite>, <cite>validation</cite> or <cite>test</cite>.</p></li>
<li><p><strong>transform</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – transforms to execute operations on input data.</p></li>
<li><p><strong>download</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to download and extract the MedNIST from resource link, default is False.
if expected file already exists, skip downloading even set it to True.
user can manually copy <cite>MedNIST.tar.gz</cite> file or <cite>MedNIST</cite> folder to root directory.</p></li>
<li><p><strong>seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – random seed to randomly split training, validation and test datasets, default is 0.</p></li>
<li><p><strong>val_frac</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of validation fraction in the whole dataset, default is 0.1.</p></li>
<li><p><strong>test_frac</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of test fraction in the whole dataset, default is 0.1.</p></li>
<li><p><strong>cache_num</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of items to be cached. Default is <cite>sys.maxsize</cite>.
will take the minimum of (cache_num, data_length x cache_rate, data_length).</p></li>
<li><p><strong>cache_rate</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of cached data in total, default is 1.0 (cache all).
will take the minimum of (cache_num, data_length x cache_rate, data_length).</p></li>
<li><p><strong>num_workers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the number of worker threads if computing cache in the initialization.
If num_workers is None then the number returned by os.cpu_count() is used.
If a value less than 1 is specified, 1 will be used instead.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display a progress bar when downloading dataset and computing the transform cache content.</p></li>
<li><p><strong>copy_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to <cite>deepcopy</cite> the cache content before applying the random transforms,
default to <cite>True</cite>. if the random transforms don’t modify the cached content
(for example, randomly crop from the cached image and deepcopy the crop region)
or if every cache item is only used once in a <cite>multi-processing</cite> environment,
may set <cite>copy=False</cite> for better performance.</p></li>
<li><p><strong>as_contiguous</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to convert the cached NumPy array or PyTorch tensor to be contiguous.
it may help improve the performance of following logic.</p></li>
<li><p><strong>runtime_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to compute cache at the runtime, default to <cite>False</cite> to prepare
the cache content at initialization. See: <a class="reference internal" href="data.html#monai.data.CacheDataset" title="monai.data.CacheDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.data.CacheDataset</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – When <code class="docutils literal notranslate"><span class="pre">root_dir</span></code> is not a directory.</p></li>
<li><p><strong>RuntimeError</strong> – When <code class="docutils literal notranslate"><span class="pre">dataset_dir</span></code> doesn’t exist and downloading is not selected (<code class="docutils literal notranslate"><span class="pre">download=False</span></code>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.MedNISTDataset.get_num_classes">
<span class="sig-name descname"><span class="pre">get_num_classes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L151-L153"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.MedNISTDataset.get_num_classes" title="Link to this definition">#</a></dt>
<dd><p>Get number of classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.MedNISTDataset.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L148-L149"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.MedNISTDataset.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.DecathlonDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">DecathlonDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">section</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9223372036854775807</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_contiguous</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runtime_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L197-L401"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.DecathlonDataset" title="Link to this definition">#</a></dt>
<dd><p>The Dataset to automatically download the data of Medical Segmentation Decathlon challenge
(<a class="reference external" href="http://medicaldecathlon.com/">http://medicaldecathlon.com/</a>) and generate items for training, validation or test.
It will also load these properties from the JSON config file of dataset. user can call <cite>get_properties()</cite>
to get specified properties or all the properties loaded.
It’s based on <a class="reference internal" href="data.html#monai.data.CacheDataset" title="monai.data.CacheDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.data.CacheDataset</span></code></a> to accelerate the training process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – user’s local directory for caching and loading the MSD datasets.</p></li>
<li><p><strong>task</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – which task to download and execute: one of list (“Task01_BrainTumour”, “Task02_Heart”,
“Task03_Liver”, “Task04_Hippocampus”, “Task05_Prostate”, “Task06_Lung”, “Task07_Pancreas”,
“Task08_HepaticVessel”, “Task09_Spleen”, “Task10_Colon”).</p></li>
<li><p><strong>section</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – expected data section, can be: <cite>training</cite>, <cite>validation</cite> or <cite>test</cite>.</p></li>
<li><p><strong>transform</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – transforms to execute operations on input data.
for further usage, use <cite>EnsureChannelFirstd</cite> to convert the shape to [C, H, W, D].</p></li>
<li><p><strong>download</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to download and extract the Decathlon from resource link, default is False.
if expected file already exists, skip downloading even set it to True.
user can manually copy tar file or dataset folder to the root directory.</p></li>
<li><p><strong>val_frac</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of validation fraction in the whole dataset, default is 0.2.</p></li>
<li><p><strong>seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – random seed to randomly shuffle the datalist before splitting into training and validation, default is 0.
note to set same seed for <cite>training</cite> and <cite>validation</cite> sections.</p></li>
<li><p><strong>cache_num</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of items to be cached. Default is <cite>sys.maxsize</cite>.
will take the minimum of (cache_num, data_length x cache_rate, data_length).</p></li>
<li><p><strong>cache_rate</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of cached data in total, default is 1.0 (cache all).
will take the minimum of (cache_num, data_length x cache_rate, data_length).</p></li>
<li><p><strong>num_workers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the number of worker threads if computing cache in the initialization.
If num_workers is None then the number returned by os.cpu_count() is used.
If a value less than 1 is specified, 1 will be used instead.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display a progress bar when downloading dataset and computing the transform cache content.</p></li>
<li><p><strong>copy_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to <cite>deepcopy</cite> the cache content before applying the random transforms,
default to <cite>True</cite>. if the random transforms don’t modify the cached content
(for example, randomly crop from the cached image and deepcopy the crop region)
or if every cache item is only used once in a <cite>multi-processing</cite> environment,
may set <cite>copy=False</cite> for better performance.</p></li>
<li><p><strong>as_contiguous</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to convert the cached NumPy array or PyTorch tensor to be contiguous.
it may help improve the performance of following logic.</p></li>
<li><p><strong>runtime_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to compute cache at the runtime, default to <cite>False</cite> to prepare
the cache content at initialization. See: <a class="reference internal" href="data.html#monai.data.CacheDataset" title="monai.data.CacheDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.data.CacheDataset</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – When <code class="docutils literal notranslate"><span class="pre">root_dir</span></code> is not a directory.</p></li>
<li><p><strong>ValueError</strong> – When <code class="docutils literal notranslate"><span class="pre">task</span></code> is not one of [“Task01_BrainTumour”, “Task02_Heart”,
    “Task03_Liver”, “Task04_Hippocampus”, “Task05_Prostate”, “Task06_Lung”, “Task07_Pancreas”,
    “Task08_HepaticVessel”, “Task09_Spleen”, “Task10_Colon”].</p></li>
<li><p><strong>RuntimeError</strong> – When <code class="docutils literal notranslate"><span class="pre">dataset_dir</span></code> doesn’t exist and downloading is not selected (<code class="docutils literal notranslate"><span class="pre">download=False</span></code>).</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">transform</span> <span class="o">=</span> <span class="n">Compose</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">LoadImaged</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">]),</span>
        <span class="n">EnsureChannelFirstd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">]),</span>
        <span class="n">ScaleIntensityd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">),</span>
        <span class="n">ToTensord</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">val_data</span> <span class="o">=</span> <span class="n">DecathlonDataset</span><span class="p">(</span>
    <span class="n">root_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span> <span class="n">task</span><span class="o">=</span><span class="s2">&quot;Task09_Spleen&quot;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">,</span> <span class="n">section</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">val_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;image&quot;</span><span class="p">],</span> <span class="n">val_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;label&quot;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.DecathlonDataset.get_indices">
<span class="sig-name descname"><span class="pre">get_indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L359-L364"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.DecathlonDataset.get_indices" title="Link to this definition">#</a></dt>
<dd><p>Get the indices of datalist used in this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.DecathlonDataset.get_properties">
<span class="sig-name descname"><span class="pre">get_properties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L369-L379"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.DecathlonDataset.get_properties" title="Link to this definition">#</a></dt>
<dd><p>Get the loaded properties of dataset with specified keys.
If no keys specified, return all the loaded properties.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.DecathlonDataset.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L366-L367"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.DecathlonDataset.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.TciaDataset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">TciaDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">section</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">download_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SEG'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modality_tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">96)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_series_uid_tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(32,</span> <span class="pre">14)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_sop_uid_tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(8,</span> <span class="pre">4437)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">specific_tags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">((8,</span> <span class="pre">4373),</span> <span class="pre">(8,</span> <span class="pre">4416),</span> <span class="pre">(12294,</span> <span class="pre">16),</span> <span class="pre">(32,</span> <span class="pre">13),</span> <span class="pre">(16,</span> <span class="pre">16),</span> <span class="pre">(16,</span> <span class="pre">32),</span> <span class="pre">(32,</span> <span class="pre">17),</span> <span class="pre">(32,</span> <span class="pre">18))</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname_regex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'^(?!.*LICENSE).*'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9223372036854775807</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_contiguous</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runtime_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L404-L675"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.TciaDataset" title="Link to this definition">#</a></dt>
<dd><p>The Dataset to automatically download the data from a public The Cancer Imaging Archive (TCIA) dataset
and generate items for training, validation or test.</p>
<p>The Highdicom library is used to load dicom data with modality “SEG”, but only a part of collections are
supported, such as: “C4KC-KiTS”, “NSCLC-Radiomics”, “NSCLC-Radiomics-Interobserver1”, “ QIN-PROSTATE-Repeatability”
and “PROSTATEx”. Therefore, if “seg” is included in <cite>keys</cite> of the <cite>LoadImaged</cite> transform and loading some
other collections, errors may be raised. For supported collections, the original “SEG” information may not
always be consistent for each dicom file. Therefore, to avoid creating different format of labels, please use
the <cite>label_dict</cite> argument of <cite>PydicomReader</cite> when calling the <cite>LoadImaged</cite> transform. The prepared label dicts
of collections that are mentioned above is also saved in: <cite>monai.apps.tcia.TCIA_LABEL_DICT</cite>. You can also refer
to the second example bellow.</p>
<p>This class is based on <a class="reference internal" href="data.html#monai.data.CacheDataset" title="monai.data.CacheDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.data.CacheDataset</span></code></a> to accelerate the training process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – user’s local directory for caching and loading the TCIA dataset.</p></li>
<li><p><strong>collection</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name of a TCIA collection.
a TCIA dataset is defined as a collection. Please check the following list to browse
the collection list (only public collections can be downloaded):
<a class="reference external" href="https://www.cancerimagingarchive.net/collections/">https://www.cancerimagingarchive.net/collections/</a></p></li>
<li><p><strong>section</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – expected data section, can be: <cite>training</cite>, <cite>validation</cite> or <cite>test</cite>.</p></li>
<li><p><strong>transform</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – transforms to execute operations on input data.
for further usage, use <cite>EnsureChannelFirstd</cite> to convert the shape to [C, H, W, D].
If not specified, <cite>LoadImaged(reader=”PydicomReader”, keys=[“image”])</cite> will be used as the default
transform. In addition, we suggest to set the argument <cite>labels</cite> for <cite>PydicomReader</cite> if segmentations
are needed to be loaded. The original labels for each dicom series may be different, using this argument
is able to unify the format of labels.</p></li>
<li><p><strong>download</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to download and extract the dataset, default is False.
if expected file already exists, skip downloading even set it to True.
user can manually copy tar file or dataset folder to the root directory.</p></li>
<li><p><strong>download_len</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of series that will be downloaded, the value should be larger than 0 or -1, where -1 means
all series will be downloaded. Default is -1.</p></li>
<li><p><strong>seg_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – modality type of segmentation that is used to do the first step download. Default is “SEG”.</p></li>
<li><p><strong>modality_tag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – tag of modality. Default is (0x0008, 0x0060).</p></li>
<li><p><strong>ref_series_uid_tag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – tag of referenced Series Instance UID. Default is (0x0020, 0x000e).</p></li>
<li><p><strong>ref_sop_uid_tag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – tag of referenced SOP Instance UID. Default is (0x0008, 0x1155).</p></li>
<li><p><strong>specific_tags</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – tags that will be loaded for “SEG” series. This argument will be used in
<cite>monai.data.PydicomReader</cite>. Default is [(0x0008, 0x1115), (0x0008,0x1140), (0x3006, 0x0010),
(0x0020,0x000D), (0x0010,0x0010), (0x0010,0x0020), (0x0020,0x0011), (0x0020,0x0012)].</p></li>
<li><p><strong>fname_regex</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – a regular expression to match the file names when the input is a folder.
If provided, only the matched files will be included. For example, to include the file name
“image_0001.dcm”, the regular expression could be <cite>“.*image_(d+).dcm”</cite>.
Default to <cite>“^(?!.*LICENSE).*”</cite>, ignoring any file name containing <cite>“LICENSE”</cite>.</p></li>
<li><p><strong>val_frac</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of validation fraction in the whole dataset, default is 0.2.</p></li>
<li><p><strong>seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – random seed to randomly shuffle the datalist before splitting into training and validation, default is 0.
note to set same seed for <cite>training</cite> and <cite>validation</cite> sections.</p></li>
<li><p><strong>cache_num</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of items to be cached. Default is <cite>sys.maxsize</cite>.
will take the minimum of (cache_num, data_length x cache_rate, data_length).</p></li>
<li><p><strong>cache_rate</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of cached data in total, default is 0.0 (no cache).
will take the minimum of (cache_num, data_length x cache_rate, data_length).</p></li>
<li><p><strong>num_workers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the number of worker threads if computing cache in the initialization.
If num_workers is None then the number returned by os.cpu_count() is used.
If a value less than 1 is specified, 1 will be used instead.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display a progress bar when downloading dataset and computing the transform cache content.</p></li>
<li><p><strong>copy_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to <cite>deepcopy</cite> the cache content before applying the random transforms,
default to <cite>True</cite>. if the random transforms don’t modify the cached content
(for example, randomly crop from the cached image and deepcopy the crop region)
or if every cache item is only used once in a <cite>multi-processing</cite> environment,
may set <cite>copy=False</cite> for better performance.</p></li>
<li><p><strong>as_contiguous</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to convert the cached NumPy array or PyTorch tensor to be contiguous.
it may help improve the performance of following logic.</p></li>
<li><p><strong>runtime_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to compute cache at the runtime, default to <cite>False</cite> to prepare
the cache content at initialization. See: <a class="reference internal" href="data.html#monai.data.CacheDataset" title="monai.data.CacheDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.data.CacheDataset</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># collection is &quot;Pancreatic-CT-CBCT-SEG&quot;, seg_type is &quot;RTSTRUCT&quot;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">TciaDataset</span><span class="p">(</span>
    <span class="n">root_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s2">&quot;Pancreatic-CT-CBCT-SEG&quot;</span><span class="p">,</span> <span class="n">seg_type</span><span class="o">=</span><span class="s2">&quot;RTSTRUCT&quot;</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># collection is &quot;C4KC-KiTS&quot;, seg_type is &quot;SEG&quot;, and load both images and segmentations</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps.tcia</span><span class="w"> </span><span class="kn">import</span> <span class="n">TCIA_LABEL_DICT</span>
<span class="n">transform</span> <span class="o">=</span> <span class="n">Compose</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">LoadImaged</span><span class="p">(</span><span class="n">reader</span><span class="o">=</span><span class="s2">&quot;PydicomReader&quot;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;seg&quot;</span><span class="p">],</span> <span class="n">label_dict</span><span class="o">=</span><span class="n">TCIA_LABEL_DICT</span><span class="p">[</span><span class="s2">&quot;C4KC-KiTS&quot;</span><span class="p">]),</span>
        <span class="n">EnsureChannelFirstd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="s2">&quot;seg&quot;</span><span class="p">]),</span>
        <span class="n">ResampleToMatchd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">key_dst</span><span class="o">=</span><span class="s2">&quot;seg&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">TciaDataset</span><span class="p">(</span>
    <span class="n">root_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="s2">&quot;C4KC-KiTS&quot;</span><span class="p">,</span> <span class="n">section</span><span class="o">=</span><span class="s2">&quot;validation&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;seg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.TciaDataset.get_indices">
<span class="sig-name descname"><span class="pre">get_indices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L577-L582"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.TciaDataset.get_indices" title="Link to this definition">#</a></dt>
<dd><p>Get the indices of datalist used in this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.TciaDataset.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L584-L585"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.TciaDataset.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.CrossValidation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">CrossValidation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_cls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nfolds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L678-L745"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.CrossValidation" title="Link to this definition">#</a></dt>
<dd><p>Cross validation dataset based on the general dataset which must have <cite>_split_datalist</cite> API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_cls</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code>) – dataset class to be used to create the cross validation partitions.
It must have <cite>_split_datalist</cite> API.</p></li>
<li><p><strong>nfolds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of folds to split the data for cross validation.</p></li>
<li><p><strong>seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – random seed to randomly shuffle the datalist before splitting into N folds, default is 0.</p></li>
<li><p><strong>dataset_params</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other additional parameters for the dataset_cls base class.</p></li>
</ul>
</dd>
</dl>
<p>Example of 5 folds cross validation training:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cvdataset</span> <span class="o">=</span> <span class="n">CrossValidation</span><span class="p">(</span>
    <span class="n">dataset_cls</span><span class="o">=</span><span class="n">DecathlonDataset</span><span class="p">,</span>
    <span class="n">nfolds</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">seed</span><span class="o">=</span><span class="mi">12345</span><span class="p">,</span>
    <span class="n">root_dir</span><span class="o">=</span><span class="s2">&quot;./&quot;</span><span class="p">,</span>
    <span class="n">task</span><span class="o">=</span><span class="s2">&quot;Task09_Spleen&quot;</span><span class="p">,</span>
    <span class="n">section</span><span class="o">=</span><span class="s2">&quot;training&quot;</span><span class="p">,</span>
    <span class="n">transform</span><span class="o">=</span><span class="n">train_transform</span><span class="p">,</span>
    <span class="n">download</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">dataset_fold0_train</span> <span class="o">=</span> <span class="n">cvdataset</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">folds</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">dataset_fold0_val</span> <span class="o">=</span> <span class="n">cvdataset</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">folds</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">val_transform</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># execute training for fold 0 ...</span>

<span class="n">dataset_fold1_train</span> <span class="o">=</span> <span class="n">cvdataset</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">folds</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">dataset_fold1_val</span> <span class="o">=</span> <span class="n">cvdataset</span><span class="o">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">folds</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">val_transform</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># execute training for fold 1 ...</span>

<span class="o">...</span>

<span class="n">dataset_fold4_train</span> <span class="o">=</span> <span class="o">...</span>
<span class="c1"># execute training for fold 4 ...</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.CrossValidation.get_dataset">
<span class="sig-name descname"><span class="pre">get_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folds</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/datasets.py#L724-L745"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.CrossValidation.get_dataset" title="Link to this definition">#</a></dt>
<dd><p>Generate dataset based on the specified fold indices in the cross validation group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – index of folds for training or validation, if a list of values, concatenate the data.</p></li>
<li><p><strong>dataset_params</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other additional parameters for the dataset_cls base class, will override
the same parameters in <cite>self.dataset_params</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="clara-mmars">
<h2><cite>Clara MMARs</cite><a class="headerlink" href="#clara-mmars" title="Link to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.download_mmar">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">download_mmar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mmar_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/mmars/mmars.py#L106-L185"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.download_mmar" title="Link to this definition">#</a></dt>
<dd><p>Download and extract Medical Model Archive (MMAR) from Nvidia Clara Train.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.nvidia.com/clara/">https://docs.nvidia.com/clara/</a></p></li>
<li><p>Nvidia NGC Registry CLI</p></li>
<li><p><a class="reference external" href="https://docs.nvidia.com/clara/clara-train-sdk/pt/mmar.html">https://docs.nvidia.com/clara/clara-train-sdk/pt/mmar.html</a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>]) – the corresponding model item from <cite>MODEL_DESC</cite>.
Or when api is True, the substring to query NGC’s model name field.</p></li>
<li><p><strong>mmar_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target directory to store the MMAR, default is <cite>mmars</cite> subfolder under <cite>torch.hub get_dir()</cite>.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display a progress bar.</p></li>
<li><p><strong>api</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to query NGC and download via api</p></li>
<li><p><strong>version</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – which version of MMAR to download.  -1 means the latest from ngc.</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps</span><span class="w"> </span><span class="kn">import</span> <span class="n">download_mmar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download_mmar</span><span class="p">(</span><span class="s2">&quot;clara_pt_prostate_mri_segmentation_1&quot;</span><span class="p">,</span> <span class="n">mmar_dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download_mmar</span><span class="p">(</span><span class="s2">&quot;prostate_mri_segmentation&quot;</span><span class="p">,</span> <span class="n">mmar_dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The local directory of the downloaded model.
If api is True, a list of local directories of downloaded models.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.load_from_mmar">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">load_from_mmar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mmar_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_location</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrained</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'model'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/mmars/mmars.py#L188-L298"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.load_from_mmar" title="Link to this definition">#</a></dt>
<dd><p>Download and extract Medical Model Archive (MMAR) model weights from Nvidia Clara Train.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the corresponding model item from <cite>MODEL_DESC</cite>.</p></li>
<li><p><strong>mmar_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – : target directory to store the MMAR, default is mmars subfolder under <cite>torch.hub get_dir()</cite>.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display a progress bar when downloading the content.</p></li>
<li><p><strong>version</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – version number of the MMAR. Set it to <cite>-1</cite> to use <cite>item[Keys.VERSION]</cite>.</p></li>
<li><p><strong>map_location</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – pytorch API parameter for <cite>torch.load</cite> or <cite>torch.jit.load</cite>.</p></li>
<li><p><strong>pretrained</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to load the pretrained weights after initializing a network module.</p></li>
<li><p><strong>weights_only</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to load only the weights instead of initializing the network module and assign weights.</p></li>
<li><p><strong>model_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – a key to search in the model file or config file for the model dictionary.
Currently this function assumes that the model dictionary has
<cite>{“[name|path]”: “test.module”, “args”: {‘kw’: ‘test’}}</cite>.</p></li>
<li><p><strong>api</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to query NGC API to get model infomation.</p></li>
<li><p><strong>model_file</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the relative path to the model file within an MMAR.</p></li>
</ul>
</dd>
</dl>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_from_mmar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unet_model</span> <span class="o">=</span> <span class="n">load_from_mmar</span><span class="p">(</span><span class="s2">&quot;clara_pt_prostate_mri_segmentation_1&quot;</span><span class="p">,</span> <span class="n">mmar_dir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">map_location</span><span class="o">=</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">unet_model</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.nvidia.com/clara/">https://docs.nvidia.com/clara/</a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="monai.apps.MODEL_DESC">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">MODEL_DESC</span></span><a class="headerlink" href="#monai.apps.MODEL_DESC" title="Link to this definition">#</a></dt>
<dd><p>Built-in immutable sequence.</p>
<p>If no argument is given, the constructor returns an empty tuple.
If iterable is specified the tuple is initialized from iterable’s items.</p>
<p>If the argument is a tuple, the return value is the same object.</p>
</dd></dl>

</section>
<section id="utilities">
<h2><cite>Utilities</cite><a class="headerlink" href="#utilities" title="Link to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.check_hash">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">check_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'md5'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/utils.py#L157-L188"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.check_hash" title="Link to this definition">#</a></dt>
<dd><p>Verify hash signature of specified file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – path of source file to verify hash value.</p></li>
<li><p><strong>val</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – expected hash value of the file.</p></li>
<li><p><strong>hash_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – type of hash algorithm to use, default is <cite>“md5”</cite>.
The supported hash types are <cite>“md5”</cite>, <cite>“sha1”</cite>, <cite>“sha256”</cite>, <cite>“sha512”</cite>.
See also: <code class="xref py py-data docutils literal notranslate"><span class="pre">monai.apps.utils.SUPPORTED_HASH_TYPES</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.download_url">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">download_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'md5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">gdown_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/utils.py#L191-L274"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.download_url" title="Link to this definition">#</a></dt>
<dd><p>Download file from specified URL link, support process bar and hash check.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – source URL link to download file.</p></li>
<li><p><strong>filepath</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – target filepath to save the downloaded file (including the filename).
If undefined, <cite>os.path.basename(url)</cite> will be used.</p></li>
<li><p><strong>hash_val</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – expected hash value to validate the downloaded file.
if None, skip hash validation.</p></li>
<li><p><strong>hash_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – ‘md5’ or ‘sha1’, defaults to ‘md5’.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display a progress bar.</p></li>
<li><p><strong>gdown_kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other args for <cite>gdown</cite> except for the <cite>url</cite>, <cite>output</cite> and <cite>quiet</cite>.
these args will only be used if download from google drive.
details of the args of it:
<a class="github reference external" href="https://github.com/wkentaro/gdown/blob/main/gdown/download.py">wkentaro/gdown</a></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>RuntimeError</strong> – When the hash validation of the <code class="docutils literal notranslate"><span class="pre">filepath</span></code> existing file fails.</p></li>
<li><p><strong>RuntimeError</strong> – When a network issue or denied permission prevents the
    file download from <code class="docutils literal notranslate"><span class="pre">url</span></code> to <code class="docutils literal notranslate"><span class="pre">filepath</span></code>.</p></li>
<li><p><strong>URLError</strong> – See urllib.request.urlretrieve.</p></li>
<li><p><strong>HTTPError</strong> – See urllib.request.urlretrieve.</p></li>
<li><p><strong>ContentTooShortError</strong> – See urllib.request.urlretrieve.</p></li>
<li><p><strong>IOError</strong> – See urllib.request.urlretrieve.</p></li>
<li><p><strong>RuntimeError</strong> – When the hash validation of the <code class="docutils literal notranslate"><span class="pre">url</span></code> downloaded file fails.</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.extractall">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">extractall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'md5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">has_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/utils.py#L303-L355"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.extractall" title="Link to this definition">#</a></dt>
<dd><p>Extract file to the output directory.
Expected file types are: <cite>zip</cite>, <cite>tar.gz</cite> and <cite>tar</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – the file path of compressed file.</p></li>
<li><p><strong>output_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – target directory to save extracted files.</p></li>
<li><p><strong>hash_val</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – expected hash value to validate the compressed file.
if None, skip hash validation.</p></li>
<li><p><strong>hash_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – ‘md5’ or ‘sha1’, defaults to ‘md5’.</p></li>
<li><p><strong>file_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – string of file type for decompressing. Leave it empty to infer the type from the filepath basename.</p></li>
<li><p><strong>has_base</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether the extracted files have a base folder. This flag is used when checking if the existing
folder is a result of <cite>extractall</cite>, if it is, the extraction is skipped. For example, if A.zip is unzipped
to folder structure <cite>A/*.png</cite>, this flag should be True; if B.zip is unzipped to <cite>*.png</cite>, this flag should
be False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>RuntimeError</strong> – When the hash validation of the <code class="docutils literal notranslate"><span class="pre">filepath</span></code> compressed file fails.</p></li>
<li><p><strong>NotImplementedError</strong> – When the <code class="docutils literal notranslate"><span class="pre">filepath</span></code> file extension is not one of [zip”, “tar.gz”, “tar”].</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.download_and_extract">
<span class="sig-prename descclassname"><span class="pre">monai.apps.</span></span><span class="sig-name descname"><span class="pre">download_and_extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'md5'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">has_base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/utils.py#L381-L424"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.download_and_extract" title="Link to this definition">#</a></dt>
<dd><p>Download file from URL and extract it to the output directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – source URL link to download file.</p></li>
<li><p><strong>filepath</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – the file path of the downloaded compressed file.
use this option to keep the directly downloaded compressed file, to avoid further repeated downloads.</p></li>
<li><p><strong>output_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – target directory to save extracted files.
default is the current directory.</p></li>
<li><p><strong>hash_val</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – expected hash value to validate the downloaded file.
if None, skip hash validation.</p></li>
<li><p><strong>hash_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – ‘md5’ or ‘sha1’, defaults to ‘md5’.</p></li>
<li><p><strong>file_type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – string of file type for decompressing. Leave it empty to infer the type from url’s base file name.</p></li>
<li><p><strong>has_base</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether the extracted files have a base folder. This flag is used when checking if the existing
folder is a result of <cite>extractall</cite>, if it is, the extraction is skipped. For example, if A.zip is unzipped
to folder structure <cite>A/*.png</cite>, this flag should be True; if B.zip is unzipped to <cite>*.png</cite>, this flag should
be False.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to display progress bar.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-monai.apps.deepgrow.dataset">
<span id="deepgrow"></span><h2><cite>Deepgrow</cite><a class="headerlink" href="#module-monai.apps.deepgrow.dataset" title="Link to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.deepgrow.dataset.create_dataset">
<span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.dataset.</span></span><span class="sig-name descname"><span class="pre">create_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datalist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimension</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixdim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transforms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/dataset.py#L25-L132"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.dataset.create_dataset" title="Link to this definition">#</a></dt>
<dd><p>Utility to pre-process and create dataset list for Deepgrow training over on existing one.
The input data list is normally a list of images and labels (3D volume) that needs pre-processing
for Deepgrow training pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datalist</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]) – <p>A list of data dictionary. Each entry should at least contain ‘image_key’: &lt;image filename&gt;.
For example, typical input data can be a list of dictionaries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">image</span> <span class="n">filename</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">label</span> <span class="n">filename</span><span class="o">&gt;</span><span class="p">}]</span>
</pre></div>
</div>
</p></li>
<li><p><strong>output_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – target directory to store the training data for Deepgrow Training</p></li>
<li><p><strong>pixdim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – output voxel spacing.</p></li>
<li><p><strong>dimension</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – dimension for Deepgrow training.  It can be 2 or 3.</p></li>
<li><p><strong>image_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – image key in input datalist. Defaults to ‘image’.</p></li>
<li><p><strong>label_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – label key in input datalist. Defaults to ‘label’.</p></li>
<li><p><strong>base_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – base directory in case related path is used for the keys in datalist.  Defaults to None.</p></li>
<li><p><strong>limit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – limit number of inputs for pre-processing.  Defaults to 0 (no limit).</p></li>
<li><p><strong>relative_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – output keys values should be based on relative path.  Defaults to False.</p></li>
<li><p><strong>transforms</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="transforms.html#monai.transforms.Transform" title="monai.transforms.transform.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicit transforms to execute operations on input data.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – When <code class="docutils literal notranslate"><span class="pre">dimension</span></code> is not one of [2, 3]</p></li>
<li><p><strong>ValueError</strong> – When <code class="docutils literal notranslate"><span class="pre">datalist</span></code> is Empty</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new datalist that contains path to the images/labels after pre-processing.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datalist</span> <span class="o">=</span> <span class="n">create_dataset</span><span class="p">(</span>
    <span class="n">datalist</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;img1.nii&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;label1.nii&#39;</span><span class="p">}],</span>
    <span class="n">base_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="n">output_2d</span><span class="p">,</span>
    <span class="n">dimension</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">image_key</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="p">,</span>
    <span class="n">label_key</span><span class="o">=</span><span class="s1">&#39;label&#39;</span><span class="p">,</span>
    <span class="n">pixdim</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="n">limit</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">relative_path</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">datalist</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;image&quot;</span><span class="p">],</span> <span class="n">datalist</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;label&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class" id="module-monai.apps.deepgrow.interaction">
<dt class="sig sig-object py" id="monai.apps.deepgrow.interaction.Interaction">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.interaction.</span></span><span class="sig-name descname"><span class="pre">Interaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transforms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_interactions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_probability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'probability'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/interaction.py#L25-L90"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.interaction.Interaction" title="Link to this definition">#</a></dt>
<dd><p>Ignite process_function used to introduce interactions (simulation of clicks) for Deepgrow Training/Evaluation.
For more details please refer to: <a class="reference external" href="https://pytorch.org/ignite/generated/ignite.engine.engine.Engine.html">https://pytorch.org/ignite/generated/ignite.engine.engine.Engine.html</a>.
This implementation is based on:</p>
<blockquote>
<div><p>Sakinis et al., Interactive segmentation of medical images through
fully convolutional neural networks. (2019) <a class="reference external" href="https://arxiv.org/abs/1903.08205">https://arxiv.org/abs/1903.08205</a></p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transforms</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – execute additional transformation during every iteration (before train).
Typically, several Tensor based transforms composed by <cite>Compose</cite>.</p></li>
<li><p><strong>max_interactions</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – maximum number of interactions per iteration</p></li>
<li><p><strong>train</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – training or evaluation</p></li>
<li><p><strong>key_probability</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – field name to fill probability for every interaction</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class" id="module-monai.apps.deepgrow.transforms">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.AddInitialSeedPointd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">AddInitialSeedPointd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'guidance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sids'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connected_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L72-L156"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.AddInitialSeedPointd" title="Link to this definition">#</a></dt>
<dd><p>Add random guidance as initial seed point for a given label.</p>
<p>Note that the label is of size (C, D, H, W) or (C, H, W)</p>
<p>The guidance is of size (2, N, # of dims) where N is number of guidance added.
# of dims = 4 when C, D, H, W; # of dims = 3 when (C, H, W)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – label source.</p></li>
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to store guidance.</p></li>
<li><p><strong>sids</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents list of valid slice indices for the given label.</p></li>
<li><p><strong>sid</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents the slice to add initial seed point.  If not present, random sid will be chosen.</p></li>
<li><p><strong>connected_regions</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – maximum connected regions to use for adding initial points.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.AddInitialSeedPointd.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L104-L112"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.AddInitialSeedPointd.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.AddGuidanceSignald">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">AddGuidanceSignald</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'guidance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_intensity_ch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L159-L228"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.AddGuidanceSignald" title="Link to this definition">#</a></dt>
<dd><p>Add Guidance signal for input image.</p>
<p>Based on the “guidance” points, apply gaussian to them and add them as new channel for input image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to the image source.</p></li>
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to store guidance.</p></li>
<li><p><strong>sigma</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – standard deviation for Gaussian kernel.</p></li>
<li><p><strong>number_intensity_ch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – channel index.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.AddRandomGuidanced">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">AddRandomGuidanced</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">guidance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'guidance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discrepancy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'discrepancy'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'probability'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L269-L346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.AddRandomGuidanced" title="Link to this definition">#</a></dt>
<dd><p>Add random guidance based on discrepancies that were found between label and prediction.
input shape is as below:
Guidance is of shape (2, N, # of dim)
Discrepancy is of shape (2, C, D, H, W) or (2, C, H, W)
Probability is of shape (1)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to guidance source.</p></li>
<li><p><strong>discrepancy</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents discrepancies found between label and prediction.</p></li>
<li><p><strong>probability</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents click/interaction probability.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.AddRandomGuidanced.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L290-L292"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.AddRandomGuidanced.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.AddGuidanceFromPointsd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">AddGuidanceFromPointsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'guidance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">foreground</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'background'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slice_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'slice'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L462-L574"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.AddGuidanceFromPointsd" title="Link to this definition">#</a></dt>
<dd><p>Add guidance based on user clicks.</p>
<p>We assume the input is loaded by LoadImaged and has the shape of (H, W, D) originally.
Clicks always specify the coordinates in (H, W, D)</p>
<p>If depth_first is True:</p>
<blockquote>
<div><p>Input is now of shape (D, H, W), will return guidance that specifies the coordinates in (D, H, W)</p>
</div></blockquote>
<p>else:</p>
<blockquote>
<div><p>Input is now of shape (H, W, D), will return guidance that specifies the coordinates in (H, W, D)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to reference image to fetch current and original image details.</p></li>
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – output key to store guidance.</p></li>
<li><p><strong>foreground</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents user foreground (+ve) clicks.</p></li>
<li><p><strong>background</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents user background (-ve) clicks.</p></li>
<li><p><strong>axis</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – axis that represents slices in 3D volume. (axis to Depth)</p></li>
<li><p><strong>depth_first</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if depth (slices) is positioned at first dimension.</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – dimensions based on model used for deepgrow (2D vs 3D).</p></li>
<li><p><strong>slice_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents applicable slice to add guidance.</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the metadata dictionary of <cite>ref_image</cite>.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
if None, will try to construct meta_keys by <cite>{ref_image}_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – if meta_key is None, use <cite>{ref_image}_{meta_key_postfix}</cite> to fetch the metadata according
to the key data, default is <cite>meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.SpatialCropForegroundd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">SpatialCropForegroundd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select_fn=&lt;function</span> <span class="pre">is_positive&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel_indices=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_smaller=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix='meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_coord_key='foreground_start_coord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_coord_key='foreground_end_coord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_shape_key='foreground_original_shape'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cropped_shape_key='foreground_cropped_shape'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L349-L458"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.SpatialCropForegroundd" title="Link to this definition">#</a></dt>
<dd><p>Crop only the foreground object of the expected images.</p>
<p>Difference VS <a class="reference internal" href="transforms.html#monai.transforms.CropForegroundd" title="monai.transforms.CropForegroundd"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.CropForegroundd</span></code></a>:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>If the bounding box is smaller than spatial size in all dimensions then this transform will crop the
object using box’s center and spatial_size.</p></li>
<li><p>This transform will set “start_coord_key”, “end_coord_key”, “original_shape_key” and “cropped_shape_key”
in data[{key}_{meta_key_postfix}]</p></li>
</ol>
</div></blockquote>
<p>The typical usage is to help training and evaluation if the valid part is small in the whole medical image.
The valid part can be determined by any field in the data with <cite>source_key</cite>, for example:</p>
<ul class="simple">
<li><p>Select values &gt; 0 in image field as the foreground and crop on all fields specified by <cite>keys</cite>.</p></li>
<li><p>Select label = 3 in label field as the foreground to crop on all fields specified by <cite>keys</cite>.</p></li>
<li><p>Select label &gt; 0 in the third channel of a One-Hot label field as the foreground to crop all <cite>keys</cite> fields.</p></li>
</ul>
<p>Users can define arbitrary function to select expected foreground from the whole source image or specified
channels. And it can also add margin to every dim of the bounding box of foreground object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.
See also: <a class="reference internal" href="transforms.html#monai.transforms.MapTransform" title="monai.transforms.MapTransform"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.MapTransform</span></code></a></p></li>
<li><p><strong>source_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – data source to generate the bounding box of foreground, can be image or label, etc.</p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – minimal spatial size of the image patch e.g. [128, 128, 128] to fit in.</p></li>
<li><p><strong>select_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>) – function to select expected foreground, default is to select values &gt; 0.</p></li>
<li><p><strong>channel_indices</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if defined, select foreground only on the specified channels
of image. if None, select foreground on the whole image.</p></li>
<li><p><strong>margin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – add margin value to spatial dims of the bounding box, if only 1 value provided, use it for all dims.</p></li>
<li><p><strong>allow_smaller</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – when computing box size with <cite>margin</cite>, whether allow the image size to be smaller
than box size, default to <cite>True</cite>. if the margined size is bigger than image size, will pad with
specified <cite>mode</cite>.</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the corresponding metadata dictionary.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
it can be a sequence of string, map to the <cite>keys</cite>.
if None, will try to construct meta_keys by <cite>key_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – if meta_keys is None, use <cite>{key}_{meta_key_postfix}</cite> to fetch/store the metadata according
to the key data, default is <cite>meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
<li><p><strong>start_coord_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record the start coordinate of spatial bounding box for foreground.</p></li>
<li><p><strong>end_coord_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record the end coordinate of spatial bounding box for foreground.</p></li>
<li><p><strong>original_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record original shape for foreground.</p></li>
<li><p><strong>cropped_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record cropped shape for foreground.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.SpatialCropGuidanced">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">SpatialCropGuidanced</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_coord_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_start_coord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_coord_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_end_coord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_shape_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_original_shape'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cropped_shape_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_cropped_shape'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L577-L704"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.SpatialCropGuidanced" title="Link to this definition">#</a></dt>
<dd><p>Crop image based on guidance with minimal spatial size.</p>
<ul class="simple">
<li><p>If the bounding box is smaller than spatial size in all dimensions then this transform will crop the
object using box’s center and spatial_size.</p></li>
<li><p>This transform will set “start_coord_key”, “end_coord_key”, “original_shape_key” and “cropped_shape_key”
in data[{key}_{meta_key_postfix}]</p></li>
</ul>
<p>Input data is of shape (C, spatial_1, [spatial_2, …])</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to the guidance. It is used to generate the bounding box of foreground</p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – minimal spatial size of the image patch e.g. [128, 128, 128] to fit in.</p></li>
<li><p><strong>margin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – add margin value to spatial dims of the bounding box, if only 1 value provided, use it for all dims.</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the corresponding metadata dictionary.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
it can be a sequence of string, map to the <cite>keys</cite>.
if None, will try to construct meta_keys by <cite>key_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – if meta_keys is None, use <cite>key_{postfix}</cite> to fetch the metadata according
to the key data, default is <cite>meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
<li><p><strong>start_coord_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record the start coordinate of spatial bounding box for foreground.</p></li>
<li><p><strong>end_coord_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record the end coordinate of spatial bounding box for foreground.</p></li>
<li><p><strong>original_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record original shape for foreground.</p></li>
<li><p><strong>cropped_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to record cropped shape for foreground.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.RestoreLabeld">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">RestoreLabeld</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slice_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nearest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align_corners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_coord_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_start_coord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_coord_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_end_coord'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_shape_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_original_shape'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cropped_shape_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_cropped_shape'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_resizing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_cropping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_slicing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L758-L914"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.RestoreLabeld" title="Link to this definition">#</a></dt>
<dd><p>Restores label based on the ref image.</p>
<p>The ref_image is assumed that it went through the following transforms:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Fetch2DSliced (If 2D)</p></li>
<li><p>Spacingd</p></li>
<li><p>SpatialCropGuidanced</p></li>
<li><p>Resized</p></li>
</ol>
</div></blockquote>
<p>And its shape is assumed to be (C, D, H, W)</p>
<p>This transform tries to undo these operation so that the result label can be overlapped with original volume.
It does the following operation:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Undo Resized</p></li>
<li><p>Undo SpatialCropGuidanced</p></li>
<li><p>Undo Spacingd</p></li>
<li><p>Undo Fetch2DSliced</p></li>
</ol>
</div></blockquote>
<p>The resulting label is of shape (D, H, W)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>ref_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – reference image to fetch current and original image details</p></li>
<li><p><strong>slice_only</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – apply only to an applicable slice, in case of 2D model/prediction</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="utils.html#monai.utils.enums.InterpolateMode" title="monai.utils.enums.InterpolateMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolateMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <a class="reference internal" href="utils.html#monai.utils.enums.InterpolateMode" title="monai.utils.enums.InterpolateMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolateMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – {<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;edge&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linear_ramp&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;maximum&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;median&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;minimum&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;symmetric&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;wrap&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;empty&quot;</span></code>}
One of the listed string values or a user supplied function for padding. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>.
See also: <a class="reference external" href="https://numpy.org/doc/1.18/reference/generated/numpy.pad.html">https://numpy.org/doc/1.18/reference/generated/numpy.pad.html</a></p></li>
<li><p><strong>align_corners</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Geometrically, we consider the pixels of the input as squares rather than points.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.grid_sample.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.grid_sample.html</a>
It also can be a sequence of bool, each element corresponds to a key in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the corresponding metadata dictionary.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
it can be a sequence of string, map to the <cite>keys</cite>.
if None, will try to construct meta_keys by <cite>key_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – if meta_key is None, use <cite>key_{meta_key_postfix} to fetch the metadata according
to the key data, default is `meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
<li><p><strong>start_coord_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that records the start coordinate of spatial bounding box for foreground.</p></li>
<li><p><strong>end_coord_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that records the end coordinate of spatial bounding box for foreground.</p></li>
<li><p><strong>original_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that records original shape for foreground.</p></li>
<li><p><strong>cropped_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that records cropped shape for foreground.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
<li><p><strong>restore_resizing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – used to enable or disable resizing restoration, default is True.
If True, the transform will resize the items back to its original shape.</p></li>
<li><p><strong>restore_cropping</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – used to enable or disable cropping restoration, default is True.
If True, the transform will restore the items to its uncropped size.</p></li>
<li><p><strong>restore_spacing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – used to enable or disable spacing restoration, default is True.
If True, the transform will resample the items back to the spacing it had before being altered.</p></li>
<li><p><strong>restore_slicing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – used to enable or disable slicing restoration, default is True.
If True, the transform will reassemble the full volume by restoring the slices to their original positions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.ResizeGuidanced">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">ResizeGuidanced</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">guidance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cropped_shape_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'foreground_cropped_shape'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L707-L755"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.ResizeGuidanced" title="Link to this definition">#</a></dt>
<dd><p>Resize the guidance based on cropped vs resized image.</p>
<p>This transform assumes that the images have been cropped and resized. And the shape after cropped is store inside
the meta dict of ref image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to guidance</p></li>
<li><p><strong>ref_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to reference image to fetch current and original image details</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the metadata dictionary of <cite>ref_image</cite>.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
if None, will try to construct meta_keys by <cite>{ref_image}_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – if meta_key is None, use <cite>{ref_image}_{meta_key_postfix}</cite> to fetch the metadata according
to the key data, default is <cite>meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
<li><p><strong>cropped_shape_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that records cropped shape for foreground.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.FindDiscrepancyRegionsd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">FindDiscrepancyRegionsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pred'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discrepancy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'discrepancy'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L231-L266"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.FindDiscrepancyRegionsd" title="Link to this definition">#</a></dt>
<dd><p>Find discrepancy between prediction and actual during click interactions during training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to label source.</p></li>
<li><p><strong>pred</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to prediction source.</p></li>
<li><p><strong>discrepancy</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to store discrepancies found between label and prediction.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.FindAllValidSlicesd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">FindAllValidSlicesd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sids'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L36-L69"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.FindAllValidSlicesd" title="Link to this definition">#</a></dt>
<dd><p>Find/List all valid slices in the label.
Label is assumed to be a 4D Volume with shape CDHW, where C=1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to the label source.</p></li>
<li><p><strong>sids</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to store slices indices having valid label map.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.deepgrow.transforms.Fetch2DSliced">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.deepgrow.transforms.</span></span><span class="sig-name descname"><span class="pre">Fetch2DSliced</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'guidance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/deepgrow/transforms.py#L917-L973"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.deepgrow.transforms.Fetch2DSliced" title="Link to this definition">#</a></dt>
<dd><p>Fetch one slice in case of a 3D volume.</p>
<p>The volume only contains spatial coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>guidance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key that represents guidance.</p></li>
<li><p><strong>axis</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – axis that represents slice in 3D volume.</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the corresponding metadata dictionary.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
it can be a sequence of string, map to the <cite>keys</cite>.
if None, will try to construct meta_keys by <cite>key_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – use <cite>key_{meta_key_postfix}</cite> to fetch the metadata according to the key data,
default is <cite>meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-monai.apps.pathology.inferers">
<span id="pathology"></span><h2><cite>Pathology</cite><a class="headerlink" href="#module-monai.apps.pathology.inferers" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.inferers.SlidingWindowHoVerNetInferer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.inferers.</span></span><span class="sig-name descname"><span class="pre">SlidingWindowHoVerNetInferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sw_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">constant</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.125</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">constant</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sw_device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_roi_weight_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_input_padding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/inferers/inferer.py#L28-L211"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.inferers.SlidingWindowHoVerNetInferer" title="Link to this definition">#</a></dt>
<dd><p>Sliding window method for HoVerNet model inference,
with <cite>sw_batch_size</cite> windows for every model.forward().
Usage example can be found in the <a class="reference internal" href="inferers.html#monai.inferers.Inferer" title="monai.inferers.Inferer"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.inferers.Inferer</span></code></a> base class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roi_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the window size to execute SlidingWindow evaluation.
If it has non-positive components, the corresponding <cite>inputs</cite> size will be used.
if the components of the <cite>roi_size</cite> are non-positive values, the transform will use the
corresponding components of img size. For example, <cite>roi_size=(32, -1)</cite> will be adapted
to <cite>(32, 64)</cite> if the second spatial dimension size of img is <cite>64</cite>.</p></li>
<li><p><strong>sw_batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the batch size to run window slices.</p></li>
<li><p><strong>overlap</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Amount of overlap between scans.</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="utils.html#monai.utils.enums.BlendMode" title="monai.utils.enums.BlendMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlendMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – <p>{<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;gaussian&quot;</span></code>}
How to blend output of overlapping windows. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;constant</span></code>”: gives equal weight to all predictions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;gaussian</span></code>”: gives less weight to predictions on edges of windows.</p></li>
</ul>
</p></li>
<li><p><strong>sigma_scale</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – the standard deviation coefficient of the Gaussian window when <cite>mode</cite> is <code class="docutils literal notranslate"><span class="pre">&quot;gaussian&quot;</span></code>.
Default: 0.125. Actual window sigma is <code class="docutils literal notranslate"><span class="pre">sigma_scale</span></code> * <code class="docutils literal notranslate"><span class="pre">dim_size</span></code>.
When sigma_scale is a sequence of floats, the values denote sigma_scale at the corresponding
spatial dimensions.</p></li>
<li><p><strong>padding_mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="utils.html#monai.utils.enums.PytorchPadMode" title="monai.utils.enums.PytorchPadMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytorchPadMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – {<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;replicate&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;circular&quot;</span></code>}
Padding mode when <code class="docutils literal notranslate"><span class="pre">roi_size</span></code> is larger than inputs. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html</a></p></li>
<li><p><strong>cval</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – fill value for ‘constant’ padding mode. Default: 0</p></li>
<li><p><strong>sw_device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – device for the window data.
By default the device (and accordingly the memory) of the <cite>inputs</cite> is used.
Normally <cite>sw_device</cite> should be consistent with the device where <cite>predictor</cite> is defined.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – device for the stitched output prediction.
By default the device (and accordingly the memory) of the <cite>inputs</cite> is used. If for example
set to device=torch.device(‘cpu’) the gpu memory consumption is less and independent of the
<cite>inputs</cite> and <cite>roi_size</cite>. Output is on the <cite>device</cite>.</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to print a tqdm progress bar.</p></li>
<li><p><strong>cache_roi_weight_map</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to pre-compute the ROI weight map.</p></li>
<li><p><strong>cpu_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – when provided, dynamically switch to stitching on cpu (to save gpu memory)
when input image volume is larger than this threshold (in pixels/voxels).
Otherwise use <code class="docutils literal notranslate"><span class="pre">&quot;device&quot;</span></code>. Thus, the output may end-up on either cpu or gpu.</p></li>
<li><p><strong>extra_input_padding</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the amount of padding for the input image, which is a tuple of even number of pads.
Refer to to the <cite>pad</cite> argument of <cite>torch.nn.functional.pad</cite> for more details.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">sw_batch_size</span></code> denotes the max number of windows per network inference iteration,
not the batch size of inputs.</p>
</div>
</dd></dl>

<dl class="py class" id="module-monai.apps.pathology.losses.hovernet_loss">
<dt class="sig sig-object py" id="monai.apps.pathology.losses.hovernet_loss.HoVerNetLoss">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.losses.hovernet_loss.</span></span><span class="sig-name descname"><span class="pre">HoVerNetLoss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lambda_hv_mse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_hv_mse_grad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_np_ce</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_np_dice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_nc_ce</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_nc_dice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/losses/hovernet_loss.py#L24-L165"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.losses.hovernet_loss.HoVerNetLoss" title="Link to this definition">#</a></dt>
<dd><p>Loss function for HoVerNet pipeline, which is combination of losses across the three branches.
The NP (nucleus prediction) branch uses Dice + CrossEntropy.
The HV (Horizontal and Vertical) distance from centroid branch uses MSE + MSE of the gradient.
The NC (Nuclear Class prediction) branch uses Dice + CrossEntropy
The result is a weighted sum of these losses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lambda_hv_mse</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Weight factor to apply to the HV regression MSE part of the overall loss</p></li>
<li><p><strong>lambda_hv_mse_grad</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Weight factor to apply to the MSE of the HV gradient part of the overall loss</p></li>
<li><p><strong>lambda_np_ce</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Weight factor to apply to the nuclei prediction CrossEntropyLoss part
of the overall loss</p></li>
<li><p><strong>lambda_np_dice</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Weight factor to apply to the nuclei prediction DiceLoss part of overall loss</p></li>
<li><p><strong>lambda_nc_ce</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Weight factor to apply to the nuclei class prediction CrossEntropyLoss part
of the overall loss</p></li>
<li><p><strong>lambda_nc_dice</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Weight factor to apply to the nuclei class prediction DiceLoss part of the
overall loss</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.pathology.losses.hovernet_loss.HoVerNetLoss.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/losses/hovernet_loss.py#L98-L165"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.losses.hovernet_loss.HoVerNetLoss.forward" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – dictionary of predicted outputs for three branches,
each of which should have the shape of BNHW.</p></li>
<li><p><strong>target</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – dictionary of ground truths for three branches,
each of which should have the shape of BNHW.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class" id="module-monai.apps.pathology.metrics">
<dt class="sig sig-object py" id="monai.apps.pathology.metrics.LesionFROC">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.metrics.</span></span><span class="sig-name descname"><span class="pre">LesionFROC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grow_distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">itc_diameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_thresholds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.25,</span> <span class="pre">0.5,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nms_sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nms_prob_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nms_box_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_reader_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cuCIM'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/metrics/lesion_froc.py#L38-L177"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.metrics.LesionFROC" title="Link to this definition">#</a></dt>
<dd><p>Evaluate with Free Response Operating Characteristic (FROC) score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]) – either the list of dictionaries containing probability maps (inference result) and
tumor mask (ground truth), as below, or the path to a json file containing such list.
<cite>{
“prob_map”: “path/to/prob_map_1.npy”,
“tumor_mask”: “path/to/ground_truth_1.tiff”,
“level”: 6,
“pixel_spacing”: 0.243
}</cite></p></li>
<li><p><strong>grow_distance</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Euclidean distance (in micrometer) by which to grow the label the ground truth’s tumors.
Defaults to 75, which is the equivalent size of 5 tumor cells.</p></li>
<li><p><strong>itc_diameter</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the maximum diameter of a region (in micrometer) to be considered as an isolated tumor cell.
Defaults to 200.</p></li>
<li><p><strong>eval_thresholds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – the false positive rates for calculating the average sensitivity.
Defaults to (0.25, 0.5, 1, 2, 4, 8) which is the same as the CAMELYON 16 Challenge.</p></li>
<li><p><strong>nms_sigma</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – the standard deviation for gaussian filter of non-maximal suppression. Defaults to 0.0.</p></li>
<li><p><strong>nms_prob_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – the probability threshold of non-maximal suppression. Defaults to 0.5.</p></li>
<li><p><strong>nms_box_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the box size (in pixel) to be removed around the pixel for non-maximal suppression.</p></li>
<li><p><strong>image_reader_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the name of library to be used for loading whole slide imaging, either CuCIM or OpenSlide.
Defaults to CuCIM.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more info on <cite>nms_*</cite> parameters look at monai.utils.prob_nms.ProbNMS`.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.pathology.metrics.LesionFROC.compute_fp_tp">
<span class="sig-name descname"><span class="pre">compute_fp_tp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/metrics/lesion_froc.py#L130-L157"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.metrics.LesionFROC.compute_fp_tp" title="Link to this definition">#</a></dt>
<dd><p>Compute false positive and true positive probabilities for tumor detection,
by comparing the model outputs with the prepared ground truths for all samples</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.pathology.metrics.LesionFROC.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/metrics/lesion_froc.py#L159-L177"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.metrics.LesionFROC.evaluate" title="Link to this definition">#</a></dt>
<dd><p>Evaluate the detection performance of a model based on the model probability map output,
the ground truth tumor mask, and their associated metadata (e.g., pixel_spacing, level)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.pathology.metrics.LesionFROC.prepare_ground_truth">
<span class="sig-name descname"><span class="pre">prepare_ground_truth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/metrics/lesion_froc.py#L108-L128"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.metrics.LesionFROC.prepare_ground_truth" title="Link to this definition">#</a></dt>
<dd><p>Prepare the ground truth for evaluation based on the binary tumor mask</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.pathology.metrics.LesionFROC.prepare_inference_result">
<span class="sig-name descname"><span class="pre">prepare_inference_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/metrics/lesion_froc.py#L86-L106"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.metrics.LesionFROC.prepare_inference_result" title="Link to this definition">#</a></dt>
<dd><p>Prepare the probability map for detection evaluation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function" id="module-monai.apps.pathology.utils">
<dt class="sig sig-object py" id="monai.apps.pathology.utils.compute_multi_instance_mask">
<span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.utils.</span></span><span class="sig-name descname"><span class="pre">compute_multi_instance_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/utils.py#L26-L42"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.utils.compute_multi_instance_mask" title="Link to this definition">#</a></dt>
<dd><p>This method computes the segmentation mask according to the binary tumor mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – the binary mask array</p></li>
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – the threshold to fill holes</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.pathology.utils.compute_isolated_tumor_cells">
<span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.utils.</span></span><span class="sig-name descname"><span class="pre">compute_isolated_tumor_cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tumor_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/utils.py#L45-L58"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.utils.compute_isolated_tumor_cells" title="Link to this definition">#</a></dt>
<dd><p>This method computes identifies Isolated Tumor Cells (ITC) and return their labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tumor_mask</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – the tumor mask.</p></li>
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – the threshold (at the mask level) to define an isolated tumor cell (ITC).
A region with the longest diameter less than this threshold is considered as an ITC.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.utils.PathologyProbNMS">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.utils.</span></span><span class="sig-name descname"><span class="pre">PathologyProbNMS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">48</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/utils.py#L61-L80"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.utils.PathologyProbNMS" title="Link to this definition">#</a></dt>
<dd><p>This class extends monai.utils.ProbNMS and add the <cite>resolution</cite> option for
Pathology.</p>
</dd></dl>

<dl class="py class" id="module-monai.apps.pathology.transforms.stain.array">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.stain.array.ExtractHEStains">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.stain.array.</span></span><span class="sig-name descname"><span class="pre">ExtractHEStains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1.9705,</span> <span class="pre">1.0308)</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/stain/array.py#L19-L108"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.stain.array.ExtractHEStains" title="Link to this definition">#</a></dt>
<dd><p>Class to extract a target stain from an image, using stain deconvolution (see Note).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tli</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – transmitted light intensity. Defaults to 240.</p></li>
<li><p><strong>alpha</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – tolerance in percentile for the pseudo-min (alpha percentile)
and pseudo-max (100 - alpha percentile). Defaults to 1.</p></li>
<li><p><strong>beta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – absorbance threshold for transparent pixels. Defaults to 0.15</p></li>
<li><p><strong>max_cref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – reference maximum stain concentrations for Hematoxylin &amp; Eosin (H&amp;E).
Defaults to (1.9705, 1.0308).</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information refer to:
- the original paper: Macenko et al., 2009 <a class="reference external" href="http://wwwx.cs.unc.edu/~mn/sites/default/files/macenko2009.pdf">http://wwwx.cs.unc.edu/~mn/sites/default/files/macenko2009.pdf</a>
- the previous implementations:</p>
<blockquote>
<div><ul class="simple">
<li><p>MATLAB: <a class="github reference external" href="https://github.com/mitkovetta/staining-normalization">mitkovetta/staining-normalization</a></p></li>
<li><p>Python: <a class="github reference external" href="https://github.com/schaugf/HEnorm_python">schaugf/HEnorm_python</a></p></li>
</ul>
</div></blockquote>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.stain.array.NormalizeHEStains">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.stain.array.</span></span><span class="sig-name descname"><span class="pre">NormalizeHEStains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_he</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">((0.5626,</span> <span class="pre">0.2159),</span> <span class="pre">(0.7201,</span> <span class="pre">0.8012),</span> <span class="pre">(0.4062,</span> <span class="pre">0.5581))</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1.9705,</span> <span class="pre">1.0308)</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/stain/array.py#L111-L192"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.stain.array.NormalizeHEStains" title="Link to this definition">#</a></dt>
<dd><p>Class to normalize patches/images to a reference or target image stain (see Note).</p>
<p>Performs stain deconvolution of the source image using the ExtractHEStains
class, to obtain the stain matrix and calculate the stain concentration matrix
for the image. Then, performs the inverse Beer-Lambert transform to recreate the
patch using the target H&amp;E stain matrix provided. If no target stain provided, a default
reference stain is used. Similarly, if no maximum stain concentrations are provided, a
reference maximum stain concentrations matrix is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tli</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – transmitted light intensity. Defaults to 240.</p></li>
<li><p><strong>alpha</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – tolerance in percentile for the pseudo-min (alpha percentile) and
pseudo-max (100 - alpha percentile). Defaults to 1.</p></li>
<li><p><strong>beta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – absorbance threshold for transparent pixels. Defaults to 0.15.</p></li>
<li><p><strong>target_he</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – target stain matrix. Defaults to ((0.5626, 0.2159), (0.7201, 0.8012), (0.4062, 0.5581)).</p></li>
<li><p><strong>max_cref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – reference maximum stain concentrations for Hematoxylin &amp; Eosin (H&amp;E).
Defaults to [1.9705, 1.0308].</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information refer to:
- the original paper: Macenko et al., 2009 <a class="reference external" href="http://wwwx.cs.unc.edu/~mn/sites/default/files/macenko2009.pdf">http://wwwx.cs.unc.edu/~mn/sites/default/files/macenko2009.pdf</a>
- the previous implementations:</p>
<blockquote>
<div><ul class="simple">
<li><p>MATLAB: <a class="github reference external" href="https://github.com/mitkovetta/staining-normalization">mitkovetta/staining-normalization</a></p></li>
<li><p>Python: <a class="github reference external" href="https://github.com/schaugf/HEnorm_python">schaugf/HEnorm_python</a></p></li>
</ul>
</div></blockquote>
</div>
</dd></dl>

<p id="module-monai.apps.pathology.transforms.stain.dictionary">A collection of dictionary-based wrappers around the pathology transforms
defined in <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.array</span></code>.</p>
<p>Class names are ended with ‘d’ to denote dictionary-based transforms.</p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.stain.dictionary.ExtractHEStainsd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.stain.dictionary.</span></span><span class="sig-name descname"><span class="pre">ExtractHEStainsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1.9705,</span> <span class="pre">1.0308)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/stain/dictionary.py#L30-L63"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.stain.dictionary.ExtractHEStainsd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.ExtractHEStains</span></code>.
Class to extract a target stain from an image, using stain deconvolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.
See also: <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.compose.MapTransform</span></code></p></li>
<li><p><strong>tli</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – transmitted light intensity. Defaults to 240.</p></li>
<li><p><strong>alpha</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – tolerance in percentile for the pseudo-min (alpha percentile)
and pseudo-max (100 - alpha percentile). Defaults to 1.</p></li>
<li><p><strong>beta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – absorbance threshold for transparent pixels. Defaults to 0.15</p></li>
<li><p><strong>max_cref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – reference maximum stain concentrations for Hematoxylin &amp; Eosin (H&amp;E).
Defaults to (1.9705, 1.0308).</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.stain.dictionary.NormalizeHEStainsd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.stain.dictionary.</span></span><span class="sig-name descname"><span class="pre">NormalizeHEStainsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">240</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_he</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">((0.5626,</span> <span class="pre">0.2159),</span> <span class="pre">(0.7201,</span> <span class="pre">0.8012),</span> <span class="pre">(0.4062,</span> <span class="pre">0.5581))</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1.9705,</span> <span class="pre">1.0308)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/stain/dictionary.py#L66-L109"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.stain.dictionary.NormalizeHEStainsd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.NormalizeHEStains</span></code>.</p>
<p>Class to normalize patches/images to a reference or target image stain.</p>
<p>Performs stain deconvolution of the source image using the ExtractHEStains
class, to obtain the stain matrix and calculate the stain concentration matrix
for the image. Then, performs the inverse Beer-Lambert transform to recreate the
patch using the target H&amp;E stain matrix provided. If no target stain provided, a default
reference stain is used. Similarly, if no maximum stain concentrations are provided, a
reference maximum stain concentrations matrix is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.
See also: <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.compose.MapTransform</span></code></p></li>
<li><p><strong>tli</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – transmitted light intensity. Defaults to 240.</p></li>
<li><p><strong>alpha</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – tolerance in percentile for the pseudo-min (alpha percentile) and
pseudo-max (100 - alpha percentile). Defaults to 1.</p></li>
<li><p><strong>beta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – absorbance threshold for transparent pixels. Defaults to 0.15.</p></li>
<li><p><strong>target_he</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – target stain matrix. Defaults to None.</p></li>
<li><p><strong>max_cref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – reference maximum stain concentrations for Hematoxylin &amp; Eosin (H&amp;E).
Defaults to None.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class" id="module-monai.apps.pathology.transforms.post.array">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateSuccinctContour">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateSuccinctContour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L356-L534"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateSuccinctContour" title="Link to this definition">#</a></dt>
<dd><p>Converts SciPy-style contours (generated by skimage.measure.find_contours) to a more succinct version which only includes
the pixels to which lines need to be drawn (i.e. not the intervening pixels along each line).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>height</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – height of bounding box, used to detect direction of line segment.</p></li>
<li><p><strong>width</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – width of bounding box, used to detect direction of line segment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>the pixels that need to be joined by straight lines to describe the outmost pixels of the foreground similar to</dt><dd><p>OpenCV’s cv.CHAIN_APPROX_SIMPLE (counterclockwise)</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateInstanceContour">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceContour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_num_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L537-L581"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceContour" title="Link to this definition">#</a></dt>
<dd><p>Generate contour for each instance in a 2D array. Use <cite>GenerateSuccinctContour</cite> to only include
the pixels to which lines need to be drawn</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_num_points</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – assumed that the created contour does not form a contour if it does not contain more points
than the specified value. Defaults to 3.</p></li>
<li><p><strong>contour_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an optional value for <cite>skimage.measure.find_contours</cite> to find contours in the array.
If not provided, the level is set to <cite>(max(image) + min(image)) / 2</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateInstanceCentroid">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceCentroid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'int'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L584-L614"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceCentroid" title="Link to this definition">#</a></dt>
<dd><p>Generate instance centroid using <cite>skimage.measure.centroid</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the data type of output centroid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateInstanceType">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceType</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L617-L652"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceType" title="Link to this definition">#</a></dt>
<dd><p>Generate instance type and probability for each instance.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.Watershed">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">Watershed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connectivity=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.int64'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L59-L97"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.Watershed" title="Link to this definition">#</a></dt>
<dd><p>Use <cite>skimage.segmentation.watershed</cite> to get instance segmentation results from images.
See: <a class="reference external" href="https://scikit-image.org/docs/stable/api/skimage.segmentation.html#skimage.segmentation.watershed">https://scikit-image.org/docs/stable/api/skimage.segmentation.html#skimage.segmentation.watershed</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connectivity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an array with the same number of dimensions as image whose non-zero elements indicate
neighbors for connection. Following the scipy convention, default is a one-connected array of
the dimension of the image.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert, default is np.int64.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateWatershedMask">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateWatershedMask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">activation='softmax'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_object_size=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.uint8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L100-L169"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateWatershedMask" title="Link to this definition">#</a></dt>
<dd><p>generate mask used in <cite>watershed</cite>. Only points at which mask == True will be labeled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activation</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – the activation layer to be applied on the input probability map.
It can be “softmax” or “sigmoid” string, or any callable. Defaults to “softmax”.</p></li>
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an optional float value to threshold to binarize probability map.
If not provided, defaults to 0.5 when activation is not “softmax”, otherwise None.</p></li>
<li><p><strong>min_object_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – objects smaller than this size (in pixel) are removed. Defaults to 10.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert, default is np.uint8.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateInstanceBorder">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceBorder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kernel_size=5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L172-L238"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceBorder" title="Link to this definition">#</a></dt>
<dd><p>Generate instance border by hover map. The more parts of the image that cannot be identified as foreground areas,
the larger the grey scale value. The grey value of the instance’s border will be larger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kernel_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the size of the Sobel kernel. Defaults to 5.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data type to convert to. Defaults to np.float32.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – when the <cite>mask</cite> shape is not [1, H, W].</p></li>
<li><p><strong>ValueError</strong> – when the <cite>hover_map</cite> shape is not [2, H, W].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateDistanceMap">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateDistanceMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smooth_fn=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L241-L281"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateDistanceMap" title="Link to this definition">#</a></dt>
<dd><p>Generate distance map.
In general, the instance map is calculated from the distance to the background.
Here, we use 1 - “instance border map” to generate the distance map.
Nuclei values form mountains so invert them to get basins.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>smooth_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – smoothing function for distance map, which can be any callable object.
If not provided <a class="reference internal" href="transforms.html#monai.transforms.GaussianSmooth" title="monai.transforms.GaussianSmooth"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.GaussianSmooth()</span></code></a> is used.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data type to convert to. Defaults to np.float32.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.GenerateWatershedMarkers">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">GenerateWatershedMarkers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold=0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius=2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_object_size=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postprocess_fn=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.int64'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L284-L353"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.GenerateWatershedMarkers" title="Link to this definition">#</a></dt>
<dd><p>Generate markers to be used in <cite>watershed</cite>. The watershed algorithm treats pixels values as a local topography
(elevation). The algorithm floods basins from the markers until basins attributed to different markers meet on
watershed lines. Generally, markers are chosen as local minima of the image, from which basins are flooded.
Here is the implementation from HoVerNet paper.
For more details refer to papers: <a class="reference external" href="https://arxiv.org/abs/1812.06499">https://arxiv.org/abs/1812.06499</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – a float value to threshold to binarize instance border map.
It turns uncertain area to 1 and other area to 0. Defaults to 0.4.</p></li>
<li><p><strong>radius</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the radius of the disk-shaped footprint used in <cite>opening</cite>. Defaults to 2.</p></li>
<li><p><strong>min_object_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – objects smaller than this size (in pixel) are removed. Defaults to 10.</p></li>
<li><p><strong>postprocess_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – additional post-process function on the markers.
If not provided, <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.post.FillHoles()</span></code> will be used.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data type to convert to. Defaults to np.int64.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.HoVerNetNuclearTypePostProcessing">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">HoVerNetNuclearTypePostProcessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">activation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'softmax'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_type_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L755-L841"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.HoVerNetNuclearTypePostProcessing" title="Link to this definition">#</a></dt>
<dd><p>The post-processing transform for HoVerNet model to generate nuclear type information.
It updates the input instance info dictionary with information about types of the nuclei (value and probability).
Also if requested (<cite>return_type_map=True</cite>), it generates a pixel-level type map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activation</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – the activation layer to be applied on nuclear type branch. It can be “softmax” or “sigmoid” string,
or any callable. Defaults to “softmax”.</p></li>
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an optional float value to threshold to binarize probability map.
If not provided, defaults to 0.5 when activation is not “softmax”, otherwise None.</p></li>
<li><p><strong>return_type_map</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to calculate and return pixel-level type map.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the output Tensor data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.array.HoVerNetInstanceMapPostProcessing">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.array.</span></span><span class="sig-name descname"><span class="pre">HoVerNetInstanceMapPostProcessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">activation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'softmax'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_object_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sobel_kernel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_smooth_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_postprocess_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watershed_connectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_num_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/array.py#L655-L752"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.array.HoVerNetInstanceMapPostProcessing" title="Link to this definition">#</a></dt>
<dd><p>The post-processing transform for HoVerNet model to generate instance segmentation map.
It generates an instance segmentation map as well as a dictionary containing centroids, bounding boxes, and contours
for each instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activation</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – the activation layer to be applied on the input probability map.
It can be “softmax” or “sigmoid” string, or any callable. Defaults to “softmax”.</p></li>
<li><p><strong>mask_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a float value to threshold to binarize probability map to generate mask.</p></li>
<li><p><strong>min_object_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – objects smaller than this size (in pixel) are removed. Defaults to 10.</p></li>
<li><p><strong>sobel_kernel_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the size of the Sobel kernel used in <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceBorder" title="monai.apps.pathology.transforms.post.array.GenerateInstanceBorder"><code class="xref py py-class docutils literal notranslate"><span class="pre">GenerateInstanceBorder</span></code></a>. Defaults to 5.</p></li>
<li><p><strong>distance_smooth_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – smoothing function for distance map.
If not provided, <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.intensity.GaussianSmooth()</span></code> will be used.</p></li>
<li><p><strong>marker_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – a float value to threshold to binarize instance border map for markers.
It turns uncertain area to 1 and other area to 0. Defaults to 0.4.</p></li>
<li><p><strong>marker_radius</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the radius of the disk-shaped footprint used in <cite>opening</cite> of markers. Defaults to 2.</p></li>
<li><p><strong>marker_postprocess_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – post-process function for watershed markers.
If not provided, <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.post.FillHoles()</span></code> will be used.</p></li>
<li><p><strong>watershed_connectivity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – <cite>connectivity</cite> argument of <cite>skimage.segmentation.watershed</cite>.</p></li>
<li><p><strong>min_num_points</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – minimum number of points to be considered as a contour. Defaults to 3.</p></li>
<li><p><strong>contour_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an optional value for <cite>skimage.measure.find_contours</cite> to find contours in the array.
If not provided, the level is set to <cite>(max(image) + min(image)) / 2</cite>.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the output Tensor data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class" id="module-monai.apps.pathology.transforms.post.dictionary">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateSuccinctContourd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateSuccinctContourd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L297-L322"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateSuccinctContourd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.GenerateSuccinctContour" title="monai.apps.pathology.transforms.post.array.GenerateSuccinctContour"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.post.array.GenerateSuccinctContour</span></code></a>.
Converts SciPy-style contours (generated by skimage.measure.find_contours) to a more succinct version which
only includes the pixels to which lines need to be drawn (i.e. not the intervening pixels along each line).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>height</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – height of bounding box, used to detect direction of line segment.</p></li>
<li><p><strong>width</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – width of bounding box, used to detect direction of line segment.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateInstanceContourd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceContourd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'contour'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_num_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L325-L369"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceContourd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceContour" title="monai.apps.pathology.transforms.post.array.GenerateInstanceContour"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.post.array.GenerateInstanceContour</span></code></a>.
Generate contour for each instance in a 2D array. Use <cite>GenerateSuccinctContour</cite> to only include the pixels
to which lines need to be drawn</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>contour_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output contour coordinates will be written to the value of
<cite>{key}_{contour_key_postfix}</cite>.</p></li>
<li><p><strong>offset_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – keys of offset used in <cite>GenerateInstanceContour</cite>.</p></li>
<li><p><strong>min_num_points</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – assumed that the created contour does not form a contour if it does not contain more points
than the specified value. Defaults to 3.</p></li>
<li><p><strong>level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – optional. Value along which to find contours in the array. By default, the level is set
to (max(image) + min(image)) / 2.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateInstanceCentroidd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceCentroidd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centroid_key_postfix='centroid'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_key=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'int'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L372-L411"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceCentroidd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceCentroid" title="monai.apps.pathology.transforms.post.array.GenerateInstanceCentroid"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.post.array.GenerateInstanceCentroid</span></code></a>.
Generate instance centroid using <cite>skimage.measure.centroid</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>centroid_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output centroid coordinates will be written to the value of
<cite>{key}_{centroid_key_postfix}</cite>.</p></li>
<li><p><strong>offset_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – keys of offset used in <cite>GenerateInstanceCentroid</cite>.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the data type of output centroid.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateInstanceTyped">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceTyped</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_info_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'type_info'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bbox'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seg_pred_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'seg'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_id_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L414-L459"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceTyped" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceType" title="monai.apps.pathology.transforms.post.array.GenerateInstanceType"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.post.array.GenerateInstanceType</span></code></a>.
Generate instance type and probability for each instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>type_info_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output instance type and probability will be written to the value of
<cite>{type_info_key}</cite>.</p></li>
<li><p><strong>bbox_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – keys of bounding box.</p></li>
<li><p><strong>seg_pred_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – keys of segmentation prediction map.</p></li>
<li><p><strong>instance_id_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – keys of instance id.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.Watershedd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">Watershedd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_key='mask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">markers_key=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connectivity=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.uint8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L76-L124"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.Watershedd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.array.Watershed</span></code>.
Use <cite>skimage.segmentation.watershed</cite> to get instance segmentation results from images.
See: <a class="reference external" href="https://scikit-image.org/docs/stable/api/skimage.segmentation.html#skimage.segmentation.watershed">https://scikit-image.org/docs/stable/api/skimage.segmentation.html#skimage.segmentation.watershed</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.
See also: monai.transforms.MapTransform</p></li>
<li><p><strong>mask_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – keys of mask used in watershed. Only points at which mask == True will be labeled.</p></li>
<li><p><strong>markers_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – keys of markers used in watershed. If None (no markers given), the local minima of the image are
used as markers.</p></li>
<li><p><strong>connectivity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – An array with the same number of dimensions as image whose non-zero elements indicate neighbors
for connection. Following the scipy convention, default is a one-connected array of the dimension of the
image.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert. Defaults to np.uint8.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – when the <cite>image</cite> shape is not [1, H, W].</p></li>
<li><p><strong>ValueError</strong> – when the <cite>mask</cite> shape is not [1, H, W].</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateWatershedMaskd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateWatershedMaskd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_key='mask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activation='softmax'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_object_size=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.uint8'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L127-L168"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateWatershedMaskd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.array.GenerateWatershedMask</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>mask_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the mask will be written to the value of <cite>{mask_key}</cite>.</p></li>
<li><p><strong>activation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – the activation layer to be applied on nuclear type branch. It can be “softmax” or “sigmoid” string,
or any callable. Defaults to “softmax”.</p></li>
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if not None, threshold the float values to int number 0 or 1 with specified threshold.</p></li>
<li><p><strong>min_object_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – objects smaller than this size are removed. Defaults to 10.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert, default is np.uint8.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateInstanceBorderd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateInstanceBorderd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask_key='mask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hover_map_key='hover_map'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border_key='border'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_size=21</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L171-L209"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceBorderd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.array.GenerateInstanceBorder</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the input key where the watershed mask is stored. Defaults to <cite>“mask”</cite>.</p></li>
<li><p><strong>hover_map_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the input key where hover map is stored. Defaults to <cite>“hover_map”</cite>.</p></li>
<li><p><strong>border_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output key where instance border map is written. Defaults to <cite>“border”</cite>.</p></li>
<li><p><strong>kernel_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the size of the Sobel kernel. Defaults to 21.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert, default is np.float32.</p></li>
<li><p><strong>allow_missing_keys</strong> – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – when the <cite>hover_map</cite> has only one value.</p></li>
<li><p><strong>ValueError</strong> – when the <cite>sobel gradient map</cite> has only one value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateDistanceMapd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateDistanceMapd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask_key='mask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border_key='border'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_map_key='dist_map'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_fn=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.float32'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L212-L245"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateDistanceMapd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.array.GenerateDistanceMap</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the input key where the watershed mask is stored. Defaults to <cite>“mask”</cite>.</p></li>
<li><p><strong>border_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the input key where instance border map is stored. Defaults to <cite>“border”</cite>.</p></li>
<li><p><strong>dist_map_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output key where distance map is written. Defaults to <cite>“dist_map”</cite>.</p></li>
<li><p><strong>smooth_fn</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – smoothing function for distance map, which can be any callable object.
If not provided <a class="reference internal" href="transforms.html#monai.transforms.GaussianSmooth" title="monai.transforms.GaussianSmooth"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.GaussianSmooth()</span></code></a> is used.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert, default is np.float32.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.GenerateWatershedMarkersd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">GenerateWatershedMarkersd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask_key='mask'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border_key='border'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">markers_key='markers'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold=0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius=2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_object_size=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postprocess_fn=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.uint8'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L248-L294"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.GenerateWatershedMarkersd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.array.GenerateWatershedMarkers</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mask_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the input key where the watershed mask is stored. Defaults to <cite>“mask”</cite>.</p></li>
<li><p><strong>border_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the input key where instance border map is stored. Defaults to <cite>“border”</cite>.</p></li>
<li><p><strong>markers_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output key where markers is written. Defaults to <cite>“markers”</cite>.</p></li>
<li><p><strong>threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – threshold the float values of instance border map to int 0 or 1 with specified threshold.
It turns uncertain area to 1 and other area to 0. Defaults to 0.4.</p></li>
<li><p><strong>radius</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the radius of the disk-shaped footprint used in <cite>opening</cite>. Defaults to 2.</p></li>
<li><p><strong>min_object_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – objects smaller than this size are removed. Defaults to 10.</p></li>
<li><p><strong>postprocess_fn</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – execute additional post transformation on marker. Defaults to None.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data content type to convert, default is np.uint8.</p></li>
<li><p><strong>allow_missing_keys</strong> – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.HoVerNetInstanceMapPostProcessingd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">HoVerNetInstanceMapPostProcessingd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nuclear_prediction_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nucleus_prediction'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hover_map_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'horizontal_vertical'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_info_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'instance_info'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_map_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'instance_map'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'softmax'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_object_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sobel_kernel_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_smooth_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_postprocess_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watershed_connectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_num_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L462-L544"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.HoVerNetInstanceMapPostProcessingd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper for <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.HoVerNetInstanceMapPostProcessing" title="monai.apps.pathology.transforms.post.array.HoVerNetInstanceMapPostProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.post.array.HoVerNetInstanceMapPostProcessing</span></code></a>.
The post-processing transform for HoVerNet model to generate instance segmentation map.
It generates an instance segmentation map as well as a dictionary containing centroids, bounding boxes, and contours
for each instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nuclear_prediction_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the key for HoVerNet NP (nuclear prediction) branch. Defaults to <cite>HoVerNetBranch.NP</cite>.</p></li>
<li><p><strong>hover_map_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the key for HoVerNet NC (nuclear prediction) branch. Defaults to <cite>HoVerNetBranch.HV</cite>.</p></li>
<li><p><strong>instance_info_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output key where instance information (contour, bounding boxes, and centroids)
is written. Defaults to <cite>“instance_info”</cite>.</p></li>
<li><p><strong>instance_map_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output key where instance map is written. Defaults to <cite>“instance_map”</cite>.</p></li>
<li><p><strong>activation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]) – the activation layer to be applied on the input probability map.
It can be “softmax” or “sigmoid” string, or any callable. Defaults to “softmax”.</p></li>
<li><p><strong>mask_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a float value to threshold to binarize probability map to generate mask.</p></li>
<li><p><strong>min_object_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – objects smaller than this size are removed. Defaults to 10.</p></li>
<li><p><strong>sobel_kernel_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the size of the Sobel kernel used in <code class="xref py py-class docutils literal notranslate"><span class="pre">GenerateInstanceBorder</span></code>. Defaults to 5.</p></li>
<li><p><strong>distance_smooth_fn</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – smoothing function for distance map.
If not provided, <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.intensity.GaussianSmooth()</span></code> will be used.</p></li>
<li><p><strong>marker_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – a float value to threshold to binarize instance border map for markers.
It turns uncertain area to 1 and other area to 0. Defaults to 0.4.</p></li>
<li><p><strong>marker_radius</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the radius of the disk-shaped footprint used in <cite>opening</cite> of markers. Defaults to 2.</p></li>
<li><p><strong>marker_postprocess_fn</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – post-process function for watershed markers.
If not provided, <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.transforms.post.FillHoles()</span></code> will be used.</p></li>
<li><p><strong>watershed_connectivity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – <cite>connectivity</cite> argument of <cite>skimage.segmentation.watershed</cite>.</p></li>
<li><p><strong>min_num_points</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – minimum number of points to be considered as a contour. Defaults to 3.</p></li>
<li><p><strong>contour_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an optional value for <cite>skimage.measure.find_contours</cite> to find contours in the array.
If not provided, the level is set to <cite>(max(image) + min(image)) / 2</cite>.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the output Tensor data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.pathology.transforms.post.dictionary.HoVerNetNuclearTypePostProcessingd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.pathology.transforms.post.dictionary.</span></span><span class="sig-name descname"><span class="pre">HoVerNetNuclearTypePostProcessingd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_prediction_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'type_prediction'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_info_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'instance_info'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_map_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'instance_map'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_map_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'type_map'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'softmax'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_type_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/pathology/transforms/post/dictionary.py#L547-L595"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.pathology.transforms.post.dictionary.HoVerNetNuclearTypePostProcessingd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper for <a class="reference internal" href="#monai.apps.pathology.transforms.post.array.HoVerNetNuclearTypePostProcessing" title="monai.apps.pathology.transforms.post.array.HoVerNetNuclearTypePostProcessing"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.pathology.transforms.post.array.HoVerNetNuclearTypePostProcessing</span></code></a>.
It updates the input instance info dictionary with information about types of the nuclei (value and probability).
Also if requested (<cite>return_type_map=True</cite>), it generates a pixel-level type map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type_prediction_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the key for HoVerNet NC (type prediction) branch. Defaults to <cite>HoVerNetBranch.NC</cite>.</p></li>
<li><p><strong>instance_info_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the key where instance information (contour, bounding boxes, and centroids) is stored.
Defaults to <cite>“instance_info”</cite>.</p></li>
<li><p><strong>instance_map_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the key where instance map is stored. Defaults to <cite>“instance_map”</cite>.</p></li>
<li><p><strong>type_map_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output key where type map is written. Defaults to <cite>“type_map”</cite>.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the output Tensor data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="detection">
<h2><cite>Detection</cite><a class="headerlink" href="#detection" title="Link to this heading">#</a></h2>
<section id="module-monai.apps.detection.utils.hard_negative_sampler">
<span id="hard-negative-sampler"></span><h3><cite>Hard Negative Sampler</cite><a class="headerlink" href="#module-monai.apps.detection.utils.hard_negative_sampler" title="Link to this heading">#</a></h3>
<p>The functions in this script are adapted from nnDetection,
<a class="github reference external" href="https://github.com/MIC-DKFZ/nnDetection/blob/main/nndet/core/boxes/sampler.py">MIC-DKFZ/nnDetection</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.hard_negative_sampler.</span></span><span class="sig-name descname"><span class="pre">HardNegativeSampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_fraction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_neg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L99-L305"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler" title="Link to this definition">#</a></dt>
<dd><p>HardNegativeSampler is used to suppress false positive rate in classification tasks.
During training, it selects negative samples with high prediction scores.</p>
<p>The training workflow is described as the follows:
1) forward network and get prediction scores (classification prob/logits) for all the samples;
2) use hard negative sampler to choose negative samples with high prediction scores and some positive samples;
3) compute classification loss for the selected samples;
4) do back propagation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch_size_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of training samples to be randomly selected per image</p></li>
<li><p><strong>positive_fraction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of positive elements in the selected samples</p></li>
<li><p><strong>min_neg</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – minimum number of negative samples to select if possible.</p></li>
<li><p><strong>pool_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – when we need <code class="docutils literal notranslate"><span class="pre">num_neg</span></code> hard negative samples, they will be randomly selected from
<code class="docutils literal notranslate"><span class="pre">num_neg</span> <span class="pre">*</span> <span class="pre">pool_size</span></code> negative samples with the highest prediction scores.
Larger <code class="docutils literal notranslate"><span class="pre">pool_size</span></code> gives more randomness, yet selects negative samples that are less ‘hard’,
i.e., negative samples with lower prediction scores.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.get_num_neg">
<span class="sig-name descname"><span class="pre">get_num_neg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">negative</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pos</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L264-L279"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.get_num_neg" title="Link to this definition">#</a></dt>
<dd><p>Sample enough negatives to fill up <code class="docutils literal notranslate"><span class="pre">self.batch_size_per_image</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>negative</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – indices of positive samples</p></li>
<li><p><strong>num_pos</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of positive samples to draw</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of negative samples</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.get_num_pos">
<span class="sig-name descname"><span class="pre">get_num_pos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positive</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L248-L262"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.get_num_pos" title="Link to this definition">#</a></dt>
<dd><p>Number of positive samples to draw</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>positive</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – indices of positive samples</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of positive sample</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_positives">
<span class="sig-name descname"><span class="pre">select_positives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positive</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L281-L305"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_positives" title="Link to this definition">#</a></dt>
<dd><p>Select positive samples</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>positive</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – indices of positive samples, sized (P,),
where P is the number of positive samples</p></li>
<li><p><strong>num_pos</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of positive samples to sample</p></li>
<li><p><strong>labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – labels for all samples, sized (A,),
where A is the number of samples.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>binary mask of positive samples to choose, sized (A,),</dt><dd><p>where A is the number of samples in one image</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_samples_img_list">
<span class="sig-name descname"><span class="pre">select_samples_img_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fg_probs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L161-L207"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_samples_img_list" title="Link to this definition">#</a></dt>
<dd><p>Select positives and hard negatives from list samples per image.
Hard negative sampler will be applied to each image independently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of labels per image.
For image i in the batch, target_labels[i] is a Tensor sized (A_i,),
where A_i is the number of samples in image i.
Positive samples have positive labels, negative samples have label 0.</p></li>
<li><p><strong>fg_probs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of maximum foreground probability per images,
For image i in the batch, target_labels[i] is a Tensor sized (A_i,),
where A_i is the number of samples in image i.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>list of binary mask for positive samples</p></li>
<li><p>list binary mask for negative samples</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sampler</span> <span class="o">=</span> <span class="n">HardNegativeSampler</span><span class="p">(</span>
    <span class="n">batch_size_per_image</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">positive_fraction</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">min_neg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pool_size</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="c1"># two images with different number of samples</span>
<span class="n">target_labels</span> <span class="o">=</span> <span class="p">[</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]),</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])]</span>
<span class="n">fg_probs</span> <span class="o">=</span> <span class="p">[</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
<span class="n">pos_idx_list</span><span class="p">,</span> <span class="n">neg_idx_list</span> <span class="o">=</span> <span class="n">sampler</span><span class="o">.</span><span class="n">select_samples_img_list</span><span class="p">(</span><span class="n">target_labels</span><span class="p">,</span> <span class="n">fg_probs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_samples_per_img">
<span class="sig-name descname"><span class="pre">select_samples_per_img</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels_per_img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fg_probs_per_img</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L209-L246"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_samples_per_img" title="Link to this definition">#</a></dt>
<dd><p>Select positives and hard negatives from samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels_per_img</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – labels, sized (A,).
Positive samples have positive labels, negative samples have label 0.</p></li>
<li><p><strong>fg_probs_per_img</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – maximum foreground probability, sized (A,)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>binary mask for positive samples, sized (A,)</p></li>
<li><p>binary mask for negative samples, sized (A,)</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sampler</span> <span class="o">=</span> <span class="n">HardNegativeSampler</span><span class="p">(</span>
    <span class="n">batch_size_per_image</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">positive_fraction</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">min_neg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pool_size</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
<span class="c1"># two images with different number of samples</span>
<span class="n">target_labels</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">fg_probs</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">pos_idx</span><span class="p">,</span> <span class="n">neg_idx</span> <span class="o">=</span> <span class="n">sampler</span><span class="o">.</span><span class="n">select_samples_per_img</span><span class="p">(</span><span class="n">target_labels</span><span class="p">,</span> <span class="n">fg_probs</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSamplerBase">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.hard_negative_sampler.</span></span><span class="sig-name descname"><span class="pre">HardNegativeSamplerBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pool_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L40-L96"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSamplerBase" title="Link to this definition">#</a></dt>
<dd><p>Base class of hard negative sampler.</p>
<p>Hard negative sampler is used to suppress false positive rate in classification tasks.
During training, it select negative samples with high prediction scores.</p>
<p>The training workflow is described as the follows:
1) forward network and get prediction scores (classification prob/logits) for all the samples;
2) use hard negative sampler to choose negative samples with high prediction scores and some positive samples;
3) compute classification loss for the selected samples;
4) do back propagation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pool_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – when we need <code class="docutils literal notranslate"><span class="pre">num_neg</span></code> hard negative samples, they will be randomly selected from
<code class="docutils literal notranslate"><span class="pre">num_neg</span> <span class="pre">*</span> <span class="pre">pool_size</span></code> negative samples with the highest prediction scores.
Larger <code class="docutils literal notranslate"><span class="pre">pool_size</span></code> gives more randomness, yet selects negative samples that are less ‘hard’,
i.e., negative samples with lower prediction scores.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.hard_negative_sampler.HardNegativeSamplerBase.select_negatives">
<span class="sig-name descname"><span class="pre">select_negatives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">negative</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_neg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fg_probs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/hard_negative_sampler.py#L63-L96"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSamplerBase.select_negatives" title="Link to this definition">#</a></dt>
<dd><p>Select hard negative samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>negative</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – indices of all the negative samples, sized (P,),
where P is the number of negative samples</p></li>
<li><p><strong>num_neg</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of negative samples to sample</p></li>
<li><p><strong>fg_probs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – maximum foreground prediction scores (probability) across all the classes
for each sample, sized (A,), where A is the number of samples.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>binary mask of negative samples to choose, sized (A,),</dt><dd><p>where A is the number of samples in one image</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-monai.apps.detection.networks.retinanet_network">
<span id="retinanet-network"></span><h3><cite>RetinaNet Network</cite><a class="headerlink" href="#module-monai.apps.detection.networks.retinanet_network" title="Link to this heading">#</a></h3>
<p>Part of this script is adapted from
<a class="github reference external" href="https://github.com/pytorch/vision/blob/main/torchvision/models/detection/retinanet.py">pytorch/vision</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.RetinaNet">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.networks.retinanet_network.</span></span><span class="sig-name descname"><span class="pre">RetinaNet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_extractor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_divisible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_list_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L209-L352"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.RetinaNet" title="Link to this definition">#</a></dt>
<dd><p>The network used in RetinaNet.</p>
<p>It takes an image tensor as inputs, and outputs either 1) a dictionary <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>.
<code class="docutils literal notranslate"><span class="pre">head_outputs[self.cls_key]</span></code> is the predicted classification maps, a list of Tensor.
<code class="docutils literal notranslate"><span class="pre">head_outputs[self.box_reg_key]</span></code> is the predicted box regression maps, a list of Tensor.
or 2) a list of 2N tensors <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>, with first N tensors being the predicted
classification maps and second N tensors being the predicted box regression maps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the images. We support both 2D and 3D images.</p></li>
<li><p><strong>num_classes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of output classes of the model (excluding the background).</p></li>
<li><p><strong>num_anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of anchors at each location.</p></li>
<li><p><strong>feature_extractor</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code>) – a network that outputs feature maps from the input images,
each feature map corresponds to a different resolution.
Its output can have a format of Tensor, Dict[Any, Tensor], or Sequence[Tensor].
It can be the output of <code class="docutils literal notranslate"><span class="pre">resnet_fpn_feature_extractor(*args,</span> <span class="pre">**kwargs)</span></code>.</p></li>
<li><p><strong>size_divisible</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the spatial size of the network input should be divisible by size_divisible,
decided by the feature_extractor.</p></li>
<li><p><strong>use_list_output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – default False. If False, the network outputs a dictionary <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>,
<code class="docutils literal notranslate"><span class="pre">head_outputs[self.cls_key]</span></code> is the predicted classification maps, a list of Tensor.
<code class="docutils literal notranslate"><span class="pre">head_outputs[self.box_reg_key]</span></code> is the predicted box regression maps, a list of Tensor.
If True, the network outputs a list of 2N tensors <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>, with first N tensors being
the predicted classification maps and second N tensors being the predicted box regression maps.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.networks.nets</span><span class="w"> </span><span class="kn">import</span> <span class="n">resnet</span>
<span class="n">spatial_dims</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># 3D network</span>
<span class="n">conv1_t_stride</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># stride of first convolutional layer in backbone</span>
<span class="n">backbone</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">.</span><span class="n">ResNet</span><span class="p">(</span>
    <span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span><span class="p">,</span>
    <span class="n">block</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">.</span><span class="n">ResNetBottleneck</span><span class="p">,</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="n">block_inplanes</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">.</span><span class="n">get_inplanes</span><span class="p">(),</span>
    <span class="n">n_input_channels</span><span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">conv1_t_stride</span> <span class="o">=</span> <span class="n">conv1_t_stride</span><span class="p">,</span>
    <span class="n">conv1_t_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># This feature_extractor outputs 4-level feature maps.</span>
<span class="c1"># number of output feature maps is len(returned_layers)+1</span>
<span class="n">returned_layers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># returned layer from feature pyramid network</span>
<span class="n">feature_extractor</span> <span class="o">=</span> <span class="n">resnet_fpn_feature_extractor</span><span class="p">(</span>
    <span class="n">backbone</span> <span class="o">=</span> <span class="n">backbone</span><span class="p">,</span>
    <span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span><span class="p">,</span>
    <span class="n">pretrained_backbone</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">trainable_backbone_layers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">returned_layers</span> <span class="o">=</span> <span class="n">returned_layers</span><span class="p">,</span>
<span class="p">)</span>
<span class="c1"># This feature_extractor requires input image spatial size</span>
<span class="c1"># to be divisible by (32, 32, 16).</span>
<span class="n">size_divisible</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">s</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="nb">max</span><span class="p">(</span><span class="n">returned_layers</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">conv1_t_stride</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">RetinaNet</span><span class="p">(</span>
    <span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span><span class="p">,</span>
    <span class="n">num_classes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">num_anchors</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">feature_extractor</span><span class="o">=</span><span class="n">feature_extractor</span><span class="p">,</span>
    <span class="n">size_divisible</span> <span class="o">=</span> <span class="n">size_divisible</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">))</span>
<span class="n">cls_logits_maps</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;classification&quot;</span><span class="p">]</span>  <span class="c1"># a list of len(returned_layers)+1 Tensor</span>
<span class="n">box_regression_maps</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;box_regression&quot;</span><span class="p">]</span>  <span class="c1"># a list of len(returned_layers)+1 Tensor</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.RetinaNet.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L312-L352"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.RetinaNet.forward" title="Link to this definition">#</a></dt>
<dd><p>It takes an image tensor as inputs, and outputs predicted classification maps
and predicted box regression maps in <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – input images, sized (B, img_channels, H, W) or (B, img_channels, H, W, D).</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>1) If self.use_list_output is False, output a dictionary <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code> with
keys including self.cls_key and self.box_reg_key.
<code class="docutils literal notranslate"><span class="pre">head_outputs[self.cls_key]</span></code> is the predicted classification maps, a list of Tensor.
<code class="docutils literal notranslate"><span class="pre">head_outputs[self.box_reg_key]</span></code> is the predicted box regression maps, a list of Tensor.
2) if self.use_list_output is True, outputs a list of 2N tensors <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>, with first N tensors being
the predicted classification maps and second N tensors being the predicted box regression maps.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.RetinaNetClassificationHead">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.networks.retinanet_network.</span></span><span class="sig-name descname"><span class="pre">RetinaNetClassificationHead</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prior_probability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L60-L134"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.RetinaNetClassificationHead" title="Link to this definition">#</a></dt>
<dd><p>A classification head for use in RetinaNet.</p>
<p>This head takes a list of feature maps as inputs, and outputs a list of classification maps.
Each output map has same spatial size with the corresponding input feature map,
and the number of output channel is num_anchors * num_classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_channels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of channels of the input feature</p></li>
<li><p><strong>num_anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of anchors to be predicted</p></li>
<li><p><strong>num_classes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of classes to be predicted</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – spatial dimension of the network, should be 2 or 3.</p></li>
<li><p><strong>prior_probability</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – prior probability to initialize classification convolutional layers.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.RetinaNetClassificationHead.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L101-L134"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.RetinaNetClassificationHead.forward" title="Link to this definition">#</a></dt>
<dd><p>It takes a list of feature maps as inputs, and outputs a list of classification maps.
Each output classification map has same spatial size with the corresponding input feature map,
and the number of output channel is num_anchors * num_classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of feature map, x[i] is a (B, in_channels, H_i, W_i) or (B, in_channels, H_i, W_i, D_i) Tensor.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>cls_logits_maps, list of classification map. cls_logits_maps[i] is a
(B, num_anchors * num_classes, H_i, W_i) or (B, num_anchors * num_classes, H_i, W_i, D_i) Tensor.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.RetinaNetRegressionHead">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.networks.retinanet_network.</span></span><span class="sig-name descname"><span class="pre">RetinaNetRegressionHead</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_channels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L137-L206"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.RetinaNetRegressionHead" title="Link to this definition">#</a></dt>
<dd><p>A regression head for use in RetinaNet.</p>
<p>This head takes a list of feature maps as inputs, and outputs a list of box regression maps.
Each output box regression map has same spatial size with the corresponding input feature map,
and the number of output channel is num_anchors * 2 * spatial_dims.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_channels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of channels of the input feature</p></li>
<li><p><strong>num_anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of anchors to be predicted</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – spatial dimension of the network, should be 2 or 3.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.RetinaNetRegressionHead.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L173-L206"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.RetinaNetRegressionHead.forward" title="Link to this definition">#</a></dt>
<dd><p>It takes a list of feature maps as inputs, and outputs a list of box regression maps.
Each output box regression map has same spatial size with the corresponding input feature map,
and the number of output channel is num_anchors * 2 * spatial_dims.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of feature map, x[i] is a (B, in_channels, H_i, W_i) or (B, in_channels, H_i, W_i, D_i) Tensor.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>box_regression_maps, list of box regression map. cls_logits_maps[i] is a
(B, num_anchors * 2 * spatial_dims, H_i, W_i) or (B, num_anchors * 2 * spatial_dims, H_i, W_i, D_i) Tensor.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_network.resnet_fpn_feature_extractor">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.networks.retinanet_network.</span></span><span class="sig-name descname"><span class="pre">resnet_fpn_feature_extractor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">backbone</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrained_backbone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returned_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainable_backbone_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_network.py#L355-L432"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_network.resnet_fpn_feature_extractor" title="Link to this definition">#</a></dt>
<dd><p>Constructs a feature extractor network with a ResNet-FPN backbone, used as feature_extractor in RetinaNet.</p>
<p>Reference: <a class="reference external" href="https://arxiv.org/abs/1708.02002">“Focal Loss for Dense Object Detection”</a>.</p>
<p>The returned feature_extractor network takes an image tensor as inputs,
and outputs a dictionary that maps string to the extracted feature maps (Tensor).</p>
<p>The input to the returned feature_extractor is expected to be a list of tensors,
each of shape <code class="docutils literal notranslate"><span class="pre">[C,</span> <span class="pre">H,</span> <span class="pre">W]</span></code> or <code class="docutils literal notranslate"><span class="pre">[C,</span> <span class="pre">H,</span> <span class="pre">W,</span> <span class="pre">D]</span></code>,
one for each image. Different images can have different sizes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>backbone</strong> (<a class="reference internal" href="networks.html#monai.networks.nets.ResNet" title="monai.networks.nets.resnet.ResNet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResNet</span></code></a>) – a ResNet model, used as backbone.</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the images. We support both 2D and 3D images.</p></li>
<li><p><strong>pretrained_backbone</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether the backbone has been pre-trained.</p></li>
<li><p><strong>returned_layers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – returned layers to extract feature maps. Each returned layer should be in the range [1,4].
len(returned_layers)+1 will be the number of extracted feature maps.
There is an extra maxpooling layer LastLevelMaxPool() appended.</p></li>
<li><p><strong>trainable_backbone_layers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – number of trainable (not frozen) resnet layers starting from final block.
Valid values are between 0 and 5, with 5 meaning all backbone layers are trainable.
When pretrained_backbone is False, this value is set to be 5.
When pretrained_backbone is True, if <code class="docutils literal notranslate"><span class="pre">None</span></code> is passed (the default) this value is set to 3.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.networks.nets</span><span class="w"> </span><span class="kn">import</span> <span class="n">resnet</span>
<span class="n">spatial_dims</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># 3D network</span>
<span class="n">backbone</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">.</span><span class="n">ResNet</span><span class="p">(</span>
    <span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span><span class="p">,</span>
    <span class="n">block</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">.</span><span class="n">ResNetBottleneck</span><span class="p">,</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="n">block_inplanes</span> <span class="o">=</span> <span class="n">resnet</span><span class="o">.</span><span class="n">get_inplanes</span><span class="p">(),</span>
    <span class="n">n_input_channels</span><span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">conv1_t_stride</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">conv1_t_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># This feature_extractor outputs 4-level feature maps.</span>
<span class="c1"># number of output feature maps is len(returned_layers)+1</span>
<span class="n">feature_extractor</span> <span class="o">=</span> <span class="n">resnet_fpn_feature_extractor</span><span class="p">(</span>
    <span class="n">backbone</span> <span class="o">=</span> <span class="n">backbone</span><span class="p">,</span>
    <span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span><span class="p">,</span>
    <span class="n">pretrained_backbone</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">trainable_backbone_layers</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">returned_layers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">RetinaNet</span><span class="p">(</span>
    <span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span><span class="p">,</span>
    <span class="n">num_classes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">num_anchors</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">feature_extractor</span><span class="o">=</span><span class="n">feature_extractor</span><span class="p">,</span>
    <span class="n">size_divisible</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="networks.html#monai.networks.blocks.BackboneWithFPN" title="monai.networks.blocks.backbone_fpn_utils.BackboneWithFPN"><code class="xref py py-class docutils literal notranslate"><span class="pre">BackboneWithFPN</span></code></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-monai.apps.detection.networks.retinanet_detector">
<span id="retinanet-detector"></span><h3><cite>RetinaNet Detector</cite><a class="headerlink" href="#module-monai.apps.detection.networks.retinanet_detector" title="Link to this heading">#</a></h3>
<p>Part of this script is adapted from
<a class="github reference external" href="https://github.com/pytorch/vision/blob/main/torchvision/models/detection/retinanet.py">pytorch/vision</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.networks.retinanet_detector.</span></span><span class="sig-name descname"><span class="pre">RetinaNetDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">network</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchor_generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_overlap_metric=&lt;function</span> <span class="pre">box_iou&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_classes=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_divisible=1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls_key='classification'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_reg_key='box_regression'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L68-L1012"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector" title="Link to this definition">#</a></dt>
<dd><p>Retinanet detector, expandable to other one stage anchor based box detectors in the future.
An example of construction can found in the source code of
<a class="reference internal" href="#monai.apps.detection.networks.retinanet_detector.retinanet_resnet50_fpn_detector" title="monai.apps.detection.networks.retinanet_detector.retinanet_resnet50_fpn_detector"><code class="xref py py-func docutils literal notranslate"><span class="pre">retinanet_resnet50_fpn_detector()</span></code></a> .</p>
<p>The input to the model is expected to be a list of tensors, each of shape (C, H, W) or  (C, H, W, D),
one for each image, and should be in 0-1 range. Different images can have different sizes.
Or it can also be a Tensor sized (B, C, H, W) or  (B, C, H, W, D). In this case, all images have same size.</p>
<p>The behavior of the model changes depending if it is in training or evaluation mode.</p>
<p>During training, the model expects both the input tensors, as well as a targets (list of dictionary),
containing:</p>
<ul class="simple">
<li><p>boxes (<code class="docutils literal notranslate"><span class="pre">FloatTensor[N,</span> <span class="pre">4]</span></code> or <code class="docutils literal notranslate"><span class="pre">FloatTensor[N,</span> <span class="pre">6]</span></code>): the ground-truth boxes in <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>, i.e.,
<code class="docutils literal notranslate"><span class="pre">[xmin,</span> <span class="pre">ymin,</span> <span class="pre">xmax,</span> <span class="pre">ymax]</span></code> or <code class="docutils literal notranslate"><span class="pre">[xmin,</span> <span class="pre">ymin,</span> <span class="pre">zmin,</span> <span class="pre">xmax,</span> <span class="pre">ymax,</span> <span class="pre">zmax]</span></code> format,
with <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">xmin</span> <span class="pre">&lt;</span> <span class="pre">xmax</span> <span class="pre">&lt;=</span> <span class="pre">H</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">ymin</span> <span class="pre">&lt;</span> <span class="pre">ymax</span> <span class="pre">&lt;=</span> <span class="pre">W</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">zmin</span> <span class="pre">&lt;</span> <span class="pre">zmax</span> <span class="pre">&lt;=</span> <span class="pre">D</span></code>.</p></li>
<li><p>labels: the class label for each ground-truth box</p></li>
</ul>
<p>The model returns a Dict[str, Tensor] during training, containing the classification and regression
losses.
When saving the model, only self.network contains trainable parameters and needs to be saved.</p>
<p>During inference, the model requires only the input tensors, and returns the post-processed
predictions as a List[Dict[Tensor]], one for each input image. The fields of the Dict are as
follows:</p>
<ul class="simple">
<li><p>boxes (<code class="docutils literal notranslate"><span class="pre">FloatTensor[N,</span> <span class="pre">4]</span></code> or <code class="docutils literal notranslate"><span class="pre">FloatTensor[N,</span> <span class="pre">6]</span></code>): the predicted boxes in <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>, i.e.,
<code class="docutils literal notranslate"><span class="pre">[xmin,</span> <span class="pre">ymin,</span> <span class="pre">xmax,</span> <span class="pre">ymax]</span></code> or <code class="docutils literal notranslate"><span class="pre">[xmin,</span> <span class="pre">ymin,</span> <span class="pre">zmin,</span> <span class="pre">xmax,</span> <span class="pre">ymax,</span> <span class="pre">zmax]</span></code> format,
with <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">xmin</span> <span class="pre">&lt;</span> <span class="pre">xmax</span> <span class="pre">&lt;=</span> <span class="pre">H</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">ymin</span> <span class="pre">&lt;</span> <span class="pre">ymax</span> <span class="pre">&lt;=</span> <span class="pre">W</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">zmin</span> <span class="pre">&lt;</span> <span class="pre">zmax</span> <span class="pre">&lt;=</span> <span class="pre">D</span></code>.</p></li>
<li><p>labels (Int64Tensor[N]): the predicted labels for each image</p></li>
<li><p>labels_scores (Tensor[N]): the scores for each prediction</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>network</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code>) – a network that takes an image Tensor sized (B, C, H, W) or (B, C, H, W, D) as input
and outputs a dictionary Dict[str, List[Tensor]] or Dict[str, Tensor].</p></li>
<li><p><strong>anchor_generator</strong> (<a class="reference internal" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator" title="monai.apps.detection.utils.anchor_utils.AnchorGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnchorGenerator</span></code></a>) – anchor generator.</p></li>
<li><p><strong>box_overlap_metric</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>) – func that compute overlap between two sets of boxes, default is Intersection over Union (IoU).</p></li>
<li><p><strong>debug</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to print out internal parameters, used for debugging and parameter tuning.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Input argument <code class="docutils literal notranslate"><span class="pre">network</span></code> can be a monai.apps.detection.networks.retinanet_network.RetinaNet(*) object,
but any network that meets the following rules is a valid input <code class="docutils literal notranslate"><span class="pre">network</span></code>.</p>
<ol class="arabic">
<li><p>It should have attributes including spatial_dims, num_classes, cls_key, box_reg_key, num_anchors, size_divisible.</p>
<blockquote>
<div><ul class="simple">
<li><p>spatial_dims (int) is the spatial dimension of the network, we support both 2D and 3D.</p></li>
<li><p>num_classes (int) is the number of classes, excluding the background.</p></li>
<li><p>size_divisible (int or Sequence[int]) is the expectation on the input image shape.
The network needs the input spatial_size to be divisible by size_divisible, length should be 2 or 3.</p></li>
<li><p>cls_key (str) is the key to represent classification in the output dict.</p></li>
<li><p>box_reg_key (str) is the key to represent box regression in the output dict.</p></li>
<li><p>num_anchors (int) is the number of anchor shapes at each location. it should equal to
<code class="docutils literal notranslate"><span class="pre">self.anchor_generator.num_anchors_per_location()[0]</span></code>.</p></li>
</ul>
<p>If network does not have these attributes, user needs to provide them for the detector.</p>
</div></blockquote>
</li>
<li><p>Its input should be an image Tensor sized (B, C, H, W) or (B, C, H, W, D).</p></li>
<li><p>About its output <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>, it should be either a list of tensors or a dictionary of str: List[Tensor]:</p>
<blockquote>
<div><ul class="simple">
<li><p>If it is a dictionary, it needs to have at least two keys:
<code class="docutils literal notranslate"><span class="pre">network.cls_key</span></code> and <code class="docutils literal notranslate"><span class="pre">network.box_reg_key</span></code>, representing predicted classification maps and box regression maps.
<code class="docutils literal notranslate"><span class="pre">head_outputs[network.cls_key]</span></code> should be List[Tensor] or Tensor. Each Tensor represents
classification logits map at one resolution level,
sized (B, num_classes*num_anchors, H_i, W_i) or (B, num_classes*num_anchors, H_i, W_i, D_i).
<code class="docutils literal notranslate"><span class="pre">head_outputs[network.box_reg_key]</span></code> should be List[Tensor] or Tensor. Each Tensor represents
box regression map at one resolution level,
sized (B, 2*spatial_dims*num_anchors, H_i, W_i)or (B, 2*spatial_dims*num_anchors, H_i, W_i, D_i).
<code class="docutils literal notranslate"><span class="pre">len(head_outputs[network.cls_key])</span> <span class="pre">==</span> <span class="pre">len(head_outputs[network.box_reg_key])</span></code>.</p></li>
<li><p>If it is a list of 2N tensors, the first N tensors should be the predicted classification maps,
and the second N tensors should be the predicted box regression maps.</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># define a naive network</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NaiveNet</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spatial_dims</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spatial_dims</span> <span class="o">=</span> <span class="n">spatial_dims</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_classes</span> <span class="o">=</span> <span class="n">num_classes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size_divisible</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cls_key</span> <span class="o">=</span> <span class="s2">&quot;cls&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box_reg_key</span> <span class="o">=</span> <span class="s2">&quot;box_reg&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_anchors</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
        <span class="n">spatial_size</span> <span class="o">=</span> <span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">spatial_dims</span><span class="p">:]</span>
        <span class="n">out_spatial_size</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">s</span><span class="o">//</span><span class="bp">self</span><span class="o">.</span><span class="n">size_divisible</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spatial_size</span><span class="p">)</span>  <span class="c1"># half size of input</span>
        <span class="n">out_cls_shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">num_classes</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">num_anchors</span><span class="p">)</span> <span class="o">+</span> <span class="n">out_spatial_size</span>
        <span class="n">out_box_reg_shape</span> <span class="o">=</span> <span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">spatial_dims</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">num_anchors</span><span class="p">)</span> <span class="o">+</span> <span class="n">out_spatial_size</span>
        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cls_key</span><span class="p">:</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">out_cls_shape</span><span class="p">)],</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_reg_key</span><span class="p">:</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">out_box_reg_shape</span><span class="p">)]}</span>

<span class="c1"># create a RetinaNetDetector detector</span>
<span class="n">spatial_dims</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">num_classes</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">anchor_generator</span> <span class="o">=</span> <span class="n">monai</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">detection</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">anchor_utils</span><span class="o">.</span><span class="n">AnchorGeneratorWithAnchorShape</span><span class="p">(</span>
    <span class="n">feature_map_scales</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">),</span> <span class="n">base_anchor_shapes</span><span class="o">=</span><span class="p">((</span><span class="mi">8</span><span class="p">,)</span> <span class="o">*</span> <span class="n">spatial_dims</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">NaiveNet</span><span class="p">(</span><span class="n">spatial_dims</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">)</span>
<span class="n">detector</span> <span class="o">=</span> <span class="n">RetinaNetDetector</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">anchor_generator</span><span class="p">)</span>

<span class="c1"># only detector.network may contain trainable parameters.</span>
<span class="n">optimizer</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">optim</span><span class="o">.</span><span class="n">SGD</span><span class="p">(</span>
    <span class="n">detector</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">parameters</span><span class="p">(),</span>
    <span class="mf">1e-3</span><span class="p">,</span>
    <span class="n">momentum</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
    <span class="n">weight_decay</span><span class="o">=</span><span class="mf">3e-5</span><span class="p">,</span>
    <span class="n">nesterov</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">torch</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">detector</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">state_dict</span><span class="p">(),</span> <span class="s1">&#39;model.pt&#39;</span><span class="p">)</span>  <span class="c1"># save model</span>
<span class="n">detector</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;model.pt&#39;</span><span class="p">,</span> <span class="n">weights_only</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># load model</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_anchor_matched_idxs">
<span class="sig-name descname"><span class="pre">compute_anchor_matched_idxs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchor_locs_per_level</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L730-L800"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_anchor_matched_idxs" title="Link to this definition">#</a></dt>
<dd><p>Compute the matched indices between anchors and ground truth (gt) boxes in targets.
output[k][i] represents the matched gt index for anchor[i] in image k.
Suppose there are M gt boxes for image k. The range of it output[k][i] value is [-2, -1, 0, …, M-1].
[0, M - 1] indicates this anchor is matched with a gt box,
while a negative value indicating that it is not matched.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of Tensor. Each Tensor represents anchors for each image,
sized (sum(HWA), 2*spatial_dims) or (sum(HWDA), 2*spatial_dims).
A = self.num_anchors_per_loc.</p></li>
<li><p><strong>targets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – a list of dict. Each dict with two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>num_anchor_locs_per_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – each element represents HW or HWD at this level.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of matched index <cite>matched_idxs_per_image</cite> (Tensor[int64]), Tensor sized (sum(HWA),) or (sum(HWDA),).
Suppose there are M gt boxes. <cite>matched_idxs_per_image[i]</cite> is a matched gt index in [0, M - 1]
or a negative value indicating that anchor i could not be matched.
BELOW_LOW_THRESHOLD = -1, BETWEEN_THRESHOLDS = -2</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_box_loss">
<span class="sig-name descname"><span class="pre">compute_box_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_regression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched_idxs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L832-L877"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_box_loss" title="Link to this definition">#</a></dt>
<dd><p>Compute box regression losses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_regression</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – box regression results, sized (B, sum(HWA), 2*self.spatial_dims)</p></li>
<li><p><strong>targets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – a list of dict. Each dict with two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of Tensor. Each Tensor represents anchors for each image,
sized (sum(HWA), 2*spatial_dims) or (sum(HWDA), 2*spatial_dims).
A = self.num_anchors_per_loc.</p></li>
<li><p><strong>matched_idxs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of matched index. each element is sized (sum(HWA),) or  (sum(HWDA),)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>box regression losses.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_cls_loss">
<span class="sig-name descname"><span class="pre">compute_cls_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls_logits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched_idxs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L802-L830"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_cls_loss" title="Link to this definition">#</a></dt>
<dd><p>Compute classification losses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls_logits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – classification logits, sized (B, sum(HW(D)A), self.num_classes)</p></li>
<li><p><strong>targets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – a list of dict. Each dict with two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>matched_idxs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of matched index. each element is sized (sum(HWA),) or  (sum(HWDA),)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>classification losses.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_loss">
<span class="sig-name descname"><span class="pre">compute_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">head_outputs_reshape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchor_locs_per_level</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L700-L728"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_loss" title="Link to this definition">#</a></dt>
<dd><p>Compute losses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>head_outputs_reshape</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – reshaped head_outputs. <code class="docutils literal notranslate"><span class="pre">head_output_reshape[self.cls_key]</span></code> is a Tensor
sized (B, sum(HW(D)A), self.num_classes). <code class="docutils literal notranslate"><span class="pre">head_output_reshape[self.box_reg_key]</span></code> is a Tensor
sized (B, sum(HW(D)A), 2*self.spatial_dims)</p></li>
<li><p><strong>targets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – a list of dict. Each dict with two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of Tensor. Each Tensor represents anchors for each image,
sized (sum(HWA), 2*spatial_dims) or (sum(HWDA), 2*spatial_dims).
A = self.num_anchors_per_loc.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dict of several kinds of losses.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_inferer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L467-L550"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.forward" title="Link to this definition">#</a></dt>
<dd><p>Returns a dict of losses during training, or a list predicted dict of boxes and labels during inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – The input to the model is expected to be a list of tensors, each of shape (C, H, W) or  (C, H, W, D),
one for each image, and should be in 0-1 range. Different images can have different sizes.
Or it can also be a Tensor sized (B, C, H, W) or  (B, C, H, W, D). In this case, all images have same size.</p></li>
<li><p><strong>targets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a list of dict. Each dict with two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image (optional).</p></li>
<li><p><strong>use_inferer</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to use self.inferer, a sliding window inferer, to do the inference.
If False, will simply forward the network.
If True, will use self.inferer, and requires
<code class="docutils literal notranslate"><span class="pre">self.set_sliding_window_inferer(*args)</span></code> to have been called before.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>If training mode, will return a dict with at least two keys,
including self.cls_key and self.box_reg_key, representing classification loss and box regression loss.</p>
<p>If evaluation mode, will return a list of detection results.
Each element corresponds to an images in <code class="docutils literal notranslate"><span class="pre">input_images</span></code>, is a dict with at least three keys,
including self.target_box_key, self.target_label_key, self.pred_score_key,
representing predicted boxes, classification labels, and classification scores.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.generate_anchors">
<span class="sig-name descname"><span class="pre">generate_anchors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head_outputs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L568-L582"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.generate_anchors" title="Link to this definition">#</a></dt>
<dd><p>Generate anchors and store it in self.anchors: List[Tensor].
We generate anchors only when there is no stored anchors,
or the new coming images has different shape with self.previous_image_shape</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – input images, a (B, C, H, W) or (B, C, H, W, D) Tensor.</p></li>
<li><p><strong>head_outputs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – head_outputs. <code class="docutils literal notranslate"><span class="pre">head_output_reshape[self.cls_key]</span></code> is a Tensor
sized (B, sum(HW(D)A), self.num_classes). <code class="docutils literal notranslate"><span class="pre">head_output_reshape[self.box_reg_key]</span></code> is a Tensor
sized (B, sum(HW(D)A), 2*self.spatial_dims)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.get_box_train_sample_per_image">
<span class="sig-name descname"><span class="pre">get_box_train_sample_per_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_regression_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched_idxs_per_image</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L958-L1012"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.get_box_train_sample_per_image" title="Link to this definition">#</a></dt>
<dd><p>Get samples from one image for box regression losses computation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_regression_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – box regression result for one image, (sum(HWA), 2*self.spatial_dims)</p></li>
<li><p><strong>targets_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a dict with at least two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>anchors_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – anchors of one image,
sized (sum(HWA), 2*spatial_dims) or (sum(HWDA), 2*spatial_dims).
A = self.num_anchors_per_loc.</p></li>
<li><p><strong>matched_idxs_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – matched index, sized (sum(HWA),) or  (sum(HWDA),)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>paired predicted and GT samples from one image for box regression losses computation</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.get_cls_train_sample_per_image">
<span class="sig-name descname"><span class="pre">get_cls_train_sample_per_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls_logits_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matched_idxs_per_image</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L879-L956"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.get_cls_train_sample_per_image" title="Link to this definition">#</a></dt>
<dd><p>Get samples from one image for classification losses computation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls_logits_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – classification logits for one image, (sum(HWA), self.num_classes)</p></li>
<li><p><strong>targets_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a dict with at least two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>matched_idxs_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – matched index, Tensor sized (sum(HWA),) or (sum(HWDA),)
Suppose there are M gt boxes. matched_idxs_per_image[i] is a matched gt index in [0, M - 1]
or a negative value indicating that anchor i could not be matched.
BELOW_LOW_THRESHOLD = -1, BETWEEN_THRESHOLDS = -2</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>paired predicted and GT samples from one image for classification losses computation</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.postprocess_detections">
<span class="sig-name descname"><span class="pre">postprocess_detections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">head_outputs_reshape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_sizes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchor_locs_per_level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">need_sigmoid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L629-L698"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.postprocess_detections" title="Link to this definition">#</a></dt>
<dd><p>Postprocessing to generate detection result from classification logits and box regression.
Use self.box_selector to select the final output boxes for each image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>head_outputs_reshape</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – reshaped head_outputs. <code class="docutils literal notranslate"><span class="pre">head_output_reshape[self.cls_key]</span></code> is a Tensor
sized (B, sum(HW(D)A), self.num_classes). <code class="docutils literal notranslate"><span class="pre">head_output_reshape[self.box_reg_key]</span></code> is a Tensor
sized (B, sum(HW(D)A), 2*self.spatial_dims)</p></li>
<li><p><strong>targets</strong> – a list of dict. Each dict with two keys: self.target_box_key and self.target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of Tensor. Each Tensor represents anchors for each image,
sized (sum(HWA), 2*spatial_dims) or (sum(HWDA), 2*spatial_dims).
A = self.num_anchors_per_loc.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a list of dict, each dict corresponds to detection result on image.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_atss_matcher">
<span class="sig-name descname"><span class="pre">set_atss_matcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_candidates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_in_gt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L352-L363"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_atss_matcher" title="Link to this definition">#</a></dt>
<dd><p>Using for training. Set ATSS matcher that matches anchors with ground truth boxes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_candidates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of positions to select candidates from.
Smaller value will result in a higher matcher threshold and less matched candidates.</p></li>
<li><p><strong>center_in_gt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If False (default), matched anchor center points do not need
to lie within the ground truth box. Recommend False for small objects.
If True, will result in a strict matcher and less matched candidates.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_balanced_sampler">
<span class="sig-name descname"><span class="pre">set_balanced_sampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_fraction</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L390-L401"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_balanced_sampler" title="Link to this definition">#</a></dt>
<dd><p>Using for training. Set torchvision balanced sampler that samples part of the anchors for training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch_size_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of elements to be selected per image</p></li>
<li><p><strong>positive_fraction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of positive elements per batch</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_coder_weights">
<span class="sig-name descname"><span class="pre">set_box_coder_weights</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L266-L276"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_coder_weights" title="Link to this definition">#</a></dt>
<dd><p>Set the weights for box coder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>weights</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – a list/tuple with length of 2*self.spatial_dims</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_regression_loss">
<span class="sig-name descname"><span class="pre">set_box_regression_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_loss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encode_gt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decode_pred</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L304-L329"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_regression_loss" title="Link to this definition">#</a></dt>
<dd><p>Using for training. Set loss for box regression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_loss</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code>) – loss module for box regression</p></li>
<li><p><strong>encode_gt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will encode ground truth boxes to target box regression
before computing the losses. Should be True for L1 loss and False for GIoU loss.</p></li>
<li><p><strong>decode_pred</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will decode predicted box regression into predicted boxes
before computing losses. Should be False for L1 loss and True for GIoU loss.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">detector</span><span class="o">.</span><span class="n">set_box_regression_loss</span><span class="p">(</span>
    <span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">SmoothL1Loss</span><span class="p">(</span><span class="n">beta</span><span class="o">=</span><span class="mf">1.0</span> <span class="o">/</span> <span class="mi">9</span><span class="p">,</span> <span class="n">reduction</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">),</span>
    <span class="n">encode_gt</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">decode_pred</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span>
<span class="n">detector</span><span class="o">.</span><span class="n">set_box_regression_loss</span><span class="p">(</span>
    <span class="n">monai</span><span class="o">.</span><span class="n">losses</span><span class="o">.</span><span class="n">giou_loss</span><span class="o">.</span><span class="n">BoxGIoULoss</span><span class="p">(</span><span class="n">reduction</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">),</span>
    <span class="n">encode_gt</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">decode_pred</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_selector_parameters">
<span class="sig-name descname"><span class="pre">set_box_selector_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">score_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topk_candidates_per_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nms_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detections_per_img</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_sigmoid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L434-L465"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_selector_parameters" title="Link to this definition">#</a></dt>
<dd><p>Using for inference. Set the parameters that are used for box selection during inference.
The box selection is performed with the following steps:</p>
<ol class="arabic simple">
<li><p>For each level, discard boxes with scores less than self.score_thresh.</p></li>
<li><p>For each level, keep boxes with top self.topk_candidates_per_level scores.</p></li>
<li><p>For the whole image, perform non-maximum suppression (NMS) on boxes, with overlapping threshold nms_thresh.</p></li>
<li><p>For the whole image, keep boxes with top self.detections_per_img scores.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>score_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – no box with scores less than score_thresh will be kept</p></li>
<li><p><strong>topk_candidates_per_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – max number of boxes to keep for each level</p></li>
<li><p><strong>nms_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – box overlapping threshold for NMS</p></li>
<li><p><strong>detections_per_img</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – max number of boxes to keep for each image</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_cls_loss">
<span class="sig-name descname"><span class="pre">set_cls_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls_loss</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L289-L302"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_cls_loss" title="Link to this definition">#</a></dt>
<dd><p>Using for training. Set loss for classification that takes logits as inputs, make sure sigmoid/softmax is built in.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cls_loss</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code>) – loss module for classification</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">detector</span><span class="o">.</span><span class="n">set_cls_loss</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">BCEWithLogitsLoss</span><span class="p">(</span><span class="n">reduction</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">))</span>
<span class="n">detector</span><span class="o">.</span><span class="n">set_cls_loss</span><span class="p">(</span><span class="n">FocalLoss</span><span class="p">(</span><span class="n">reduction</span><span class="o">=</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">2.0</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_hard_negative_sampler">
<span class="sig-name descname"><span class="pre">set_hard_negative_sampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">batch_size_per_image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_fraction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_neg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L365-L388"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_hard_negative_sampler" title="Link to this definition">#</a></dt>
<dd><p>Using for training. Set hard negative sampler that samples part of the anchors for training.</p>
<p>HardNegativeSampler is used to suppress false positive rate in classification tasks.
During training, it select negative samples with high prediction scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>batch_size_per_image</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of elements to be selected per image</p></li>
<li><p><strong>positive_fraction</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – percentage of positive elements in the selected samples</p></li>
<li><p><strong>min_neg</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – minimum number of negative samples to select if possible.</p></li>
<li><p><strong>pool_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – when we need <code class="docutils literal notranslate"><span class="pre">num_neg</span></code> hard negative samples, they will be randomly selected from
<code class="docutils literal notranslate"><span class="pre">num_neg</span> <span class="pre">*</span> <span class="pre">pool_size</span></code> negative samples with the highest prediction scores.
Larger <code class="docutils literal notranslate"><span class="pre">pool_size</span></code> gives more randomness, yet selects negative samples that are less ‘hard’,
i.e., negative samples with lower prediction scores.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_regular_matcher">
<span class="sig-name descname"><span class="pre">set_regular_matcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fg_iou_thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_iou_thresh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_low_quality_matches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L331-L350"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_regular_matcher" title="Link to this definition">#</a></dt>
<dd><p>Using for training. Set torchvision matcher that matches anchors with ground truth boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fg_iou_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – foreground IoU threshold for Matcher, considered as matched if IoU &gt; fg_iou_thresh</p></li>
<li><p><strong>bg_iou_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – background IoU threshold for Matcher, considered as not matched if IoU &lt; bg_iou_thresh</p></li>
<li><p><strong>allow_low_quality_matches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, produce additional matches
for predictions that have only low-quality match candidates.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_sliding_window_inferer">
<span class="sig-name descname"><span class="pre">set_sliding_window_inferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sw_batch_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">constant</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.125</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">constant</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sw_device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_roi_weight_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L403-L432"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_sliding_window_inferer" title="Link to this definition">#</a></dt>
<dd><p>Define sliding window inferer and store it to self.inferer.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_target_keys">
<span class="sig-name descname"><span class="pre">set_target_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_key</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L278-L287"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_target_keys" title="Link to this definition">#</a></dt>
<dd><p>Set keys for the training targets and inference outputs.
During training, both box_key and label_key should be keys in the targets
when performing <code class="docutils literal notranslate"><span class="pre">self.forward(input_images,</span> <span class="pre">targets)</span></code>.
During inference, they will be the keys in the output dict of <cite>self.forward(input_images)`</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.networks.retinanet_detector.retinanet_resnet50_fpn_detector">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.networks.retinanet_detector.</span></span><span class="sig-name descname"><span class="pre">retinanet_resnet50_fpn_detector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchor_generator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returned_layers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrained</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/networks/retinanet_detector.py#L1015-L1081"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.networks.retinanet_detector.retinanet_resnet50_fpn_detector" title="Link to this definition">#</a></dt>
<dd><p>Returns a RetinaNet detector using a ResNet-50 as backbone, which can be pretrained
from <cite>Med3D: Transfer Learning for 3D Medical Image Analysis &lt;https://arxiv.org/pdf/1904.00625.pdf&gt;</cite>
_.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_classes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of output classes of the model (excluding the background).</p></li>
<li><p><strong>anchor_generator</strong> (<a class="reference internal" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator" title="monai.apps.detection.utils.anchor_utils.AnchorGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnchorGenerator</span></code></a>) – AnchorGenerator,</p></li>
<li><p><strong>returned_layers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – returned layers to extract feature maps. Each returned layer should be in the range [1,4].
len(returned_layers)+1 will be the number of extracted feature maps.
There is an extra maxpooling layer LastLevelMaxPool() appended.</p></li>
<li><p><strong>pretrained</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, returns a backbone pre-trained on 23 medical datasets</p></li>
<li><p><strong>progress</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, displays a progress bar of the download to stderr</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector" title="monai.apps.detection.networks.retinanet_detector.RetinaNetDetector"><code class="xref py py-class docutils literal notranslate"><span class="pre">RetinaNetDetector</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A RetinaNetDetector object with resnet50 as backbone</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># define a naive network</span>
<span class="n">resnet_param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;pretrained&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;spatial_dims&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;n_input_channels&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;num_classes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;conv1_t_size&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s2">&quot;conv1_t_stride&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">returned_layers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">anchor_generator</span> <span class="o">=</span> <span class="n">monai</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">detection</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">anchor_utils</span><span class="o">.</span><span class="n">AnchorGeneratorWithAnchorShape</span><span class="p">(</span>
    <span class="n">feature_map_scales</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">base_anchor_shapes</span><span class="o">=</span><span class="p">((</span><span class="mi">8</span><span class="p">,)</span> <span class="o">*</span> <span class="n">resnet_param</span><span class="p">[</span><span class="s2">&quot;spatial_dims&quot;</span><span class="p">])</span>
<span class="p">)</span>
<span class="n">detector</span> <span class="o">=</span> <span class="n">retinanet_resnet50_fpn_detector</span><span class="p">(</span>
    <span class="o">**</span><span class="n">resnet_param</span><span class="p">,</span> <span class="n">anchor_generator</span><span class="o">=</span><span class="n">anchor_generator</span><span class="p">,</span> <span class="n">returned_layers</span><span class="o">=</span><span class="n">returned_layers</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-monai.apps.detection.transforms.box_ops">
<span id="transforms"></span><h3><cite>Transforms</cite><a class="headerlink" href="#module-monai.apps.detection.transforms.box_ops" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.apply_affine_to_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">apply_affine_to_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L62-L99"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.apply_affine_to_boxes" title="Link to this definition">#</a></dt>
<dd><p>This function applies affine matrices to the boxes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<em>~NdarrayTensor</em>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be StandardMode</p></li>
<li><p><strong>affine</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – affine matrix to be applied to the box coordinates, sized (spatial_dims+1,spatial_dims+1)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>~NdarrayTensor</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>returned affine transformed boxes, with same data type as <code class="docutils literal notranslate"><span class="pre">boxes</span></code>, does not share memory with <code class="docutils literal notranslate"><span class="pre">boxes</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.convert_box_to_mask">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">convert_box_to_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ellipse_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L195-L272"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.convert_box_to_mask" title="Link to this definition">#</a></dt>
<dd><p>Convert box to int16 mask image, which has the same size with the input image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>labels</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – classification foreground(fg) labels corresponding to <cite>boxes</cite>, dtype should be int, sized (N,).</p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – image spatial size.</p></li>
<li><p><strong>bg_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – background labels for the output mask image, make sure it is smaller than any fg labels.</p></li>
<li><p><strong>ellipse_mask</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – <p>bool.</p>
<ul>
<li><p>If True, it assumes the object shape is close to ellipse or ellipsoid.</p></li>
<li><p>If False, it assumes the object shape is close to rectangle or cube and well occupies the bounding box.</p></li>
<li><p>If the users are going to apply random rotation as data augmentation, we suggest setting ellipse_mask=True
See also Kalra et al. “Towards Rotation Invariance in Object Detection”, ICCV 2021.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><dl class="simple">
<dt>int16 array, sized (num_box, H, W). Each channel represents a box.</dt><dd><p>The foreground region in channel c has intensity of labels[c].
The background intensity is bg_label.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.convert_mask_to_box">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">convert_mask_to_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.int64</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L275-L325"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.convert_mask_to_box" title="Link to this definition">#</a></dt>
<dd><p>Convert int16 mask image to box, which has the same size with the input image</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes_mask</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – int16 array, sized (num_box, H, W). Each channel represents a box.
The foreground region in channel c has intensity of labels[c].
The background intensity is bg_label.</p></li>
<li><p><strong>bg_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – background labels for the boxes_mask</p></li>
<li><p><strong>box_dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>]) – output dtype for boxes</p></li>
<li><p><strong>label_dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>]) – output dtype for labels</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p>classification foreground(fg) labels, dtype should be int, sized (N,).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.flip_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">flip_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flip_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L161-L192"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.flip_boxes" title="Link to this definition">#</a></dt>
<dd><p>Flip boxes when the corresponding image is flipped</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<em>~NdarrayTensor</em>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – image spatial size.</p></li>
<li><p><strong>flip_axes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – spatial axes along which to flip over. Default is None.
The default <cite>axis=None</cite> will flip over all of the axes of the input array.
If axis is negative it counts from the last to the first axis.
If axis is a tuple of ints, flipping is performed on all of the axes
specified in the tuple.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>~NdarrayTensor</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>flipped boxes, with same data type as <code class="docutils literal notranslate"><span class="pre">boxes</span></code>, does not share memory with <code class="docutils literal notranslate"><span class="pre">boxes</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.resize_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">resize_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_spatial_size</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L129-L158"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.resize_boxes" title="Link to this definition">#</a></dt>
<dd><p>Resize boxes when the corresponding image is resized</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – source bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>src_spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – source image spatial size.</p></li>
<li><p><strong>dst_spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – target image spatial size.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>resized boxes, with same data type as <code class="docutils literal notranslate"><span class="pre">boxes</span></code>, does not share memory with <code class="docutils literal notranslate"><span class="pre">boxes</span></code></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">boxes</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">src_spatial_size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">dst_spatial_size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">128</span><span class="p">,</span> <span class="mi">256</span><span class="p">]</span>
<span class="n">resize_boxes</span><span class="p">(</span><span class="n">boxes</span><span class="p">,</span> <span class="n">src_spatial_size</span><span class="p">,</span> <span class="n">dst_spatial_size</span><span class="p">)</span> <span class="c1">#  will return tensor([[1.28, 2.56, 1.28, 2.56]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.rot90_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">rot90_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">1)</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L384-L435"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.rot90_boxes" title="Link to this definition">#</a></dt>
<dd><p>Rotate boxes by 90 degrees in the plane specified by axes.
Rotation direction is from the first towards the second axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<em>~NdarrayTensor</em>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – image spatial size.</p></li>
<li><p><strong>k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of times the array is rotated by 90 degrees.</p></li>
<li><p><strong>axes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – (2,) array_like
The array is rotated in the plane defined by the axes. Axes must be different.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>~NdarrayTensor</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A rotated view of <cite>boxes</cite>.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><code class="docutils literal notranslate"><span class="pre">rot90_boxes(boxes,</span> <span class="pre">spatial_size,</span> <span class="pre">k=1,</span> <span class="pre">axes=(1,0))</span></code>  is the reverse of
<code class="docutils literal notranslate"><span class="pre">rot90_boxes(boxes,</span> <span class="pre">spatial_size,</span> <span class="pre">k=1,</span> <span class="pre">axes=(0,1))</span></code>
<code class="docutils literal notranslate"><span class="pre">rot90_boxes(boxes,</span> <span class="pre">spatial_size,</span> <span class="pre">k=1,</span> <span class="pre">axes=(1,0))</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">rot90_boxes(boxes,</span> <span class="pre">spatial_size,</span> <span class="pre">k=-1,</span> <span class="pre">axes=(0,1))</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.select_labels">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">select_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L328-L354"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.select_labels" title="Link to this definition">#</a></dt>
<dd><p>For element in labels, select indices keep from it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – Sequence of array. Each element represents classification labels or scores
corresponding to <code class="docutils literal notranslate"><span class="pre">boxes</span></code>, sized (N,).</p></li>
<li><p><strong>keep</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – the indices to keep, same length with each element in labels.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>selected labels, does not share memory with original labels.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.swapaxes_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">swapaxes_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis2</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L357-L381"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.swapaxes_boxes" title="Link to this definition">#</a></dt>
<dd><p>Interchange two axes of boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<em>~NdarrayTensor</em>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>axis1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – First axis.</p></li>
<li><p><strong>axis2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Second axis.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>~NdarrayTensor</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>boxes with two axes interchanged.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.box_ops.zoom_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.box_ops.</span></span><span class="sig-name descname"><span class="pre">zoom_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/box_ops.py#L102-L126"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.box_ops.zoom_boxes" title="Link to this definition">#</a></dt>
<dd><p>Zoom boxes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<em>~NdarrayTensor</em>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be StandardMode</p></li>
<li><p><strong>zoom</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – The zoom factor along the spatial axes.
If a float, zoom is the same for each spatial axis.
If a sequence, zoom should contain one value for each spatial axis.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>~NdarrayTensor</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>zoomed boxes, with same data type as <code class="docutils literal notranslate"><span class="pre">boxes</span></code>, does not share memory with <code class="docutils literal notranslate"><span class="pre">boxes</span></code></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">boxes</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">zoom_boxes</span><span class="p">(</span><span class="n">boxes</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">2.2</span><span class="p">])</span> <span class="c1">#  will return tensor([[0.5, 2.2, 0.5, 2.2]])</span>
</pre></div>
</div>
</dd></dl>

<p id="module-monai.apps.detection.transforms.array">A collection of “vanilla” transforms for box operations
<a class="github reference external" href="https://github.com/Project-MONAI/MONAI/wiki/MONAI_Design">Project-MONAI/MONAI</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.AffineBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">AffineBox</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L195-L211"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.AffineBox" title="Link to this definition">#</a></dt>
<dd><p>Applies affine matrix to the boxes</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.BoxToMask">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">BoxToMask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bg_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ellipse_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L400-L434"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.BoxToMask" title="Link to this definition">#</a></dt>
<dd><p>Convert box to int16 mask image, which has the same size with the input image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bg_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – background labels for the output mask image, make sure it is smaller than any foreground(fg) labels.</p></li>
<li><p><strong>ellipse_mask</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – <p>bool.</p>
<ul>
<li><p>If True, it assumes the object shape is close to ellipse or ellipsoid.</p></li>
<li><p>If False, it assumes the object shape is close to rectangle or cube and well occupies the bounding box.</p></li>
<li><p>If the users are going to apply random rotation as data augmentation, we suggest setting ellipse_mask=True
See also Kalra et al. “Towards Rotation Invariance in Object Detection”, ICCV 2021.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.ClipBoxToImage">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">ClipBoxToImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">remove_empty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L351-L397"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.ClipBoxToImage" title="Link to this definition">#</a></dt>
<dd><p>Clip the bounding boxes and the associated labels/scores to make sure they are within the image.
There might be multiple arrays of labels/scores associated with one array of boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>remove_empty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to remove the boxes and corresponding labels that are actually empty</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.ConvertBoxMode">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxMode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L87-L153"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.ConvertBoxMode" title="Link to this definition">#</a></dt>
<dd><p>This transform converts the boxes in src_mode to the dst_mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src_mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>[<a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – source box mode. If it is not given, this func will assume it is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code>.</p></li>
<li><p><strong>dst_mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>[<a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target box mode. If it is not given, this func will assume it is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">StandardMode</span></code> = <a class="reference internal" href="data.html#monai.data.box_utils.CornerCornerModeTypeA" title="monai.data.box_utils.CornerCornerModeTypeA"><code class="xref py py-class docutils literal notranslate"><span class="pre">CornerCornerModeTypeA</span></code></a>,
also represented as “xyxy” for 2D and “xyzxyz” for 3D.</p>
<dl class="simple">
<dt>src_mode and dst_mode can be:</dt><dd><ol class="arabic simple">
<li><dl class="simple">
<dt>str: choose from <a class="reference internal" href="utils.html#monai.utils.enums.BoxModeName" title="monai.utils.enums.BoxModeName"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxModeName</span></code></a>, for example,</dt><dd><ul class="simple">
<li><p>“xyxy”: boxes has format [xmin, ymin, xmax, ymax]</p></li>
<li><p>“xyzxyz”: boxes has format [xmin, ymin, zmin, xmax, ymax, zmax]</p></li>
<li><p>“xxyy”: boxes has format [xmin, xmax, ymin, ymax]</p></li>
<li><p>“xxyyzz”: boxes has format [xmin, xmax, ymin, ymax, zmin, zmax]</p></li>
<li><p>“xyxyzz”: boxes has format [xmin, ymin, xmax, ymax, zmin, zmax]</p></li>
<li><p>“xywh”: boxes has format [xmin, ymin, xsize, ysize]</p></li>
<li><p>“xyzwhd”: boxes has format [xmin, ymin, zmin, xsize, ysize, zsize]</p></li>
<li><p>“ccwh”: boxes has format [xcenter, ycenter, xsize, ysize]</p></li>
<li><p>“cccwhd”: boxes has format [xcenter, ycenter, zcenter, xsize, ysize, zsize]</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>BoxMode class: choose from the subclasses of <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, for example,</dt><dd><ul class="simple">
<li><p>CornerCornerModeTypeA: equivalent to “xyxy” or “xyzxyz”</p></li>
<li><p>CornerCornerModeTypeB: equivalent to “xxyy” or “xxyyzz”</p></li>
<li><p>CornerCornerModeTypeC: equivalent to “xyxy” or “xyxyzz”</p></li>
<li><p>CornerSizeMode: equivalent to “xywh” or “xyzwhd”</p></li>
<li><p>CenterSizeMode: equivalent to “ccwh” or “cccwhd”</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>BoxMode object: choose from the subclasses of <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, for example,</dt><dd><ul class="simple">
<li><p>CornerCornerModeTypeA(): equivalent to “xyxy” or “xyzxyz”</p></li>
<li><p>CornerCornerModeTypeB(): equivalent to “xxyy” or “xxyyzz”</p></li>
<li><p>CornerCornerModeTypeC(): equivalent to “xyxy” or “xyxyzz”</p></li>
<li><p>CornerSizeMode(): equivalent to “xywh” or “xyzwhd”</p></li>
<li><p>CenterSizeMode(): equivalent to “ccwh” or “cccwhd”</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>None: will assume mode is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code></p></li>
</ol>
</dd>
</dl>
</div>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">boxes</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># convert boxes with format [xmin, ymin, xmax, ymax] to [xcenter, ycenter, xsize, ysize].</span>
<span class="n">box_converter</span> <span class="o">=</span> <span class="n">ConvertBoxMode</span><span class="p">(</span><span class="n">src_mode</span><span class="o">=</span><span class="s2">&quot;xyxy&quot;</span><span class="p">,</span> <span class="n">dst_mode</span><span class="o">=</span><span class="s2">&quot;ccwh&quot;</span><span class="p">)</span>
<span class="n">box_converter</span><span class="p">(</span><span class="n">boxes</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.ConvertBoxToStandardMode">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxToStandardMode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L156-L192"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.ConvertBoxToStandardMode" title="Link to this definition">#</a></dt>
<dd><p>Convert given boxes to standard mode.
Standard mode is “xyxy” or “xyzxyz”,
representing box format of [xmin, ymin, xmax, ymax] or [xmin, ymin, zmin, xmax, ymax, zmax].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>[<a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – source box mode. If it is not given, this func will assume it is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code>.
It follows the same format with <code class="docutils literal notranslate"><span class="pre">src_mode</span></code> in <a class="reference internal" href="#monai.apps.detection.transforms.array.ConvertBoxMode" title="monai.apps.detection.transforms.array.ConvertBoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxMode</span></code></a> .</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">boxes</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="c1"># convert boxes with format [xmin, xmax, ymin, ymax, zmin, zmax] to [xmin, ymin, zmin, xmax, ymax, zmax]</span>
<span class="n">box_converter</span> <span class="o">=</span> <span class="n">ConvertBoxToStandardMode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;xxyyzz&quot;</span><span class="p">)</span>
<span class="n">box_converter</span><span class="p">(</span><span class="n">boxes</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.FlipBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">FlipBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spatial_axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L323-L348"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.FlipBox" title="Link to this definition">#</a></dt>
<dd><p>Reverses the box coordinates along the given spatial axis. Preserves shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spatial_axis</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – spatial axes along which to flip over. Default is None.
The default <cite>axis=None</cite> will flip over all of the axes of the input array.
If axis is negative it counts from the last to the first axis.
If axis is a tuple of ints, flipping is performed on all of the axes
specified in the tuple.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.MaskToBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">MaskToBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bg_label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.int64</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L437-L472"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.MaskToBox" title="Link to this definition">#</a></dt>
<dd><p>Convert int16 mask image to box, which has the same size with the input image.
Pairs with <a class="reference internal" href="#monai.apps.detection.transforms.array.BoxToMask" title="monai.apps.detection.transforms.array.BoxToMask"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.BoxToMask</span></code></a>.
Please make sure the same <code class="docutils literal notranslate"><span class="pre">min_fg_label</span></code> is used when using the two transforms in pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bg_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – background labels for the output mask image, make sure it is smaller than any foreground(fg) labels.</p></li>
<li><p><strong>box_dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>]) – output dtype for boxes</p></li>
<li><p><strong>label_dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>]) – output dtype for labels</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.ResizeBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">ResizeBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L268-L320"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.ResizeBox" title="Link to this definition">#</a></dt>
<dd><p>Resize the input boxes when the corresponding image is
resized to given spatial size (with scaling, not cropping/padding).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – expected shape of spatial dimensions after resize operation.
if some components of the <cite>spatial_size</cite> are non-positive values, the transform will use the
corresponding components of img size. For example, <cite>spatial_size=(32, -1)</cite> will be adapted
to <cite>(32, 64)</cite> if the second spatial dimension size of img is <cite>64</cite>.</p></li>
<li><p><strong>size_mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – should be “all” or “longest”, if “all”, will use <cite>spatial_size</cite> for all the spatial dims,
if “longest”, rescale the image so that only the longest side is equal to specified <cite>spatial_size</cite>,
which must be an int number in this case, keeping the aspect ratio of the initial image, refer to:
<a class="reference external" href="https://albumentations.ai/docs/api_reference/augmentations/geometric/resize/">https://albumentations.ai/docs/api_reference/augmentations/geometric/resize/</a>
#albumentations.augmentations.geometric.resize.LongestMaxSize.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other arguments for the <cite>np.pad</cite> or <cite>torch.pad</cite> function.
note that <cite>np.pad</cite> treats channel dimension as the first dimension.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.RotateBox90">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">RotateBox90</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lazy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L546-L565"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.RotateBox90" title="Link to this definition">#</a></dt>
<dd><p>Rotate a boxes by 90 degrees in the plane specified by <cite>axes</cite>.
See box_ops.rot90_boxes for additional details</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of times to rotate by 90 degrees.</p></li>
<li><p><strong>spatial_axes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – 2 int numbers, defines the plane to rotate with 2 spatial axes.
Default: (0, 1), this is the first two axis in spatial dimensions.
If axis is negative it counts from the last to the first axis.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.SpatialCropBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">SpatialCropBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_slices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L475-L543"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.SpatialCropBox" title="Link to this definition">#</a></dt>
<dd><p>General purpose box cropper when the corresponding image is cropped by SpatialCrop(*) with the same ROI.
The difference is that we do not support negative indexing for roi_slices.</p>
<p>If a dimension of the expected ROI size is bigger than the input image size, will not crop that dimension.
So the cropped result may be smaller than the expected ROI, and the cropped results of several images may
not have exactly the same shape.
It can support to crop ND spatial boxes.</p>
<dl class="simple">
<dt>The cropped region can be parameterised in various ways:</dt><dd><ul class="simple">
<li><p>a list of slices for each spatial dimension (do not allow for use of negative indexing)</p></li>
<li><p>a spatial center and size</p></li>
<li><p>the start and end coordinates of the ROI</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roi_center</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – voxel coordinates for center of the crop ROI.</p></li>
<li><p><strong>roi_size</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – size of the crop ROI, if a dimension of ROI size is bigger than image size,
will not crop that dimension of the image.</p></li>
<li><p><strong>roi_start</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – voxel coordinates for start of the crop ROI.</p></li>
<li><p><strong>roi_end</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – voxel coordinates for end of the crop ROI, if a coordinate is out of image,
use the end coordinate of image.</p></li>
<li><p><strong>roi_slices</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – list of slices for each of the spatial dimensions.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.StandardizeEmptyBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">StandardizeEmptyBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L66-L84"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.StandardizeEmptyBox" title="Link to this definition">#</a></dt>
<dd><p>When boxes are empty, this transform standardize it to shape of (0,4) or (0,6).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the bounding boxes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.array.ZoomBox">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.array.</span></span><span class="sig-name descname"><span class="pre">ZoomBox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">zoom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/array.py#L214-L265"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.array.ZoomBox" title="Link to this definition">#</a></dt>
<dd><p>Zooms an ND Box with same padding or slicing setting with Zoom().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>zoom</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – The zoom factor along the spatial axes.
If a float, zoom is the same for each spatial axis.
If a sequence, zoom should contain one value for each spatial axis.</p></li>
<li><p><strong>keep_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Should keep original size (padding/slicing if needed), default is True.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other arguments for the <cite>np.pad</cite> or <cite>torch.pad</cite> function.
note that <cite>np.pad</cite> treats channel dimension as the first dimension.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p id="module-monai.apps.detection.transforms.dictionary">A collection of dictionary-based wrappers around the “vanilla” transforms for box operations
defined in <a class="reference internal" href="#module-monai.apps.detection.transforms.array" title="monai.apps.detection.transforms.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array</span></code></a>.</p>
<p>Class names are ended with ‘d’ to denote dictionary-based transforms.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinateD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">AffineBoxToImageCoordinateD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L257-L346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinateD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated" title="monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated"><code class="xref py py-class docutils literal notranslate"><span class="pre">AffineBoxToImageCoordinated</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinateDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">AffineBoxToImageCoordinateDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L257-L346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinateDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated" title="monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated"><code class="xref py py-class docutils literal notranslate"><span class="pre">AffineBoxToImageCoordinated</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">AffineBoxToImageCoordinated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_meta_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affine_lps_to_ras</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L257-L346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based transform that converts box in world coordinate to image coordinate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The single key that represents the reference image to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>remove_empty</strong> – whether to remove the boxes that are actually empty</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
<li><p><strong>image_meta_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the corresponding metadata dictionary.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, affine, original_shape, etc.
it is a string, map to the <cite>box_ref_image_key</cite>.
if None, will try to construct meta_keys by <cite>box_ref_image_key_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>image_meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if image_meta_keys=None, use <cite>box_ref_image_key_{postfix}</cite> to fetch the metadata according
to the key data, default is <cite>meta_dict</cite>, the metadata is a dictionary object.
For example, to handle key <cite>image</cite>,  read/write affine matrices from the
metadata <cite>image_meta_dict</cite> dictionary’s <cite>affine</cite> field.</p></li>
<li><p><strong>affine_lps_to_ras</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – default <code class="docutils literal notranslate"><span class="pre">False</span></code>. Yet if 1) the image is read by ITKReader,
and 2) the ITKReader has affine_lps_to_ras=True, and 3) the box is in world coordinate,
then set <code class="docutils literal notranslate"><span class="pre">affine_lps_to_ras=True</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L339-L346"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.BoxToMaskD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">BoxToMaskD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L846-L933"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.BoxToMaskD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.BoxToMaskd" title="monai.apps.detection.transforms.dictionary.BoxToMaskd"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxToMaskd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.BoxToMaskDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">BoxToMaskDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L846-L933"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.BoxToMaskDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.BoxToMaskd" title="monai.apps.detection.transforms.dictionary.BoxToMaskd"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxToMaskd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.BoxToMaskd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">BoxToMaskd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_mask_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_fg_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ellipse_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L846-L933"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.BoxToMaskd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.detection.transforms.array.BoxToMask" title="monai.apps.detection.transforms.array.BoxToMask"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.BoxToMask</span></code></a>.
Pairs with <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.MaskToBoxd" title="monai.apps.detection.transforms.dictionary.MaskToBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.dictionary.MaskToBoxd</span></code></a> .
Please make sure the same <code class="docutils literal notranslate"><span class="pre">min_fg_label</span></code> is used when using the two transforms in pairs.
The output <code class="docutils literal notranslate"><span class="pre">d[box_mask_key]</span></code> will have background intensity 0, since the following operations
may pad 0 on the border.</p>
<p>This is the general solution for transforms that need to be applied on images and boxes simultaneously.
It is performed with the following steps.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>use <code class="docutils literal notranslate"><span class="pre">BoxToMaskd</span></code> to covert boxes and labels to box_masks;</p></li>
<li><p>do transforms, e.g., rotation or cropping, on images and box_masks together;</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">MaskToBoxd</span></code> to convert box_masks back to boxes and labels.</p></li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_mask_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to store output box mask results for transformation. Same length with <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>.</p></li>
<li><p><strong>label_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the labels corresponding to the <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>. Same length with <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>min_fg_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – min foreground box label.</p></li>
<li><p><strong>ellipse_mask</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – <p>bool.</p>
<ul>
<li><p>If True, it assumes the object shape is close to ellipse or ellipsoid.</p></li>
<li><p>If False, it assumes the object shape is close to rectangle or cube and well occupies the bounding box.</p></li>
<li><p>If the users are going to apply random rotation as data augmentation, we suggest setting ellipse_mask=True
See also Kalra et al. “Towards Rotation Invariance in Object Detection”, ICCV 2021.</p></li>
</ul>
</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This code snippet creates transforms (random rotation and cropping) on boxes, labels, and image together.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">monai.transforms</span><span class="w"> </span><span class="kn">import</span> <span class="n">Compose</span><span class="p">,</span> <span class="n">RandRotated</span><span class="p">,</span> <span class="n">RandSpatialCropd</span><span class="p">,</span> <span class="n">DeleteItemsd</span>
<span class="n">transforms</span> <span class="o">=</span> <span class="n">Compose</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">BoxToMaskd</span><span class="p">(</span>
            <span class="n">box_keys</span><span class="o">=</span><span class="s2">&quot;boxes&quot;</span><span class="p">,</span> <span class="n">label_keys</span><span class="o">=</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span>
            <span class="n">box_mask_keys</span><span class="o">=</span><span class="s2">&quot;box_mask&quot;</span><span class="p">,</span> <span class="n">box_ref_image_keys</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span>
            <span class="n">min_fg_label</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ellipse_mask</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">RandRotated</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span><span class="s2">&quot;box_mask&quot;</span><span class="p">],</span><span class="n">mode</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span><span class="s2">&quot;nearest&quot;</span><span class="p">],</span>
            <span class="n">prob</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">range_x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="n">range_y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="n">range_z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span>
            <span class="n">keep_size</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">padding_mode</span><span class="o">=</span><span class="s2">&quot;zeros&quot;</span>
        <span class="p">),</span>
        <span class="n">RandSpatialCropd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span><span class="s2">&quot;box_mask&quot;</span><span class="p">],</span><span class="n">roi_size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">random_size</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">MaskToBoxd</span><span class="p">(</span>
            <span class="n">box_mask_keys</span><span class="o">=</span><span class="s2">&quot;box_mask&quot;</span><span class="p">,</span> <span class="n">box_keys</span><span class="o">=</span><span class="s2">&quot;boxes&quot;</span><span class="p">,</span>
            <span class="n">label_keys</span><span class="o">=</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span> <span class="n">min_fg_label</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
        <span class="n">DeleteItemsd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;box_mask&quot;</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ClipBoxToImageD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ClipBoxToImageD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L785-L843"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImageD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImaged" title="monai.apps.detection.transforms.dictionary.ClipBoxToImaged"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClipBoxToImaged</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ClipBoxToImageDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ClipBoxToImageDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L785-L843"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImageDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImaged" title="monai.apps.detection.transforms.dictionary.ClipBoxToImaged"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClipBoxToImaged</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ClipBoxToImaged">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ClipBoxToImaged</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_empty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L785-L843"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImaged" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.detection.transforms.array.ClipBoxToImage" title="monai.apps.detection.transforms.array.ClipBoxToImage"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.ClipBoxToImage</span></code></a>.</p>
<p>Clip the bounding boxes and the associated labels/scores to makes sure they are within the image.
There might be multiple keys of labels/scores associated with one key of boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – The single key to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>label_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the labels corresponding to the <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>. Multiple keys are allowed.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – The single key that represents the reference image
to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">label_keys</span></code> are attached.</p></li>
<li><p><strong>remove_empty</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to remove the boxes that are actually empty</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ClipBoxToImaged</span><span class="p">(</span>
    <span class="n">box_keys</span><span class="o">=</span><span class="s2">&quot;boxes&quot;</span><span class="p">,</span> <span class="n">box_ref_image_keys</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span> <span class="n">label_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span> <span class="s2">&quot;scores&quot;</span><span class="p">],</span> <span class="n">remove_empty</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxModeD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxModeD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L146-L199"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModeD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed" title="monai.apps.detection.transforms.dictionary.ConvertBoxModed"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxModed</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxModeDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxModeDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L146-L199"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModeDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed" title="monai.apps.detection.transforms.dictionary.ConvertBoxModed"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxModed</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxModed">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxModed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L146-L199"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.detection.transforms.array.ConvertBoxMode" title="monai.apps.detection.transforms.array.ConvertBoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.ConvertBoxMode</span></code></a>.</p>
<p>This transform converts the boxes in src_mode to the dst_mode.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;boxes&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">)}</span>
<span class="c1"># convert boxes with format [xmin, ymin, xmax, ymax] to [xcenter, ycenter, xsize, ysize].</span>
<span class="n">box_converter</span> <span class="o">=</span> <span class="n">ConvertBoxModed</span><span class="p">(</span><span class="n">box_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;boxes&quot;</span><span class="p">],</span> <span class="n">src_mode</span><span class="o">=</span><span class="s2">&quot;xyxy&quot;</span><span class="p">,</span> <span class="n">dst_mode</span><span class="o">=</span><span class="s2">&quot;ccwh&quot;</span><span class="p">)</span>
<span class="n">box_converter</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxModed.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L161-L180"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed.__init__" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick data for transformation.</p></li>
<li><p><strong>src_mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>[<a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – source box mode. If it is not given, this func will assume it is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code>.
It follows the same format with <code class="docutils literal notranslate"><span class="pre">src_mode</span></code> in <a class="reference internal" href="#monai.apps.detection.transforms.array.ConvertBoxMode" title="monai.apps.detection.transforms.array.ConvertBoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxMode</span></code></a> .</p></li>
<li><p><strong>dst_mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>[<a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target box mode. If it is not given, this func will assume it is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code>.
It follows the same format with <code class="docutils literal notranslate"><span class="pre">src_mode</span></code> in <a class="reference internal" href="#monai.apps.detection.transforms.array.ConvertBoxMode" title="monai.apps.detection.transforms.array.ConvertBoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxMode</span></code></a> .</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<p>See also <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection,transforms.array.ConvertBoxMode</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxModed.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L189-L199"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModeD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxToStandardModeD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L202-L254"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModeD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed" title="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxToStandardModed</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModeDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxToStandardModeDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L202-L254"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModeDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed" title="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxToStandardModed</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ConvertBoxToStandardModed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L202-L254"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.detection.transforms.array.ConvertBoxToStandardMode" title="monai.apps.detection.transforms.array.ConvertBoxToStandardMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.ConvertBoxToStandardMode</span></code></a>.</p>
<p>Convert given boxes to standard mode.
Standard mode is “xyxy” or “xyzxyz”,
representing box format of [xmin, ymin, xmax, ymax] or [xmin, ymin, zmin, xmax, ymax, zmax].</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;boxes&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">)}</span>
<span class="c1"># convert boxes with format [xmin, xmax, ymin, ymax, zmin, zmax] to [xmin, ymin, zmin, xmax, ymax, zmax]</span>
<span class="n">box_converter</span> <span class="o">=</span> <span class="n">ConvertBoxToStandardModed</span><span class="p">(</span><span class="n">box_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;boxes&quot;</span><span class="p">],</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;xxyyzz&quot;</span><span class="p">)</span>
<span class="n">box_converter</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L219-L235"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed.__init__" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick data for transformation.</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>[<a class="reference internal" href="data.html#monai.data.box_utils.BoxMode" title="monai.data.box_utils.BoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">BoxMode</span></code></a>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – source box mode. If it is not given, this func will assume it is <code class="docutils literal notranslate"><span class="pre">StandardMode()</span></code>.
It follows the same format with <code class="docutils literal notranslate"><span class="pre">src_mode</span></code> in <a class="reference internal" href="#monai.apps.detection.transforms.array.ConvertBoxMode" title="monai.apps.detection.transforms.array.ConvertBoxMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConvertBoxMode</span></code></a> .</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<p>See also <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection,transforms.array.ConvertBoxToStandardMode</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L244-L254"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.FlipBoxD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">FlipBoxD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L643-L702"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.FlipBoxD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.FlipBoxd" title="monai.apps.detection.transforms.dictionary.FlipBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlipBoxd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.FlipBoxDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">FlipBoxDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L643-L702"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.FlipBoxDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.FlipBoxd" title="monai.apps.detection.transforms.dictionary.FlipBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">FlipBoxd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.FlipBoxd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">FlipBoxd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L643-L702"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.FlipBoxd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based transform that flip boxes and images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>spatial_axis</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Spatial axes along which to flip over. Default is None.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.FlipBoxd.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L685-L702"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.FlipBoxd.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.MaskToBoxD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">MaskToBoxD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L936-L1011"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.MaskToBoxD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.MaskToBoxd" title="monai.apps.detection.transforms.dictionary.MaskToBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaskToBoxd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.MaskToBoxDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">MaskToBoxDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L936-L1011"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.MaskToBoxDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.MaskToBoxd" title="monai.apps.detection.transforms.dictionary.MaskToBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaskToBoxd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.MaskToBoxd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">MaskToBoxd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_mask_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_fg_label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.int64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L936-L1011"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.MaskToBoxd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.detection.transforms.array.MaskToBox" title="monai.apps.detection.transforms.array.MaskToBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.MaskToBox</span></code></a>.
Pairs with <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.BoxToMaskd" title="monai.apps.detection.transforms.dictionary.BoxToMaskd"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.dictionary.BoxToMaskd</span></code></a> .
Please make sure the same <code class="docutils literal notranslate"><span class="pre">min_fg_label</span></code> is used when using the two transforms in pairs.</p>
<p>This is the general solution for transforms that need to be applied on images and boxes simultaneously.
It is performed with the following steps.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>use <code class="docutils literal notranslate"><span class="pre">BoxToMaskd</span></code> to covert boxes and labels to box_masks;</p></li>
<li><p>do transforms, e.g., rotation or cropping, on images and box_masks together;</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">MaskToBoxd</span></code> to convert box_masks back to boxes and labels.</p></li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_mask_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to store output box mask results for transformation. Same length with <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>.</p></li>
<li><p><strong>label_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the labels corresponding to the <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>. Same length with <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>.</p></li>
<li><p><strong>min_fg_label</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – min foreground box label.</p></li>
<li><p><strong>box_dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>]) – output dtype for box_keys</p></li>
<li><p><strong>label_dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>]) – output dtype for label_keys</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># This code snippet creates transforms (random rotation and cropping) on boxes, labels, and images together.</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">monai.transforms</span><span class="w"> </span><span class="kn">import</span> <span class="n">Compose</span><span class="p">,</span> <span class="n">RandRotated</span><span class="p">,</span> <span class="n">RandSpatialCropd</span><span class="p">,</span> <span class="n">DeleteItemsd</span>
<span class="n">transforms</span> <span class="o">=</span> <span class="n">Compose</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">BoxToMaskd</span><span class="p">(</span>
            <span class="n">box_keys</span><span class="o">=</span><span class="s2">&quot;boxes&quot;</span><span class="p">,</span> <span class="n">label_keys</span><span class="o">=</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span>
            <span class="n">box_mask_keys</span><span class="o">=</span><span class="s2">&quot;box_mask&quot;</span><span class="p">,</span> <span class="n">box_ref_image_keys</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">,</span>
            <span class="n">min_fg_label</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ellipse_mask</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">RandRotated</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span><span class="s2">&quot;box_mask&quot;</span><span class="p">],</span><span class="n">mode</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span><span class="s2">&quot;nearest&quot;</span><span class="p">],</span>
            <span class="n">prob</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">range_x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="n">range_y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="n">range_z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span>
            <span class="n">keep_size</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">padding_mode</span><span class="o">=</span><span class="s2">&quot;zeros&quot;</span>
        <span class="p">),</span>
        <span class="n">RandSpatialCropd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;image&quot;</span><span class="p">,</span><span class="s2">&quot;box_mask&quot;</span><span class="p">],</span><span class="n">roi_size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">random_size</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
        <span class="n">MaskToBoxd</span><span class="p">(</span>
            <span class="n">box_mask_keys</span><span class="o">=</span><span class="s2">&quot;box_mask&quot;</span><span class="p">,</span> <span class="n">box_keys</span><span class="o">=</span><span class="s2">&quot;boxes&quot;</span><span class="p">,</span>
            <span class="n">label_keys</span><span class="o">=</span><span class="s2">&quot;labels&quot;</span><span class="p">,</span> <span class="n">min_fg_label</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
        <span class="n">DeleteItemsd</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;box_mask&quot;</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabelD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandCropBoxByPosNegLabelD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1014-L1223"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabelD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld" title="monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandCropBoxByPosNegLabeld</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabelDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandCropBoxByPosNegLabelDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1014-L1223"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabelDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld" title="monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandCropBoxByPosNegLabeld</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandCropBoxByPosNegLabeld</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">whole_box</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh_image_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fg_indices_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_indices_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta_key_postfix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'meta_dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_smaller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1014-L1223"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld" title="Link to this definition">#</a></dt>
<dd><p>Crop random fixed sized regions that contains foreground boxes.
Suppose all the expected fields specified by <cite>image_keys</cite> have same shape,
and add <cite>patch_index</cite> to the corresponding meta data.
And will return a list of dictionaries for all the cropped images.
If a dimension of the expected spatial size is bigger than the input image size,
will not crop that dimension. So the cropped result may be smaller than the expected size,
and the cropped results of several images may not have exactly the same shape.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation. They need to have the same spatial size.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The single key to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>label_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the labels corresponding to the <code class="docutils literal notranslate"><span class="pre">box_keys</span></code>. Multiple keys are allowed.</p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the spatial size of the crop region e.g. [224, 224, 128].
if a dimension of ROI size is bigger than image size, will not crop that dimension of the image.
if its components have non-positive values, the corresponding size of <cite>data[label_key]</cite> will be used.
for example: if the spatial size of input data is [40, 40, 40] and <cite>spatial_size=[32, 64, -1]</cite>,
the spatial size of output data will be [32, 40, 40].</p></li>
<li><p><strong>pos</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – used with <cite>neg</cite> together to calculate the ratio <code class="docutils literal notranslate"><span class="pre">pos</span> <span class="pre">/</span> <span class="pre">(pos</span> <span class="pre">+</span> <span class="pre">neg)</span></code> for the probability
to pick a foreground voxel as a center rather than a background voxel.</p></li>
<li><p><strong>neg</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – used with <cite>pos</cite> together to calculate the ratio <code class="docutils literal notranslate"><span class="pre">pos</span> <span class="pre">/</span> <span class="pre">(pos</span> <span class="pre">+</span> <span class="pre">neg)</span></code> for the probability
to pick a foreground voxel as a center rather than a background voxel.</p></li>
<li><p><strong>num_samples</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of samples (crop regions) to take in each list.</p></li>
<li><p><strong>whole_box</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Bool, default True, whether we prefer to contain at least one whole box in the cropped foreground patch.
Even if True, it is still possible to get partial box if there are multiple boxes in the image.</p></li>
<li><p><strong>thresh_image_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if thresh_image_key is not None, use <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">==</span> <span class="pre">0</span> <span class="pre">&amp;</span> <span class="pre">thresh_image</span> <span class="pre">&gt;</span> <span class="pre">image_threshold</span></code> to select
the negative sample(background) center. so the crop center will only exist on valid image area.</p></li>
<li><p><strong>image_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – if enabled thresh_image_key, use <code class="docutils literal notranslate"><span class="pre">thresh_image</span> <span class="pre">&gt;</span> <span class="pre">image_threshold</span></code> to determine
the valid image content area.</p></li>
<li><p><strong>fg_indices_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if provided pre-computed foreground indices of <cite>label</cite>, will ignore above <cite>image_key</cite> and
<cite>image_threshold</cite>, and randomly select crop centers based on them, need to provide <cite>fg_indices_key</cite>
and <cite>bg_indices_key</cite> together, expect to be 1 dim array of spatial indices after flattening.
a typical usage is to call <cite>FgBgToIndicesd</cite> transform first and cache the results.</p></li>
<li><p><strong>bg_indices_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – if provided pre-computed background indices of <cite>label</cite>, will ignore above <cite>image_key</cite> and
<cite>image_threshold</cite>, and randomly select crop centers based on them, need to provide <cite>fg_indices_key</cite>
and <cite>bg_indices_key</cite> together, expect to be 1 dim array of spatial indices after flattening.
a typical usage is to call <cite>FgBgToIndicesd</cite> transform first and cache the results.</p></li>
<li><p><strong>meta_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – explicitly indicate the key of the corresponding metadata dictionary.
used to add <cite>patch_index</cite> to the meta dict.
for example, for data with key <cite>image</cite>, the metadata by default is in <cite>image_meta_dict</cite>.
the metadata is a dictionary object which contains: filename, original_shape, etc.
it can be a sequence of string, map to the <cite>keys</cite>.
if None, will try to construct meta_keys by <cite>key_{meta_key_postfix}</cite>.</p></li>
<li><p><strong>meta_key_postfix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – if meta_keys is None, use <cite>key_{postfix}</cite> to fetch the metadata according
to the key data, default is <cite>meta_dict</cite>, the metadata is a dictionary object.
used to add <cite>patch_index</cite> to the meta dict.</p></li>
<li><p><strong>allow_smaller</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if <cite>False</cite>, an exception will be raised if the image is smaller than
the requested ROI in any dimension. If <cite>True</cite>, any smaller dimensions will be set to
match the cropped size (i.e., no cropping in that dimension).</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fg_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bg_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh_image</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1151-L1182"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandFlipBoxD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandFlipBoxD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L705-L782"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd" title="monai.apps.detection.transforms.dictionary.RandFlipBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandFlipBoxd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandFlipBoxDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandFlipBoxDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L705-L782"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd" title="monai.apps.detection.transforms.dictionary.RandFlipBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandFlipBoxd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandFlipBoxd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandFlipBoxd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L705-L782"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based transform that randomly flip boxes and images with the given probabilities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>prob</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Probability of flipping.</p></li>
<li><p><strong>spatial_axis</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Spatial axes along which to flip over. Default is None.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandFlipBoxd.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L762-L782"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandFlipBoxd.set_random_state">
<span class="sig-name descname"><span class="pre">set_random_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L738-L740"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd.set_random_state" title="Link to this definition">#</a></dt>
<dd><p>Set the random state locally, to control the randomness, the derived
classes should use <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> instead of <cite>np.random</cite> to introduce random
factors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – set the random state with an integer seed.</p></li>
<li><p><strong>state</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">RandomState</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – set the random state with a <cite>np.random.RandomState</cite> object.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – When <code class="docutils literal notranslate"><span class="pre">state</span></code> is not an <code class="docutils literal notranslate"><span class="pre">Optional[np.random.RandomState]</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd" title="monai.apps.detection.transforms.dictionary.RandFlipBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandFlipBoxd</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a Randomizable instance.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandRotateBox90D">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandRotateBox90D</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1294-L1398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90D" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d" title="monai.apps.detection.transforms.dictionary.RandRotateBox90d"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandRotateBox90d</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandRotateBox90Dict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandRotateBox90Dict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1294-L1398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90Dict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d" title="monai.apps.detection.transforms.dictionary.RandRotateBox90d"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandRotateBox90d</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandRotateBox90d">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandRotateBox90d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1294-L1398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d" title="Link to this definition">#</a></dt>
<dd><p>With probability <cite>prob</cite>, input boxes and images are rotated by 90 degrees
in the plane specified by <cite>spatial_axes</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>prob</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – probability of rotating.
(Default 0.1, with 10% probability it returns a rotated array.)</p></li>
<li><p><strong>max_k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of rotations will be sampled from <cite>np.random.randint(max_k) + 1</cite>.
(Default 3)</p></li>
<li><p><strong>spatial_axes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – 2 int numbers, defines the plane to rotate with 2 spatial axes.
Default: (0, 1), this is the first two axis in spatial dimensions.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandRotateBox90d.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1377-L1398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandRotateBox90d.randomize">
<span class="sig-name descname"><span class="pre">randomize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1373-L1375"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d.randomize" title="Link to this definition">#</a></dt>
<dd><p>Within this method, <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> should be used, instead of <cite>np.random</cite>, to introduce random factors.</p>
<p>all <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> calls happen here so that we have a better chance to
identify errors of sync the random state.</p>
<p>This method can generate the random factors based on properties of the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandZoomBoxD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandZoomBoxD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L500-L640"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd" title="monai.apps.detection.transforms.dictionary.RandZoomBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandZoomBoxd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandZoomBoxDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandZoomBoxDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L500-L640"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd" title="monai.apps.detection.transforms.dictionary.RandZoomBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandZoomBoxd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandZoomBoxd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RandZoomBoxd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">edge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align_corners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L500-L640"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based transform that randomly zooms input boxes and images with given probability within given zoom range.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>prob</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Probability of zooming.</p></li>
<li><p><strong>min_zoom</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Min zoom factor. Can be float or sequence same size as image.
If a float, select a random factor from <cite>[min_zoom, max_zoom]</cite> then apply to all spatial dims
to keep the original spatial shape ratio.
If a sequence, min_zoom should contain one value for each spatial axis.
If 2 values provided for 3D data, use the first value for both H &amp; W dims to keep the same zoom ratio.</p></li>
<li><p><strong>max_zoom</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – Max zoom factor. Can be float or sequence same size as image.
If a float, select a random factor from <cite>[min_zoom, max_zoom]</cite> then apply to all spatial dims
to keep the original spatial shape ratio.
If a sequence, max_zoom should contain one value for each spatial axis.
If 2 values provided for 3D data, use the first value for both H &amp; W dims to keep the same zoom ratio.</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – {<code class="docutils literal notranslate"><span class="pre">&quot;nearest&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest-exact&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bilinear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bicubic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;trilinear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;area&quot;</span></code>}
The interpolation mode. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;area&quot;</span></code>.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html</a>
It also can be a sequence of string, each element corresponds to a key in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p></li>
<li><p><strong>padding_mode</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – available modes for numpy array:{<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;edge&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linear_ramp&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;maximum&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;median&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;minimum&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;symmetric&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;wrap&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;empty&quot;</span></code>}
available modes for PyTorch Tensor: {<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;replicate&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;circular&quot;</span></code>}.
One of the listed string values or a user supplied function. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>.
The mode to pad data after zooming.
See also: <a class="reference external" href="https://numpy.org/doc/1.18/reference/generated/numpy.pad.html">https://numpy.org/doc/1.18/reference/generated/numpy.pad.html</a>
<a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html</a></p></li>
<li><p><strong>align_corners</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – This only has an effect when mode is
‘linear’, ‘bilinear’, ‘bicubic’ or ‘trilinear’. Default: None.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html</a>
It also can be a sequence of bool or None, each element corresponds to a key in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p></li>
<li><p><strong>keep_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Should keep original size (pad if needed), default is True.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other args for <cite>np.pad</cite> API, note that <cite>np.pad</cite> treats channel dimension as the first dimension.
more details: <a class="reference external" href="https://numpy.org/doc/1.18/reference/generated/numpy.pad.html">https://numpy.org/doc/1.18/reference/generated/numpy.pad.html</a></p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandZoomBoxd.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L617-L640"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RandZoomBoxd.set_random_state">
<span class="sig-name descname"><span class="pre">set_random_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L569-L572"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd.set_random_state" title="Link to this definition">#</a></dt>
<dd><p>Set the random state locally, to control the randomness, the derived
classes should use <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.R</span></code> instead of <cite>np.random</cite> to introduce random
factors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – set the random state with an integer seed.</p></li>
<li><p><strong>state</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">RandomState</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – set the random state with a <cite>np.random.RandomState</cite> object.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – When <code class="docutils literal notranslate"><span class="pre">state</span></code> is not an <code class="docutils literal notranslate"><span class="pre">Optional[np.random.RandomState]</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd" title="monai.apps.detection.transforms.dictionary.RandZoomBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandZoomBoxd</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a Randomizable instance.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RotateBox90D">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RotateBox90D</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1226-L1291"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RotateBox90D" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RotateBox90d" title="monai.apps.detection.transforms.dictionary.RotateBox90d"><code class="xref py py-class docutils literal notranslate"><span class="pre">RotateBox90d</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RotateBox90Dict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RotateBox90Dict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1226-L1291"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RotateBox90Dict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.RotateBox90d" title="monai.apps.detection.transforms.dictionary.RotateBox90d"><code class="xref py py-class docutils literal notranslate"><span class="pre">RotateBox90d</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RotateBox90d">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">RotateBox90d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1226-L1291"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RotateBox90d" title="Link to this definition">#</a></dt>
<dd><p>Input boxes and images are rotated by 90 degrees
in the plane specified by <code class="docutils literal notranslate"><span class="pre">spatial_axes</span></code> for <code class="docutils literal notranslate"><span class="pre">k</span></code> times</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>k</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of times to rotate by 90 degrees.</p></li>
<li><p><strong>spatial_axes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – 2 int numbers, defines the plane to rotate with 2 spatial axes.
Default (0, 1), this is the first two axis in spatial dimensions.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.RotateBox90d.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L1276-L1291"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.RotateBox90d.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">StandardizeEmptyBoxD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L102-L143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd" title="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">StandardizeEmptyBoxd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">StandardizeEmptyBoxDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L102-L143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd" title="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">StandardizeEmptyBoxd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">StandardizeEmptyBoxd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L102-L143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based wrapper of <a class="reference internal" href="#monai.apps.detection.transforms.array.StandardizeEmptyBox" title="monai.apps.detection.transforms.array.StandardizeEmptyBox"><code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection.transforms.array.StandardizeEmptyBox</span></code></a>.</p>
<p>When boxes are empty, this transform standardize it to shape of (0,4) or (0,6).</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;boxes&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">0</span><span class="p">,),</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)}</span>
<span class="n">box_converter</span> <span class="o">=</span> <span class="n">StandardizeEmptyBoxd</span><span class="p">(</span><span class="n">box_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;boxes&quot;</span><span class="p">],</span> <span class="n">box_ref_image_keys</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>
<span class="n">box_converter</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L116-L132"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd.__init__" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick data for transformation.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The single key that represents the reference image to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
<p>See also <code class="xref py py-class docutils literal notranslate"><span class="pre">monai.apps.detection,transforms.array.ConvertBoxToStandardMode</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L142-L143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ZoomBoxD">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ZoomBoxD</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L397-L497"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ZoomBoxD" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ZoomBoxd" title="monai.apps.detection.transforms.dictionary.ZoomBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZoomBoxd</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ZoomBoxDict">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ZoomBoxDict</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L397-L497"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ZoomBoxDict" title="Link to this definition">#</a></dt>
<dd><p>alias of <a class="reference internal" href="#monai.apps.detection.transforms.dictionary.ZoomBoxd" title="monai.apps.detection.transforms.dictionary.ZoomBoxd"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZoomBoxd</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ZoomBoxd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.transforms.dictionary.</span></span><span class="sig-name descname"><span class="pre">ZoomBoxd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">box_ref_image_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padding_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">edge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align_corners</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L397-L497"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ZoomBoxd" title="Link to this definition">#</a></dt>
<dd><p>Dictionary-based transform that zooms input boxes and images with the given zoom scale.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick image data for transformation.</p></li>
<li><p><strong>box_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys to pick box data for transformation. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>box_ref_image_keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – Keys that represent the reference images to which <code class="docutils literal notranslate"><span class="pre">box_keys</span></code> are attached.</p></li>
<li><p><strong>zoom</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – The zoom factor along the spatial axes.
If a float, zoom is the same for each spatial axis.
If a sequence, zoom should contain one value for each spatial axis.</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – {<code class="docutils literal notranslate"><span class="pre">&quot;nearest&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest-exact&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bilinear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bicubic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;trilinear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;area&quot;</span></code>}
The interpolation mode. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;area&quot;</span></code>.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html</a>
It also can be a sequence of string, each element corresponds to a key in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p></li>
<li><p><strong>padding_mode</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – available modes for numpy array:{<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;edge&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;linear_ramp&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;maximum&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;median&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;minimum&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;symmetric&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;wrap&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;empty&quot;</span></code>}
available modes for PyTorch Tensor: {<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;replicate&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;circular&quot;</span></code>}.
One of the listed string values or a user supplied function. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>.
The mode to pad data after zooming.
See also: <a class="reference external" href="https://numpy.org/doc/1.18/reference/generated/numpy.pad.html">https://numpy.org/doc/1.18/reference/generated/numpy.pad.html</a>
<a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html</a></p></li>
<li><p><strong>align_corners</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – This only has an effect when mode is
‘linear’, ‘bilinear’, ‘bicubic’ or ‘trilinear’. Default: None.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.interpolate.html</a>
It also can be a sequence of bool or None, each element corresponds to a key in <code class="docutils literal notranslate"><span class="pre">keys</span></code>.</p></li>
<li><p><strong>keep_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Should keep original size (pad if needed), default is True.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other arguments for the <cite>np.pad</cite> or <cite>torch.pad</cite> function.
note that <cite>np.pad</cite> treats channel dimension as the first dimension.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.transforms.dictionary.ZoomBoxd.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/transforms/dictionary.py#L478-L497"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.transforms.dictionary.ZoomBoxd.inverse" title="Link to this definition">#</a></dt>
<dd><p>Inverse of <code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> – When the subclass does not override this method.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-monai.apps.detection.utils.anchor_utils">
<span id="anchor"></span><h3><cite>Anchor</cite><a class="headerlink" href="#module-monai.apps.detection.utils.anchor_utils" title="Link to this heading">#</a></h3>
<p>This script is adapted from
<a class="github reference external" href="https://github.com/pytorch/vision/blob/release/0.12/torchvision/models/detection/anchor_utils.py">pytorch/vision</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGenerator">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.anchor_utils.</span></span><span class="sig-name descname"><span class="pre">AnchorGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sizes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">((20,</span> <span class="pre">30,</span> <span class="pre">40),)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aspect_ratios</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(((0.5,</span> <span class="pre">1),</span> <span class="pre">(1,</span> <span class="pre">0.5)),)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indexing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ij'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L52-L321"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator" title="Link to this definition">#</a></dt>
<dd><p>This module is modified from torchvision to support both 2D and 3D images.</p>
<p>Module that generates anchors for a set of feature maps and
image sizes.</p>
<p>The module support computing anchors at multiple sizes and aspect ratios
per feature map.</p>
<p>sizes and aspect_ratios should have the same number of elements, and it should
correspond to the number of feature maps.</p>
<p>sizes[i] and aspect_ratios[i] can have an arbitrary number of elements.
For 2D images, anchor width and height w:h = 1:aspect_ratios[i,j]
For 3D images, anchor width, height, and depth w:h:d = 1:aspect_ratios[i,j,0]:aspect_ratios[i,j,1]</p>
<p>AnchorGenerator will output a set of sizes[i] * aspect_ratios[i] anchors
per spatial location for feature map i.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sizes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – base size of each anchor.
len(sizes) is the number of feature maps, i.e., the number of output levels for
the feature pyramid network (FPN).
Each element of <code class="docutils literal notranslate"><span class="pre">sizes</span></code> is a Sequence which represents several anchor sizes for each feature map.</p></li>
<li><p><strong>aspect_ratios</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>) – the aspect ratios of anchors. <code class="docutils literal notranslate"><span class="pre">len(aspect_ratios)</span> <span class="pre">=</span> <span class="pre">len(sizes)</span></code>.
For 2D images, each element of <code class="docutils literal notranslate"><span class="pre">aspect_ratios[i]</span></code> is a Sequence of float.
For 3D images, each element of <code class="docutils literal notranslate"><span class="pre">aspect_ratios[i]</span></code> is a Sequence of 2 value Sequence.</p></li>
<li><p><strong>indexing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – <p>choose from {<code class="docutils literal notranslate"><span class="pre">'ij'</span></code>, <code class="docutils literal notranslate"><span class="pre">'xy'</span></code>}, optional,
Matrix (<code class="docutils literal notranslate"><span class="pre">'ij'</span></code>, default and recommended) or Cartesian (<code class="docutils literal notranslate"><span class="pre">'xy'</span></code>) indexing of output.</p>
<ul>
<li><p>Matrix (<code class="docutils literal notranslate"><span class="pre">'ij'</span></code>, default and recommended) indexing keeps the original axis not changed.</p></li>
<li><p>To use other monai detection components, please set <code class="docutils literal notranslate"><span class="pre">indexing</span> <span class="pre">=</span> <span class="pre">'ij'</span></code>.</p></li>
<li><p>Cartesian (<code class="docutils literal notranslate"><span class="pre">'xy'</span></code>) indexing swaps axis 0 and 1.</p></li>
<li><p>For 2D cases, monai <code class="docutils literal notranslate"><span class="pre">AnchorGenerator(sizes,</span> <span class="pre">aspect_ratios,</span> <span class="pre">indexing='xy')</span></code> and
<code class="docutils literal notranslate"><span class="pre">torchvision.models.detection.anchor_utils.AnchorGenerator(sizes,</span> <span class="pre">aspect_ratios)</span></code> are equivalent.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Reference:.</dt><dd><p><a class="github reference external" href="https://github.com/pytorch/vision/blob/release/0.12/torchvision/models/detection/anchor_utils.py">pytorch/vision</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2D example inputs for a 2-level feature maps</span>
<span class="n">sizes</span> <span class="o">=</span> <span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">32</span><span class="p">))</span>
<span class="n">base_aspect_ratios</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">2.</span><span class="p">)</span>
<span class="n">aspect_ratios</span> <span class="o">=</span> <span class="p">(</span><span class="n">base_aspect_ratios</span><span class="p">,</span> <span class="n">base_aspect_ratios</span><span class="p">)</span>
<span class="n">anchor_generator</span> <span class="o">=</span> <span class="n">AnchorGenerator</span><span class="p">(</span><span class="n">sizes</span><span class="p">,</span> <span class="n">aspect_ratios</span><span class="p">)</span>

<span class="c1"># 3D example inputs for a 2-level feature maps</span>
<span class="n">sizes</span> <span class="o">=</span> <span class="p">((</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">32</span><span class="p">))</span>
<span class="n">base_aspect_ratios</span> <span class="o">=</span> <span class="p">((</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">))</span>
<span class="n">aspect_ratios</span> <span class="o">=</span> <span class="p">(</span><span class="n">base_aspect_ratios</span><span class="p">,</span> <span class="n">base_aspect_ratios</span><span class="p">)</span>
<span class="n">anchor_generator</span> <span class="o">=</span> <span class="n">AnchorGenerator</span><span class="p">(</span><span class="n">sizes</span><span class="p">,</span> <span class="n">aspect_ratios</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGenerator.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_maps</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L284-L321"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.forward" title="Link to this definition">#</a></dt>
<dd><p>Generate anchor boxes for each image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – sized (B, C, W, H) or (B, C, W, H, D)</p></li>
<li><p><strong>feature_maps</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – for FPN level i, feature_maps[i] is sized (B, C_i, W_i, H_i) or (B, C_i, W_i, H_i, D_i).
This input argument does not have to be the actual feature maps.
Any list variable with the same (C_i, W_i, H_i) or (C_i, W_i, H_i, D_i) as feature maps works.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list with length of B. Each element represents the anchors for this image.
The B elements are identical.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">images</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">))</span>
<span class="n">feature_maps</span> <span class="o">=</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">64</span><span class="p">,</span><span class="mi">32</span><span class="p">)),</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">16</span><span class="p">))]</span>
<span class="n">anchor_generator</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">feature_maps</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGenerator.generate_anchors">
<span class="sig-name descname"><span class="pre">generate_anchors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scales</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aspect_ratios</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L148-L206"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.generate_anchors" title="Link to this definition">#</a></dt>
<dd><p>Compute cell anchor shapes at multiple sizes and aspect ratios for the current feature map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scales</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>) – a sequence which represents several anchor sizes for the current feature map.</p></li>
<li><p><strong>aspect_ratios</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>) – a sequence which represents several aspect_ratios for the current feature map.
For 2D images, it is a Sequence of float aspect_ratios[j],
anchor width and height w:h = 1:aspect_ratios[j].
For 3D images, it is a Sequence of 2 value Sequence aspect_ratios[j,0] and aspect_ratios[j,1],
anchor width, height, and depth w:h:d = 1:aspect_ratios[j,0]:aspect_ratios[j,1]</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>) – target data type of the output Tensor.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the output Tensor data.</p></li>
<li><p><strong>Returns</strong> – For each s in scales, returns [s, s*aspect_ratios[j]] for 2D images,
and [s, s*aspect_ratios[j,0],s*aspect_ratios[j,1]] for 3D images.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGenerator.grid_anchors">
<span class="sig-name descname"><span class="pre">grid_anchors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grid_sizes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strides</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L220-L282"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.grid_anchors" title="Link to this definition">#</a></dt>
<dd><p>Every combination of (a, (g, s), i) in (self.cell_anchors, zip(grid_sizes, strides), 0:spatial_dims)
corresponds to a feature map.
It outputs g[i] anchors that are s[i] distance apart in direction i, with the same dimensions as a.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grid_sizes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – spatial size of the feature maps</p></li>
<li><p><strong>strides</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – strides of the feature maps regarding to the original image</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid_sizes</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">],[</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">]]</span>
<span class="n">strides</span> <span class="o">=</span> <span class="p">[[</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="mi">2</span><span class="p">)],</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="mi">4</span><span class="p">)]]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGenerator.num_anchors_per_location">
<span class="sig-name descname"><span class="pre">num_anchors_per_location</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L214-L218"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.num_anchors_per_location" title="Link to this definition">#</a></dt>
<dd><p>Return number of anchor shapes for each feature map.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGenerator.set_cell_anchors">
<span class="sig-name descname"><span class="pre">set_cell_anchors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L208-L212"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.set_cell_anchors" title="Link to this definition">#</a></dt>
<dd><p>Convert each element in self.cell_anchors to <code class="docutils literal notranslate"><span class="pre">dtype</span></code> and send to <code class="docutils literal notranslate"><span class="pre">device</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGeneratorWithAnchorShape">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.anchor_utils.</span></span><span class="sig-name descname"><span class="pre">AnchorGeneratorWithAnchorShape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_map_scales</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">4,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_anchor_shapes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">((32,</span> <span class="pre">32,</span> <span class="pre">32),</span> <span class="pre">(48,</span> <span class="pre">20,</span> <span class="pre">20),</span> <span class="pre">(20,</span> <span class="pre">48,</span> <span class="pre">20),</span> <span class="pre">(20,</span> <span class="pre">20,</span> <span class="pre">48))</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indexing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ij'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L324-L410"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGeneratorWithAnchorShape" title="Link to this definition">#</a></dt>
<dd><p>Module that generates anchors for a set of feature maps and
image sizes, inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">AnchorGenerator</span></code></p>
<p>The module support computing anchors at multiple base anchor shapes
per feature map.</p>
<p><code class="docutils literal notranslate"><span class="pre">feature_map_scales</span></code> should have the same number of elements with the number of feature maps.</p>
<p>base_anchor_shapes can have an arbitrary number of elements.
For 2D images, each element represents anchor width and height [w,h].
For 2D images, each element represents anchor width, height, and depth [w,h,d].</p>
<p>AnchorGenerator will output a set of <code class="docutils literal notranslate"><span class="pre">len(base_anchor_shapes)</span></code> anchors
per spatial location for feature map <code class="docutils literal notranslate"><span class="pre">i</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature_map_scales</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]) – scale of anchors for each feature map, i.e., each output level of
the feature pyramid network (FPN). <code class="docutils literal notranslate"><span class="pre">len(feature_map_scales)</span></code> is the number of feature maps.
<code class="docutils literal notranslate"><span class="pre">scale[i]*base_anchor_shapes</span></code> represents the anchor shapes for feature map <code class="docutils literal notranslate"><span class="pre">i</span></code>.</p></li>
<li><p><strong>base_anchor_shapes</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]]) – a sequence which represents several anchor shapes for one feature map.
For N-D images, it is a Sequence of N value Sequence.</p></li>
<li><p><strong>indexing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – choose from {‘xy’, ‘ij’}, optional
Cartesian (‘xy’) or matrix (‘ij’, default) indexing of output.
Cartesian (‘xy’) indexing swaps axis 0 and 1, which is the setting inside torchvision.
matrix (‘ij’, default) indexing keeps the original axis not changed.
See also indexing in <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.meshgrid.html">https://pytorch.org/docs/stable/generated/torch.meshgrid.html</a></p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2D example inputs for a 2-level feature maps</span>
<span class="n">feature_map_scales</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">base_anchor_shapes</span> <span class="o">=</span> <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">anchor_generator</span> <span class="o">=</span> <span class="n">AnchorGeneratorWithAnchorShape</span><span class="p">(</span><span class="n">feature_map_scales</span><span class="p">,</span> <span class="n">base_anchor_shapes</span><span class="p">)</span>

<span class="c1"># 3D example inputs for a 2-level feature maps</span>
<span class="n">feature_map_scales</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">base_anchor_shapes</span> <span class="o">=</span> <span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">anchor_generator</span> <span class="o">=</span> <span class="n">AnchorGeneratorWithAnchorShape</span><span class="p">(</span><span class="n">feature_map_scales</span><span class="p">,</span> <span class="n">base_anchor_shapes</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.anchor_utils.AnchorGeneratorWithAnchorShape.generate_anchors_using_shape">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_anchors_using_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">anchor_shapes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">torch.float32</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/anchor_utils.py#L391-L410"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.anchor_utils.AnchorGeneratorWithAnchorShape.generate_anchors_using_shape" title="Link to this definition">#</a></dt>
<dd><p>Compute cell anchor shapes at multiple sizes and aspect ratios for the current feature map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>anchor_shapes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – [w, h] or [w, h, d], sized (N, spatial_dims),
represents N anchor shapes for the current feature map.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>) – target data type of the output Tensor.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the output Tensor data.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>For 2D images, returns [-w/2, -h/2, w/2, h/2];
For 3D images, returns [-w/2, -h/2, -d/2, w/2, h/2, d/2]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-monai.apps.detection.utils.ATSS_matcher">
<span id="matcher"></span><h3><cite>Matcher</cite><a class="headerlink" href="#module-monai.apps.detection.utils.ATSS_matcher" title="Link to this heading">#</a></h3>
<p>The functions in this script are adapted from nnDetection,
<a class="github reference external" href="https://github.com/MIC-DKFZ/nnDetection/blob/main/nndet/core/boxes/matcher.py">MIC-DKFZ/nnDetection</a>
which is adapted from torchvision.</p>
<p>These are the changes compared with nndetection:
1) comments and docstrings;
2) reformat;
3) add a debug option to ATSSMatcher to help the users to tune parameters;
4) add a corner case return in ATSSMatcher.compute_matches;
5) add support for float16 cpu</p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.ATSS_matcher.ATSSMatcher">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.ATSS_matcher.</span></span><span class="sig-name descname"><span class="pre">ATSSMatcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_candidates=4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">similarity_fn=&lt;function</span> <span class="pre">box_iou&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_in_gt=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/ATSS_matcher.py#L166-L288"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.ATSS_matcher.ATSSMatcher" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.ATSS_matcher.ATSSMatcher.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_candidates=4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">similarity_fn=&lt;function</span> <span class="pre">box_iou&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_in_gt=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/ATSS_matcher.py#L168-L197"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.ATSS_matcher.ATSSMatcher.__init__" title="Link to this definition">#</a></dt>
<dd><p>Compute matching based on ATSS <a class="reference external" href="https://arxiv.org/abs/1912.02424">https://arxiv.org/abs/1912.02424</a>
<cite>Bridging the Gap Between Anchor-based and Anchor-free Detection
via Adaptive Training Sample Selection</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_candidates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of positions to select candidates from.
Smaller value will result in a higher matcher threshold and less matched candidates.</p></li>
<li><p><strong>similarity_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – function for similarity computation between boxes and anchors</p></li>
<li><p><strong>center_in_gt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If False (default), matched anchor center points do not need
to lie withing the ground truth box. Recommend False for small objects.
If True, will result in a strict matcher and less matched candidates.</p></li>
<li><p><strong>debug</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will print the matcher threshold in order to
tune <code class="docutils literal notranslate"><span class="pre">num_candidates</span></code> and <code class="docutils literal notranslate"><span class="pre">center_in_gt</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.ATSS_matcher.ATSSMatcher.compute_matches">
<span class="sig-name descname"><span class="pre">compute_matches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors_per_level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors_per_loc</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/ATSS_matcher.py#L199-L288"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.ATSS_matcher.ATSSMatcher.compute_matches" title="Link to this definition">#</a></dt>
<dd><p>Compute matches according to ATTS for a single image
Adapted from
(<a class="github reference external" href="https://github.com/sfzhang15/ATSS/blob/79dfb28bd1/atss_core/modeling/rpn/atss/loss.py#L180-L184">sfzhang15/ATSS</a>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – anchors to match Mx4 or Mx6, also assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>num_anchors_per_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – number of anchors per feature pyramid level</p></li>
<li><p><strong>num_anchors_per_loc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of anchors per position</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>matrix which contains the similarity from each boxes to each anchor [N, M]</p></li>
<li><p>vector which contains the matched box index for all
anchors (if background <cite>BELOW_LOW_THRESHOLD</cite> is used
and if it should be ignored <cite>BETWEEN_THRESHOLDS</cite> is used) [M]</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">StandardMode</span></code> = <a class="reference internal" href="data.html#monai.data.box_utils.CornerCornerModeTypeA" title="monai.data.box_utils.CornerCornerModeTypeA"><code class="xref py py-class docutils literal notranslate"><span class="pre">CornerCornerModeTypeA</span></code></a>,
also represented as “xyxy” ([xmin, ymin, xmax, ymax]) for 2D
and “xyzxyz” ([xmin, ymin, zmin, xmax, ymax, zmax]) for 3D.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.ATSS_matcher.Matcher">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.ATSS_matcher.</span></span><span class="sig-name descname"><span class="pre">Matcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">similarity_fn=&lt;function</span> <span class="pre">box_iou&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/ATSS_matcher.py#L92-L163"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.ATSS_matcher.Matcher" title="Link to this definition">#</a></dt>
<dd><p>Base class of Matcher, which matches boxes and anchors to each other</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>similarity_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – function for similarity computation between
boxes and anchors</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.ATSS_matcher.Matcher.compute_matches">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_matches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anchors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors_per_level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_anchors_per_loc</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/ATSS_matcher.py#L144-L163"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.ATSS_matcher.Matcher.compute_matches" title="Link to this definition">#</a></dt>
<dd><p>Compute matches</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – bounding boxes, Nx4 or Nx6 torch tensor or ndarray. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>anchors</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – anchors to match Mx4 or Mx6, also assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code>.</p></li>
<li><p><strong>num_anchors_per_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – number of anchors per feature pyramid level</p></li>
<li><p><strong>num_anchors_per_loc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of anchors per position</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>matrix which contains the similarity from each boxes to each anchor [N, M]</p></li>
<li><p>vector which contains the matched box index for all
anchors (if background <cite>BELOW_LOW_THRESHOLD</cite> is used
and if it should be ignored <cite>BETWEEN_THRESHOLDS</cite> is used) [M]</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-monai.apps.detection.utils.box_coder">
<span id="box-coder"></span><h3><cite>Box coder</cite><a class="headerlink" href="#module-monai.apps.detection.utils.box_coder" title="Link to this heading">#</a></h3>
<p>This script is modified from torchvision to support N-D images,</p>
<p><a class="github reference external" href="https://github.com/pytorch/vision/blob/main/torchvision/models/detection/_utils.py">pytorch/vision</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_coder.BoxCoder">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.box_coder.</span></span><span class="sig-name descname"><span class="pre">BoxCoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boxes_xform_clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_coder.py#L105-L243"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_coder.BoxCoder" title="Link to this definition">#</a></dt>
<dd><p>This class encodes and decodes a set of bounding boxes into
the representation used for training the regressors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – 4-element tuple or 6-element tuple</p></li>
<li><p><strong>boxes_xform_clip</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – high threshold to prevent sending too large values into torch.exp()</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">box_coder</span> <span class="o">=</span> <span class="n">BoxCoder</span><span class="p">(</span><span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>
<span class="n">gt_boxes</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]])</span>
<span class="n">proposals</span> <span class="o">=</span> <span class="n">gt_boxes</span> <span class="o">+</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">gt_boxes</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">rel_gt_boxes</span> <span class="o">=</span> <span class="n">box_coder</span><span class="o">.</span><span class="n">encode_single</span><span class="p">(</span><span class="n">gt_boxes</span><span class="p">,</span> <span class="n">proposals</span><span class="p">)</span>
<span class="n">gt_back</span> <span class="o">=</span> <span class="n">box_coder</span><span class="o">.</span><span class="n">decode_single</span><span class="p">(</span><span class="n">rel_gt_boxes</span><span class="p">,</span> <span class="n">proposals</span><span class="p">)</span>
<span class="c1"># We expect gt_back to be equal to gt_boxes</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_coder.BoxCoder.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel_codes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_boxes</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_coder.py#L171-L196"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_coder.BoxCoder.decode" title="Link to this definition">#</a></dt>
<dd><p>From a set of original reference_boxes and encoded relative box offsets,</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rel_codes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – encoded boxes, Nx4 or Nx6 torch tensor.</p></li>
<li><p><strong>reference_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – a list of reference boxes, each element is Mx4 or Mx6 torch tensor.
The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>decoded boxes, Nx1x4 or Nx1x6 torch tensor. The box mode will be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_coder.BoxCoder.decode_single">
<span class="sig-name descname"><span class="pre">decode_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rel_codes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_boxes</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_coder.py#L198-L243"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_coder.BoxCoder.decode_single" title="Link to this definition">#</a></dt>
<dd><p>From a set of original boxes and encoded relative box offsets,</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rel_codes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – encoded boxes, Nx(4*num_box_reg) or Nx(6*num_box_reg) torch tensor.</p></li>
<li><p><strong>reference_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – reference boxes, Nx4 or Nx6 torch tensor. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>decoded boxes, Nx(4*num_box_reg) or Nx(6*num_box_reg) torch tensor. The box mode will to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_coder.BoxCoder.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gt_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proposals</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_coder.py#L132-L152"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_coder.BoxCoder.encode" title="Link to this definition">#</a></dt>
<dd><p>Encode a set of proposals with respect to some ground truth (gt) boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gt_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of gt boxes, Nx4 or Nx6 torch tensor. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>proposals</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of boxes to be encoded, each element is Mx4 or Mx6 torch tensor.
The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A tuple of encoded gt, target of box regression that is used to</dt><dd><p>convert proposals into gt_boxes, Nx4 or Nx6 torch tensor.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_coder.BoxCoder.encode_single">
<span class="sig-name descname"><span class="pre">encode_single</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gt_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proposals</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_coder.py#L154-L169"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_coder.BoxCoder.encode_single" title="Link to this definition">#</a></dt>
<dd><p>Encode proposals with respect to ground truth (gt) boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gt_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – gt boxes, Nx4 or Nx6 torch tensor. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>proposals</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – boxes to be encoded, Nx4 or Nx6 torch tensor. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>encoded gt, target of box regression that is used to convert proposals into gt_boxes, Nx4 or Nx6 torch tensor.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_coder.encode_boxes">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.box_coder.</span></span><span class="sig-name descname"><span class="pre">encode_boxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gt_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proposals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_coder.py#L64-L102"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_coder.encode_boxes" title="Link to this definition">#</a></dt>
<dd><p>Encode a set of proposals with respect to some reference ground truth (gt) boxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gt_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – gt boxes, Nx4 or Nx6 torch tensor. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>proposals</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – boxes to be encoded, Nx4 or Nx6 torch tensor. The box mode is assumed to be <code class="docutils literal notranslate"><span class="pre">StandardMode</span></code></p></li>
<li><p><strong>weights</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – the weights for <code class="docutils literal notranslate"><span class="pre">(cx,</span> <span class="pre">cy,</span> <span class="pre">w,</span> <span class="pre">h)</span> <span class="pre">or</span> <span class="pre">(cx,cy,cz,</span> <span class="pre">w,h,d)</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>encoded gt, target of box regression that is used to convert proposals into gt_boxes, Nx4 or Nx6 torch tensor.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-monai.apps.detection.utils.detector_utils">
<span id="detection-utilities"></span><h3><cite>Detection Utilities</cite><a class="headerlink" href="#module-monai.apps.detection.utils.detector_utils" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.detector_utils.check_input_images">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.detector_utils.</span></span><span class="sig-name descname"><span class="pre">check_input_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/detector_utils.py#L28-L52"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.detector_utils.check_input_images" title="Link to this definition">#</a></dt>
<dd><p>Validate the input dimensionality (raise a <cite>ValueError</cite> if invalid).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – It can be 1) a tensor sized (B, C, H, W) or  (B, C, H, W, D),
or 2) a list of image tensors, each image i may have different size (C, H_i, W_i) or  (C, H_i, W_i, D_i).</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the images, 2 or 3.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.detector_utils.check_training_targets">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.detector_utils.</span></span><span class="sig-name descname"><span class="pre">check_training_targets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_label_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_box_key</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/detector_utils.py#L55-L108"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.detector_utils.check_training_targets" title="Link to this definition">#</a></dt>
<dd><p>Validate the input images/targets during training (raise a <cite>ValueError</cite> if invalid).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – It can be 1) a tensor sized (B, C, H, W) or  (B, C, H, W, D),
or 2) a list of image tensors, each image i may have different size (C, H_i, W_i) or  (C, H_i, W_i, D_i).</p></li>
<li><p><strong>targets</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a list of dict. Each dict with two keys: target_box_key and target_label_key,
ground-truth boxes present in the image.</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the images, 2 or 3.</p></li>
<li><p><strong>target_label_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the expected key of target labels.</p></li>
<li><p><strong>target_box_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the expected key of target boxes.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.detector_utils.pad_images">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.detector_utils.</span></span><span class="sig-name descname"><span class="pre">pad_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_divisible</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">constant</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/detector_utils.py#L111-L176"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.detector_utils.pad_images" title="Link to this definition">#</a></dt>
<dd><p>Pad the input images, so that the output spatial sizes are divisible by <cite>size_divisible</cite>.
It pads them at the end to create a (B, C, H, W) or (B, C, H, W, D) Tensor.
Padded size (H, W) or (H, W, D) is divisible by size_divisible.
Default padding uses constant padding with value 0.0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – It can be 1) a tensor sized (B, C, H, W) or  (B, C, H, W, D),
or 2) a list of image tensors, each image i may have different size (C, H_i, W_i) or  (C, H_i, W_i, D_i).</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the images, 2D or 3D.</p></li>
<li><p><strong>size_divisible</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – int or Sequence[int], is the expected pattern on the input image shape.
If an int, the same <cite>size_divisible</cite> will be applied to all the input spatial dimensions.</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="utils.html#monai.utils.enums.PytorchPadMode" title="monai.utils.enums.PytorchPadMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytorchPadMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – available modes for PyTorch Tensor: {<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;replicate&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;circular&quot;</span></code>}.
One of the listed string values or a user supplied function. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html</a></p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other arguments for <cite>torch.pad</cite> function.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>images, a (B, C, H, W) or (B, C, H, W, D) Tensor</p></li>
<li><p>image_sizes, the original spatial size of each image</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.detector_utils.preprocess_images">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.detector_utils.</span></span><span class="sig-name descname"><span class="pre">preprocess_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dims</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_divisible</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">constant</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/detector_utils.py#L179-L213"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.detector_utils.preprocess_images" title="Link to this definition">#</a></dt>
<dd><p>Preprocess the input images, including</p>
<ul class="simple">
<li><p>validate of the inputs</p></li>
<li><p>pad the inputs so that the output spatial sizes are divisible by <cite>size_divisible</cite>.
It pads them at the end to create a (B, C, H, W) or (B, C, H, W, D) Tensor.
Padded size (H, W) or (H, W, D) is divisible by size_divisible.
Default padding uses constant padding with value 0.0</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – It can be 1) a tensor sized (B, C, H, W) or  (B, C, H, W, D),
or 2) a list of image tensors, each image i may have different size (C, H_i, W_i) or  (C, H_i, W_i, D_i).</p></li>
<li><p><strong>spatial_dims</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of spatial dimensions of the images, 2 or 3.</p></li>
<li><p><strong>size_divisible</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – int or Sequence[int], is the expected pattern on the input image shape.
If an int, the same <cite>size_divisible</cite> will be applied to all the input spatial dimensions.</p></li>
<li><p><strong>mode</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="utils.html#monai.utils.enums.PytorchPadMode" title="monai.utils.enums.PytorchPadMode"><code class="xref py py-class docutils literal notranslate"><span class="pre">PytorchPadMode</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – available modes for PyTorch Tensor: {<code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;reflect&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;replicate&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;circular&quot;</span></code>}.
One of the listed string values or a user supplied function. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;constant&quot;</span></code>.
See also: <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html">https://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html</a></p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other arguments for <cite>torch.pad</cite> function.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>images, a (B, C, H, W) or (B, C, H, W, D) Tensor</p></li>
<li><p>image_sizes, the original spatial size of each image</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function" id="module-monai.apps.detection.utils.predict_utils">
<dt class="sig sig-object py" id="monai.apps.detection.utils.predict_utils.check_dict_values_same_length">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.predict_utils.</span></span><span class="sig-name descname"><span class="pre">check_dict_values_same_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">head_outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/predict_utils.py#L44-L60"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.predict_utils.check_dict_values_same_length" title="Link to this definition">#</a></dt>
<dd><p>We expect the values in <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code>: Dict[str, List[Tensor]] to have the same length.
Will raise ValueError if not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>head_outputs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – a Dict[str, List[Tensor]] or Dict[str, Tensor]</p></li>
<li><p><strong>keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the keys in head_output that need to have values (List) with same length.
If not provided, will use head_outputs.keys().</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.predict_utils.ensure_dict_value_to_list_">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.predict_utils.</span></span><span class="sig-name descname"><span class="pre">ensure_dict_value_to_list_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">head_outputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/predict_utils.py#L20-L41"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.predict_utils.ensure_dict_value_to_list_" title="Link to this definition">#</a></dt>
<dd><p>An in-place function. We expect <code class="docutils literal notranslate"><span class="pre">head_outputs</span></code> to be Dict[str, List[Tensor]].
Yet if it is Dict[str, Tensor], this func converts it to Dict[str, List[Tensor]].
It will be modified in-place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>head_outputs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]) – a Dict[str, List[Tensor]] or Dict[str, Tensor], will be modifier in-place</p></li>
<li><p><strong>keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the keys in head_output that need to have value type List[Tensor]. If not provided, will use head_outputs.keys().</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.utils.predict_utils.predict_with_inferer">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.predict_utils.</span></span><span class="sig-name descname"><span class="pre">predict_with_inferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">network</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inferer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/predict_utils.py#L92-L141"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.predict_utils.predict_with_inferer" title="Link to this definition">#</a></dt>
<dd><p>Predict network dict output with an inferer. Compared with directly output network(images),
it enables a sliding window inferer that can be used to handle large inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – input of the network, Tensor sized (B, C, H, W) or  (B, C, H, W, D)</p></li>
<li><p><strong>network</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code>) – a network that takes an image Tensor sized (B, C, H, W) or (B, C, H, W, D) as input
and outputs a dictionary Dict[str, List[Tensor]] or Dict[str, Tensor].</p></li>
<li><p><strong>keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – the keys in the output dict, should be network output keys or a subset of them.</p></li>
<li><p><strong>inferer</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="inferers.html#monai.inferers.SlidingWindowInferer" title="monai.inferers.inferer.SlidingWindowInferer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SlidingWindowInferer</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a SlidingWindowInferer to handle large inputs.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The predicted head_output from network, a Dict[str, List[Tensor]]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># define a naive network</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">monai</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NaiveNet</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;cls&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="s2">&quot;box_reg&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">)]}</span>

<span class="c1"># create a predictor</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">NaiveNet</span><span class="p">()</span>
<span class="n">inferer</span> <span class="o">=</span> <span class="n">monai</span><span class="o">.</span><span class="n">inferers</span><span class="o">.</span><span class="n">SlidingWindowInferer</span><span class="p">(</span>
    <span class="n">roi_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span>
    <span class="n">overlap</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span>
    <span class="n">cache_roi_weight_map</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">network_output_keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;cls&quot;</span><span class="p">,</span> <span class="s2">&quot;box_reg&quot;</span><span class="p">]</span>
<span class="n">images</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>  <span class="c1"># a large input</span>
<span class="n">head_outputs</span> <span class="o">=</span> <span class="n">predict_with_inferer</span><span class="p">(</span><span class="n">images</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">network_output_keys</span><span class="p">,</span> <span class="n">inferer</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-monai.apps.detection.utils.box_selector">
<span id="inference-box-selector"></span><h3><cite>Inference box selector</cite><a class="headerlink" href="#module-monai.apps.detection.utils.box_selector" title="Link to this heading">#</a></h3>
<p>Part of this script is adapted from
<a class="github reference external" href="https://github.com/pytorch/vision/blob/main/torchvision/models/detection/retinanet.py">pytorch/vision</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_selector.BoxSelector">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.detection.utils.box_selector.</span></span><span class="sig-name descname"><span class="pre">BoxSelector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">box_overlap_metric=&lt;function</span> <span class="pre">box_iou&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apply_sigmoid=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_thresh=0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topk_candidates_per_level=1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nms_thresh=0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detections_per_img=300</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_selector.py#L51-L219"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_selector.BoxSelector" title="Link to this definition">#</a></dt>
<dd><p>Box selector which selects the predicted boxes.
The box selection is performed with the following steps:</p>
<ol class="arabic simple">
<li><p>For each level, discard boxes with scores less than self.score_thresh.</p></li>
<li><p>For each level, keep boxes with top self.topk_candidates_per_level scores.</p></li>
<li><p>For the whole image, perform non-maximum suppression (NMS) on boxes, with overlapping threshold nms_thresh.</p></li>
<li><p>For the whole image, keep boxes with top self.detections_per_img scores.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>apply_sigmoid</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to apply sigmoid to get scores from classification logits</p></li>
<li><p><strong>score_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – no box with scores less than score_thresh will be kept</p></li>
<li><p><strong>topk_candidates_per_level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – max number of boxes to keep for each level</p></li>
<li><p><strong>nms_thresh</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – box overlapping threshold for NMS</p></li>
<li><p><strong>detections_per_img</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – max number of boxes to keep for each image</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">input_param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;apply_sigmoid&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;score_thresh&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s2">&quot;topk_candidates_per_level&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;nms_thresh&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s2">&quot;detections_per_img&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">box_selector</span> <span class="o">=</span> <span class="n">BoxSelector</span><span class="p">(</span><span class="o">**</span><span class="n">input_param</span><span class="p">)</span>
<span class="n">boxes</span> <span class="o">=</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">])]</span>
<span class="n">logits</span> <span class="o">=</span> <span class="p">[</span><span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">])]</span>
<span class="n">spatial_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
<span class="n">selected_boxes</span><span class="p">,</span> <span class="n">selected_scores</span><span class="p">,</span> <span class="n">selected_labels</span> <span class="o">=</span> <span class="n">box_selector</span><span class="o">.</span><span class="n">select_boxes_per_image</span><span class="p">(</span>
    <span class="n">boxes</span><span class="p">,</span> <span class="n">logits</span><span class="p">,</span> <span class="n">spatial_size</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_selector.BoxSelector.select_boxes_per_image">
<span class="sig-name descname"><span class="pre">select_boxes_per_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">boxes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logits_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_size</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_selector.py#L148-L219"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_selector.BoxSelector.select_boxes_per_image" title="Link to this definition">#</a></dt>
<dd><p>Postprocessing to generate detection result from classification logits and boxes.</p>
<p>The box selection is performed with the following steps:</p>
<ol class="arabic simple">
<li><p>For each level, discard boxes with scores less than self.score_thresh.</p></li>
<li><p>For each level, keep boxes with top self.topk_candidates_per_level scores.</p></li>
<li><p>For the whole image, perform non-maximum suppression (NMS) on boxes, with overlapping threshold nms_thresh.</p></li>
<li><p>For the whole image, keep boxes with top self.detections_per_img scores.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boxes_list</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of predicted boxes from a single image,
each element i is a Tensor sized (N_i, 2*spatial_dims)</p></li>
<li><p><strong>logits_list</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – list of predicted classification logits from a single image,
each element i is a Tensor sized (N_i, num_classes)</p></li>
<li><p><strong>spatial_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – spatial size of the image</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>selected boxes, Tensor sized (P, 2*spatial_dims)</p></li>
<li><p>selected_scores, Tensor sized (P, )</p></li>
<li><p>selected_labels, Tensor sized (P, )</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.detection.utils.box_selector.BoxSelector.select_top_score_idx_per_level">
<span class="sig-name descname"><span class="pre">select_top_score_idx_per_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logits</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/utils/box_selector.py#L105-L146"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.utils.box_selector.BoxSelector.select_top_score_idx_per_level" title="Link to this definition">#</a></dt>
<dd><p>Select indices with highest scores.</p>
<p>The indices selection is performed with the following steps:</p>
<ol class="arabic simple">
<li><p>If self.apply_sigmoid, get scores by applying sigmoid to logits. Otherwise, use logits as scores.</p></li>
<li><p>Discard indices with scores less than self.score_thresh</p></li>
<li><p>Keep indices with top self.topk_candidates_per_level scores</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>logits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – predicted classification logits, Tensor sized (N, num_classes)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>selected M indices, Tensor sized (M, )
- selected_scores: selected M scores, Tensor sized (M, )
- selected_labels: selected M labels, Tensor sized (M, )</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>topk_idxs</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-monai.apps.detection.metrics.coco">
<span id="detection-metrics"></span><h3><cite>Detection metrics</cite><a class="headerlink" href="#module-monai.apps.detection.metrics.coco" title="Link to this heading">#</a></h3>
<p>This script is almost same with <a class="github reference external" href="https://github.com/MIC-DKFZ/nnDetection/blob/main/nndet/evaluator/detection/coco.py">MIC-DKFZ/nnDetection</a>
The changes include 1) code reformatting, 2) docstrings.</p>
<p id="module-monai.apps.detection.metrics.matching">This script is almost same with <a class="github reference external" href="https://github.com/MIC-DKFZ/nnDetection/blob/main/nndet/evaluator/detection/matching.py">MIC-DKFZ/nnDetection</a>
The changes include 1) code reformatting, 2) docstrings,
3) allow input args gt_ignore to be optional. (If so, no GT boxes will be ignored.)</p>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.detection.metrics.matching.matching_batch">
<span class="sig-prename descclassname"><span class="pre">monai.apps.detection.metrics.matching.</span></span><span class="sig-name descname"><span class="pre">matching_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iou_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iou_thresholds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_scores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gt_boxes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gt_classes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gt_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_detections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/detection/metrics/matching.py#L74-L185"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.detection.metrics.matching.matching_batch" title="Link to this definition">#</a></dt>
<dd><p>Match boxes of a batch to corresponding ground truth for each category
independently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iou_fn</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – compute overlap for each pair</p></li>
<li><p><strong>iou_thresholds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – defined which IoU thresholds should be evaluated</p></li>
<li><p><strong>pred_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – predicted boxes from single batch; List[[D, dim * 2]],
D number of predictions</p></li>
<li><p><strong>pred_classes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – predicted classes from a single batch; List[[D]],
D number of predictions</p></li>
<li><p><strong>pred_scores</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – predicted score for each bounding box; List[[D]],
D number of predictions</p></li>
<li><p><strong>gt_boxes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – ground truth boxes; List[[G, dim * 2]], G number of ground
truth</p></li>
<li><p><strong>gt_classes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – ground truth classes; List[[G]], G number of ground truth</p></li>
<li><p><strong>gt_ignore</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – specified if which ground truth boxes are not counted as
true positives. If not given, when use all the gt_boxes.
(detections which match theses boxes are not counted as false
positives either); List[[G]], G number of ground truth</p></li>
<li><p><strong>max_detections</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – maximum number of detections which should be evaluated</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>List[Dict[int, Dict[str, np.ndarray]]], each Dict[str, np.ndarray] corresponds to an image.
Dict has the following keys.</p>
<ul class="simple">
<li><p><cite>dtMatches</cite>: matched detections [T, D], where T = number of
thresholds, D = number of detections</p></li>
<li><p><cite>gtMatches</cite>: matched ground truth boxes [T, G], where T = number
of thresholds, G = number of ground truth</p></li>
<li><p><cite>dtScores</cite>: prediction scores [D] detection scores</p></li>
<li><p><cite>gtIgnore</cite>: ground truth boxes which should be ignored
[G] indicate whether ground truth should be ignored</p></li>
<li><p><cite>dtIgnore</cite>: detections which should be ignored [T, D],
indicate which detections should be ignored</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.data.box_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">box_iou</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps.detection.metrics.coco</span><span class="w"> </span><span class="kn">import</span> <span class="n">COCOMetric</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps.detection.metrics.matching</span><span class="w"> </span><span class="kn">import</span> <span class="n">matching_batch</span>
<span class="c1"># 3D example outputs of one image from detector</span>
<span class="n">val_outputs_all</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;boxes&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float16</span><span class="p">),</span>
        <span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,(</span><span class="mi">1</span><span class="p">,)),</span>
        <span class="s2">&quot;scores&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">((</span><span class="mi">1</span><span class="p">,))</span><span class="o">.</span><span class="n">absolute</span><span class="p">()},</span>
<span class="p">]</span>
<span class="n">val_targets_all</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;boxes&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float16</span><span class="p">),</span>
        <span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,(</span><span class="mi">1</span><span class="p">,))},</span>
<span class="p">]</span>

<span class="n">coco_metric</span> <span class="o">=</span> <span class="n">COCOMetric</span><span class="p">(</span>
    <span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c0&#39;</span><span class="p">,</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span><span class="s1">&#39;c2&#39;</span><span class="p">],</span> <span class="n">iou_list</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">],</span> <span class="n">max_detection</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">results_metric</span> <span class="o">=</span> <span class="n">matching_batch</span><span class="p">(</span>
    <span class="n">iou_fn</span><span class="o">=</span><span class="n">box_iou</span><span class="p">,</span>
    <span class="n">iou_thresholds</span><span class="o">=</span><span class="n">coco_metric</span><span class="o">.</span><span class="n">iou_thresholds</span><span class="p">,</span>
    <span class="n">pred_boxes</span><span class="o">=</span><span class="p">[</span><span class="n">val_data_i</span><span class="p">[</span><span class="s2">&quot;boxes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="k">for</span> <span class="n">val_data_i</span> <span class="ow">in</span> <span class="n">val_outputs_all</span><span class="p">],</span>
    <span class="n">pred_classes</span><span class="o">=</span><span class="p">[</span><span class="n">val_data_i</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="k">for</span> <span class="n">val_data_i</span> <span class="ow">in</span> <span class="n">val_outputs_all</span><span class="p">],</span>
    <span class="n">pred_scores</span><span class="o">=</span><span class="p">[</span><span class="n">val_data_i</span><span class="p">[</span><span class="s2">&quot;scores&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="k">for</span> <span class="n">val_data_i</span> <span class="ow">in</span> <span class="n">val_outputs_all</span><span class="p">],</span>
    <span class="n">gt_boxes</span><span class="o">=</span><span class="p">[</span><span class="n">val_data_i</span><span class="p">[</span><span class="s2">&quot;boxes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="k">for</span> <span class="n">val_data_i</span> <span class="ow">in</span> <span class="n">val_targets_all</span><span class="p">],</span>
    <span class="n">gt_classes</span><span class="o">=</span><span class="p">[</span><span class="n">val_data_i</span><span class="p">[</span><span class="s2">&quot;labels&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span> <span class="k">for</span> <span class="n">val_data_i</span> <span class="ow">in</span> <span class="n">val_targets_all</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">val_metric_dict</span> <span class="o">=</span> <span class="n">coco_metric</span><span class="p">(</span><span class="n">results_metric</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">val_metric_dict</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="reconstruction">
<h2><cite>Reconstruction</cite><a class="headerlink" href="#reconstruction" title="Link to this heading">#</a></h2>
<section id="fastmrireader">
<h3>FastMRIReader<a class="headerlink" href="#fastmrireader" title="Link to this heading">#</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.reconstruction.fastmri_reader.FastMRIReader">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.reconstruction.fastmri_reader.</span></span><span class="sig-name descname"><span class="pre">FastMRIReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/fastmri_reader.py#L28-L102"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader" title="Link to this definition">#</a></dt>
<dd><p>Load fastMRI files with ‘.h5’ suffix. fastMRI files, when loaded with “h5py”,
are HDF5 dictionary-like datasets. The keys are:</p>
<ul class="simple">
<li><p>kspace: contains the fully-sampled kspace</p></li>
<li><dl class="simple">
<dt>reconstruction_rss: contains the root sum of squares of ifft of kspace. This</dt><dd><p>is the ground-truth image.</p>
</dd>
</dl>
</li>
</ul>
<p>It also has several attributes with the following keys:</p>
<ul class="simple">
<li><p>acquisition (str): acquisition mode of the data (e.g., AXT2 denotes T2 brain MRI scans)</p></li>
<li><p>max (float): dynamic range of the data</p></li>
<li><p>norm (float): norm of the kspace</p></li>
<li><p>patient_id (str): the patient’s id whose measurements were recorded</p></li>
</ul>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.reconstruction.fastmri_reader.FastMRIReader.get_data">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dat</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/fastmri_reader.py#L78-L93"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader.get_data" title="Link to this definition">#</a></dt>
<dd><p>Extract data array and metadata from the loaded data and return them.
This function returns two objects, first is numpy array of image data, second is dict of metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – a dictionary loaded from an h5 file</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.reconstruction.fastmri_reader.FastMRIReader.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/fastmri_reader.py#L56-L76"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader.read" title="Link to this definition">#</a></dt>
<dd><p>Read data from specified h5 file.
Note that the returned object is a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – file name to read.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.reconstruction.fastmri_reader.FastMRIReader.verify_suffix">
<span class="sig-name descname"><span class="pre">verify_suffix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/fastmri_reader.py#L46-L54"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader.verify_suffix" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Verify whether the specified file format is supported by h5py reader.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – file name</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="converttotensorcomplex">
<h3><cite>ConvertToTensorComplex</cite><a class="headerlink" href="#converttotensorcomplex" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.reconstruction.complex_utils.convert_to_tensor_complex">
<span class="sig-prename descclassname"><span class="pre">monai.apps.reconstruction.complex_utils.</span></span><span class="sig-name descname"><span class="pre">convert_to_tensor_complex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrap_sequence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/complex_utils.py#L27-L99"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.complex_utils.convert_to_tensor_complex" title="Link to this definition">#</a></dt>
<dd><p>Convert complex-valued data to a 2-channel PyTorch tensor.
The real and imaginary parts are stacked along the last dimension.
This function relies on ‘monai.utils.type_conversion.convert_to_tensor’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – input data can be PyTorch Tensor, numpy array, list, int, and float.
will convert Tensor, Numpy array, float, int, bool to Tensor, strings and objects keep the original.
for list, convert every item to a Tensor if applicable.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target data type to when converting to Tensor.</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – target device to put the converted Tensor data.</p></li>
<li><p><strong>wrap_sequence</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if <cite>False</cite>, then lists will recursively call this function.
E.g., <cite>[1, 2]</cite> -&gt; <cite>[tensor(1), tensor(2)]</cite>. If <cite>True</cite>, then <cite>[1, 2]</cite> -&gt; <cite>tensor([1, 2])</cite>.</p></li>
<li><p><strong>track_meta</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to track the meta information, if <cite>True</cite>, will convert to <cite>MetaTensor</cite>.
default to <cite>False</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>PyTorch version of the data</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="p">[</span><span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="n">j</span><span class="p">,</span> <span class="mi">2</span><span class="o">-</span><span class="mi">2</span><span class="n">j</span><span class="p">]</span> <span class="p">])</span>
<span class="c1"># the following line prints (2,2)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="c1"># the following line prints torch.Size([2, 2, 2])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">convert_to_tensor_complex</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="complexabs">
<h3><cite>ComplexAbs</cite><a class="headerlink" href="#complexabs" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.reconstruction.complex_utils.complex_abs">
<span class="sig-prename descclassname"><span class="pre">monai.apps.reconstruction.complex_utils.</span></span><span class="sig-name descname"><span class="pre">complex_abs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/complex_utils.py#L117-L135"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.complex_utils.complex_abs" title="Link to this definition">#</a></dt>
<dd><p>Compute the absolute value of a complex array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – Input array/tensor with 2 channels in the last dimension representing real and imaginary parts.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Absolute value along the last dimension</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<span class="c1"># the following line prints 5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">complex_abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rootsumofsquares">
<h3><cite>RootSumOfSquares</cite><a class="headerlink" href="#rootsumofsquares" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.reconstruction.mri_utils.root_sum_of_squares">
<span class="sig-prename descclassname"><span class="pre">monai.apps.reconstruction.mri_utils.</span></span><span class="sig-name descname"><span class="pre">root_sum_of_squares</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_dim</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/mri_utils.py#L42-L62"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.mri_utils.root_sum_of_squares" title="Link to this definition">#</a></dt>
<dd><p>Compute the root sum of squares (rss) of the data (typically done for multi-coil MRI samples)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – Input array/tensor</p></li>
<li><p><strong>spatial_dim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – dimension along which rss is applied</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>rss of x along spatial_dim</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="c1"># the following line prints array([1.41421356, 1.41421356, 1.41421356])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rss</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">spatial_dim</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="complexmul">
<h3><cite>ComplexMul</cite><a class="headerlink" href="#complexmul" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.reconstruction.complex_utils.complex_mul">
<span class="sig-prename descclassname"><span class="pre">monai.apps.reconstruction.complex_utils.</span></span><span class="sig-name descname"><span class="pre">complex_mul</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/complex_utils.py#L158-L189"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.complex_utils.complex_mul" title="Link to this definition">#</a></dt>
<dd><p>Compute complex-valued multiplication. Supports Ndim inputs with last dim equal to 2 (real/imaginary channels)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – Input array/tensor with 2 channels in the last dimension representing real and imaginary parts.</p></li>
<li><p><strong>y</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – Input array/tensor with 2 channels in the last dimension representing real and imaginary parts.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complex multiplication of x and y</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="c1"># the following line prints array([[-1,  3], [-1,  7]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">complex_mul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="complexconj">
<h3><cite>ComplexConj</cite><a class="headerlink" href="#complexconj" title="Link to this heading">#</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.reconstruction.complex_utils.complex_conj">
<span class="sig-prename descclassname"><span class="pre">monai.apps.reconstruction.complex_utils.</span></span><span class="sig-name descname"><span class="pre">complex_conj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/reconstruction/complex_utils.py#L208-L233"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.reconstruction.complex_utils.complex_conj" title="Link to this definition">#</a></dt>
<dd><p>Compute complex conjugate of an/a array/tensor. Supports Ndim inputs with last dim equal to 2 (real/imaginary channels)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]) – Input array/tensor with 2 channels in the last dimension representing real and imaginary parts.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Complex conjugate of x</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="c1"># the following line prints array([[ 1, -2], [ 3, -4]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">complex_conj</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<section id="module-monai.apps.vista3d.inferer">
<span id="vista3d"></span><h2><cite>Vista3d</cite><a class="headerlink" href="#module-monai.apps.vista3d.inferer" title="Link to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.vista3d.inferer.point_based_window_inferer">
<span class="sig-prename descclassname"><span class="pre">monai.apps.vista3d.inferer.</span></span><span class="sig-name descname"><span class="pre">point_based_window_inferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predictor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prev_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/inferer.py#L28-L140"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.inferer.point_based_window_inferer" title="Link to this definition">#</a></dt>
<dd><p>Point-based window inferer that takes an input image, a set of points, and a model, and returns a segmented image.
The inferer algorithm crops the input image into patches that centered at the point sets, which is followed by
patch inference and average output stitching, and finally returns the segmented mask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <a class="reference internal" href="data.html#monai.data.MetaTensor" title="monai.data.meta_tensor.MetaTensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaTensor</span></code></a>]) – [1CHWD], input image to be processed.</p></li>
<li><p><strong>roi_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the spatial window size for inferences.
When its components have None or non-positives, the corresponding inputs dimension will be used.
if the components of the <cite>roi_size</cite> are non-positive values, the transform will use the
corresponding components of img size. For example, <cite>roi_size=(32, -1)</cite> will be adapted
to <cite>(32, 64)</cite> if the second spatial dimension size of img is <cite>64</cite>.</p></li>
<li><p><strong>sw_batch_size</strong> – the batch size to run window slices.</p></li>
<li><p><strong>predictor</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Module</span></code>) – the model. For vista3D, the output is [B, 1, H, W, D] which needs to be transposed to [1, B, H, W, D].
Add transpose=True in kwargs for vista3d.</p></li>
<li><p><strong>point_coords</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – [B, N, 3]. Point coordinates for B foreground objects, each has N points.</p></li>
<li><p><strong>point_labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – [B, N]. Point labels. 0/1 means negative/positive points for regular supported or zero-shot classes.
2/3 means negative/positive points for special supported classes (e.g. tumor, vessel).</p></li>
<li><p><strong>class_vector</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – [B]. Used for class-head automatic segmentation. Can be None value.</p></li>
<li><p><strong>prompt_class</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – [B]. The same as class_vector representing the point class and inform point head about
supported class or zeroshot, not used for automatic segmentation. If None, point head is default
to supported class segmentation.</p></li>
<li><p><strong>prev_mask</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <a class="reference internal" href="data.html#monai.data.MetaTensor" title="monai.data.meta_tensor.MetaTensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaTensor</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – [1, B, H, W, D]. The value is before sigmoid. An optional tensor of previously segmented masks.</p></li>
<li><p><strong>point_start</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – only use points starting from this number. All points before this number is used to generate
prev_mask. This is used to avoid re-calculating the points in previous iterations if given prev_mask.</p></li>
<li><p><strong>center_only</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – for each point, only crop the patch centered at this point. If false, crop 3 patches for each point.</p></li>
<li><p><strong>margin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – if center_only is false, this value is the distance between point to the patch boundary.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>[1, B, H, W, D]. The value is before sigmoid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>stitched_output</p>
</dd>
</dl>
<p>Notice: The function only supports SINGLE OBJECT INFERENCE with B=1.</p>
</dd></dl>

<dl class="py class" id="module-monai.apps.vista3d.transforms">
<dt class="sig sig-object py" id="monai.apps.vista3d.transforms.VistaPreTransformd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.vista3d.transforms.</span></span><span class="sig-name descname"><span class="pre">VistaPreTransformd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">special_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(25,</span> <span class="pre">26,</span> <span class="pre">27,</span> <span class="pre">28,</span> <span class="pre">29,</span> <span class="pre">117)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subclass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/transforms.py#L57-L120"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.transforms.VistaPreTransformd" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="monai.apps.vista3d.transforms.VistaPreTransformd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">special_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(25,</span> <span class="pre">26,</span> <span class="pre">27,</span> <span class="pre">28,</span> <span class="pre">29,</span> <span class="pre">117)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subclass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/transforms.py#L58-L89"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.transforms.VistaPreTransformd.__init__" title="Link to this definition">#</a></dt>
<dd><p>Pre-transform for Vista3d.</p>
<p>It performs two functionalities:</p>
<ol class="arabic simple">
<li><p>If label prompt shows the points belong to special class (defined by special index, e.g. tumors, vessels),
convert point labels from 0 (negative), 1 (positive) to special 2 (negative), 3 (positive).</p></li>
<li><p>If label prompt is within the keys in subclass, convert the label prompt to its subclasses defined by subclass[key].
e.g. “lung” label is converted to [“left lung”, “right lung”].</p></li>
</ol>
<p>The <cite>label_prompt</cite> is a list of int values of length [B] and <cite>point_labels</cite> is a list of length B,
where each element is an int value of length [B, N].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>special_index</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the index that defines the special class.</p></li>
<li><p><strong>subclass</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a dictionary that maps a label prompt to its subclasses.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.vista3d.transforms.VistaPostTransformd">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.vista3d.transforms.</span></span><span class="sig-name descname"><span class="pre">VistaPostTransformd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/transforms.py#L123-L174"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.transforms.VistaPostTransformd" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="monai.apps.vista3d.transforms.VistaPostTransformd.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/transforms.py#L124-L140"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.transforms.VistaPostTransformd.__init__" title="Link to this definition">#</a></dt>
<dd><p>Post-transform for Vista3d. It converts the model output logits into final segmentation masks.
If <cite>label_prompt</cite> is None, the output will be thresholded to be sequential indexes [0,1,2,…],
else the indexes will be [0, label_prompt[0], label_prompt[1], …].
If <cite>label_prompt</cite> is None while <cite>points</cite> are provided, the model will perform postprocess to remove
regions that does not contain positive points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>dataset_transforms</strong> – a dictionary specifies the transform for corresponding dataset:
key: dataset name, value: list of data transforms.</p></li>
<li><p><strong>dataset_key</strong> – key to get the dataset name from the data dictionary, default to “dataset_name”.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.vista3d.transforms.Relabeld">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.vista3d.transforms.</span></span><span class="sig-name descname"><span class="pre">Relabeld</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_mappings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.int16'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key='dataset_name'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/transforms.py#L177-L224"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.transforms.Relabeld" title="Link to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="monai.apps.vista3d.transforms.Relabeld.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_mappings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;class</span> <span class="pre">'numpy.int16'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_key='dataset_name'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing_keys=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/transforms.py#L178-L214"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.transforms.Relabeld.__init__" title="Link to this definition">#</a></dt>
<dd><p>Remap the voxel labels in the input data dictionary based on the specified mapping.</p>
<p>This list of local -&gt; global label mappings will be applied to each input <cite>data[keys]</cite>.
if <cite>data[dataset_key]</cite> is not in <cite>label_mappings</cite>, label_mappings[‘default’]` will be used.
if <cite>label_mappings[data[dataset_key]]</cite> is None, no relabeling will be performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Collection</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>]) – keys of the corresponding items to be transformed.</p></li>
<li><p><strong>label_mappings</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]]) – a dictionary specifies how local dataset class indices are mapped to the
global class indices. The dictionary keys are dataset names and the values are lists of
list of (local label, global label) pairs. This list of local -&gt; global label mappings
will be applied to each input <cite>data[keys]</cite>. If <cite>data[dataset_key]</cite> is not in <cite>label_mappings</cite>,
label_mappings[‘default’]` will be used. if <cite>label_mappings[data[dataset_key]]</cite> is None,
no relabeling will be performed. Please set <cite>label_mappings={}</cite> to completely skip this transform.</p></li>
<li><p><strong>dtype</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – convert the output data to dtype, default to float32.</p></li>
<li><p><strong>dataset_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – key to get the dataset name from the data dictionary, default to “dataset_name”.</p></li>
<li><p><strong>allow_missing_keys</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – don’t raise exception if key is missing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function" id="module-monai.apps.vista3d.sampler">
<dt class="sig sig-object py" id="monai.apps.vista3d.sampler.sample_prompt_pairs">
<span class="sig-prename descclassname"><span class="pre">monai.apps.vista3d.sampler.</span></span><span class="sig-name descname"><span class="pre">sample_prompt_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_set</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_foreprompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_backprompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_point</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_label_prob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_point_prob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_sampler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">point_sampler_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/vista3d/sampler.py#L41-L179"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.vista3d.sampler.sample_prompt_pairs" title="Link to this definition">#</a></dt>
<dd><p>Sample training pairs for VISTA3D training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>) – [1, 1, H, W, D], ground truth labels.</p></li>
<li><p><strong>label_set</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – the label list for the specific dataset. Note if 0 is included in label_set,
it will be added into automatic branch training. Recommend removing 0 from label_set
for multi-partially-labeled-dataset training, and adding 0 for finetuning specific dataset.
The reason is region with 0 in one partially labeled dataset may contain foregrounds in
another dataset.</p></li>
<li><p><strong>max_prompt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – int, max number of total prompt, including foreground and background.</p></li>
<li><p><strong>max_foreprompt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – int, max number of prompt from foreground.</p></li>
<li><p><strong>max_backprompt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – int, max number of prompt from background.</p></li>
<li><p><strong>max_point</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – maximum number of points for each object.</p></li>
<li><p><strong>include_background</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if include 0 into training prompt. If included, background 0 is treated
the same as foreground and points will be sampled. Can be true only if user want to segment
background 0 with point clicks, otherwise always be false.</p></li>
<li><p><strong>drop_label_prob</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – probability to drop label prompt.</p></li>
<li><p><strong>drop_point_prob</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – probability to drop point prompt.</p></li>
<li><p><strong>point_sampler</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – sampler to augment masks with supervoxel.</p></li>
<li><p><strong>point_sampler_kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – arguments for point_sampler.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>label_prompt (Tensor | None): Tensor of shape [B, 1] containing the classes used for
training automatic segmentation.</p></li>
<li><p>point (Tensor | None): Tensor of shape [B, N, 3] representing the corresponding points
for each class. Note that background label prompts require matching points as well
(e.g., [0, 0, 0] is used).</p></li>
<li><p>point_label (Tensor | None): Tensor of shape [B, N] representing the corresponding point
labels for each point (negative or positive). -1 is used for padding the background
label prompt and will be ignored.</p></li>
<li><p>prompt_class (Tensor | None): Tensor of shape [B, 1], exactly the same as label_prompt
for label indexing during training. If label_prompt is None, prompt_class is used to
identify point classes.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-monai.apps.auto3dseg">
<span id="auto3dseg"></span><h2><cite>Auto3DSeg</cite><a class="headerlink" href="#module-monai.apps.auto3dseg" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">AlgoEnsemble</span></span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L49-L236"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble" title="Link to this definition">#</a></dt>
<dd><p>The base class of Ensemble methods</p>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pred_param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L154-L232"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble.__call__" title="Link to this definition">#</a></dt>
<dd><p>Use the ensembled model to predict result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pred_param</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – <p>prediction parameter dictionary. The key has two groups: the first one will be consumed
in this function, and the second group will be passed to the <cite>InferClass</cite> to override the
parameters of the class functions.
The first group contains:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;infer_files&quot;</span></code>: file paths to the images to read in a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;files_slices&quot;</span></code>: a value type of <cite>slice</cite>. The files_slices will slice the <code class="docutils literal notranslate"><span class="pre">&quot;infer_files&quot;</span></code> and
only make prediction on the infer_files[file_slices].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mode&quot;</span></code>: ensemble mode. Currently “mean” and “vote” (majority voting) schemes are supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;image_save_func&quot;</span></code>: a dictionary used to instantiate the <code class="docutils literal notranslate"><span class="pre">SaveImage</span></code> transform. When specified,
the ensemble prediction will save the prediction files, instead of keeping the files in the memory.
Example: <cite>{“_target_”: “SaveImage”, “output_dir”: “./”}</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;sigmoid&quot;</span></code>: use the sigmoid function (e.g. x &gt; 0.5) to convert the prediction probability map
to the label class prediction, otherwise argmax(x) is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;algo_spec_params&quot;</span></code>: a dictionary to add pred_params that are specific to a model.
The dict has a format of {“&lt;name of algo&gt;”: “&lt;pred_params for that algo&gt;”}.</p></li>
</ul>
</div></blockquote>
<p>The parameters in the second group is defined in the <code class="docutils literal notranslate"><span class="pre">config</span></code> of each Algo templates. Please check:
<a class="github reference external" href="https://github.com/Project-MONAI/research-contributions/tree/main/auto3dseg/algorithm_templates">Project-MONAI/research-contributions</a></p>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of tensors or file paths, depending on whether <code class="docutils literal notranslate"><span class="pre">&quot;image_save_func&quot;</span></code> is set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble.ensemble_pred">
<span class="sig-name descname"><span class="pre">ensemble_pred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigmoid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L109-L133"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble.ensemble_pred" title="Link to this definition">#</a></dt>
<dd><p>ensemble the results using either “mean” or “vote” method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>preds</strong> – a list of probability prediction in Tensor-Like format.</p></li>
<li><p><strong>sigmoid</strong> – use the sigmoid function to threshold probability one-hot map,
otherwise argmax is used. Defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tensor which is the ensembled prediction.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble.get_algo">
<span class="sig-name descname"><span class="pre">get_algo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L66-L75"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble.get_algo" title="Link to this definition">#</a></dt>
<dd><p>Get a model by identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>identifier</strong> – the name of the bundleAlgo</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble.get_algo_ensemble">
<span class="sig-name descname"><span class="pre">get_algo_ensemble</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L77-L84"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble.get_algo_ensemble" title="Link to this definition">#</a></dt>
<dd><p>Get the algo ensemble after ranking or a empty list if ranking was not started.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of Algo</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble.set_algos">
<span class="sig-name descname"><span class="pre">set_algos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infer_algos</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L60-L64"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble.set_algos" title="Link to this definition">#</a></dt>
<dd><p>Register model in the ensemble</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsemble.set_infer_files">
<span class="sig-name descname"><span class="pre">set_infer_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataroot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_list_or_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'testing'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L86-L107"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsemble.set_infer_files" title="Link to this definition">#</a></dt>
<dd><p>Set the files to perform model inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataroot</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the path of the files</p></li>
<li><p><strong>data_list_or_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]) – the data source file path</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBestByFold">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">AlgoEnsembleBestByFold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L283-L314"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBestByFold" title="Link to this definition">#</a></dt>
<dd><p>Ensemble method that select the best models that are the tops in each fold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of cross-validation folds used in training</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBestByFold.collect_algos">
<span class="sig-name descname"><span class="pre">collect_algos</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L295-L314"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBestByFold.collect_algos" title="Link to this definition">#</a></dt>
<dd><p>Rank the algos by finding the best model in each cross-validation fold</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBestN">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">AlgoEnsembleBestN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_best</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L239-L280"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBestN" title="Link to this definition">#</a></dt>
<dd><p>Ensemble method that select N model out of all using the models’ best_metric scores</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_best</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of models to pick for ensemble (N).</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBestN.collect_algos">
<span class="sig-name descname"><span class="pre">collect_algos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_best</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L258-L280"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBestN.collect_algos" title="Link to this definition">#</a></dt>
<dd><p>Rank the algos by finding the top N (n_best) validation scores.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBestN.sort_score">
<span class="sig-name descname"><span class="pre">sort_score</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L251-L256"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBestN.sort_score" title="Link to this definition">#</a></dt>
<dd><p>Sort the best_metrics</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBuilder">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">AlgoEnsembleBuilder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_src_cfg_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L317-L394"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder" title="Link to this definition">#</a></dt>
<dd><p>Build ensemble workflow from configs and arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>history</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]) – a collection of trained bundleAlgo algorithms.</p></li>
<li><p><strong>data_src_cfg_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – filename of the data source.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span> <span class="o">=</span> <span class="n">AlgoEnsembleBuilder</span><span class="p">(</span><span class="n">history</span><span class="p">,</span> <span class="n">data_src_cfg</span><span class="p">)</span>
<span class="n">builder</span><span class="o">.</span><span class="n">set_ensemble_method</span><span class="p">(</span><span class="n">BundleAlgoEnsembleBestN</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">ensemble</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">get_ensemble</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBuilder.add_inferer">
<span class="sig-name descname"><span class="pre">add_inferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gen_algo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L361-L375"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder.add_inferer" title="Link to this definition">#</a></dt>
<dd><p>Add model inferer to the builder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name of the bundleAlgo.</p></li>
<li><p><strong>gen_algo</strong> (<a class="reference internal" href="#monai.apps.auto3dseg.BundleAlgo" title="monai.apps.auto3dseg.bundle_gen.BundleAlgo"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAlgo</span></code></a>) – a trained BundleAlgo model object.</p></li>
<li><p><strong>best_metric</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the best metric in validation of the trained model.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBuilder.get_ensemble">
<span class="sig-name descname"><span class="pre">get_ensemble</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L391-L394"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder.get_ensemble" title="Link to this definition">#</a></dt>
<dd><p>Get the ensemble</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AlgoEnsembleBuilder.set_ensemble_method">
<span class="sig-name descname"><span class="pre">set_ensemble_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ensemble</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L377-L389"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder.set_ensemble_method" title="Link to this definition">#</a></dt>
<dd><p>Set the ensemble method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ensemble</strong> (<a class="reference internal" href="#monai.apps.auto3dseg.AlgoEnsemble" title="monai.apps.auto3dseg.ensemble_builder.AlgoEnsemble"><code class="xref py py-class docutils literal notranslate"><span class="pre">AlgoEnsemble</span></code></a>) – the AlgoEnsemble to build.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">AutoRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">work_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./work_dir'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo_gen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hpo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hpo_backend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nni'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensemble</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_use_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">templates_path_or_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_tracking_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_experiment_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L40-L907"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner" title="Link to this definition">#</a></dt>
<dd><p>An interface for handling Auto3Dseg with minimal inputs and understanding of the internal states in Auto3Dseg.
The users can run the Auto3Dseg with default settings in one line of code. They can also customize the advanced
features Auto3Dseg in a few additional lines. Examples of customization include</p>
<blockquote>
<div><ul class="simple">
<li><p>change cross-validation folds</p></li>
<li><p>change training/prediction parameters</p></li>
<li><p>change ensemble methods</p></li>
<li><p>automatic hyperparameter optimization.</p></li>
</ul>
</div></blockquote>
<p>The output of the interface is a directory that contains</p>
<blockquote>
<div><ul class="simple">
<li><p>data statistics analysis report</p></li>
<li><p>algorithm definition files (scripts, configs, pickle objects) and training results (checkpoints, accuracies)</p></li>
<li><p>the predictions on the testing datasets from the final algorithm ensemble</p></li>
<li><p>a copy of the input arguments in form of YAML</p></li>
<li><p>cached intermediate results</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>work_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – working directory to save the intermediate and final results.</p></li>
<li><p><strong>input</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the configuration dictionary or the file path to the configuration in form of YAML.
The configuration should contain datalist, dataroot, modality, multigpu, and class_names info.</p></li>
<li><p><strong>algos</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – optionally specify algorithms to use.  If a dictionary, must be in the form
{“algname”: dict(_target_=”algname.scripts.algo.AlgnameAlgo”, template_path=”algname”), …}
If a list or a string, defines a subset of names of the algorithms to use, e.g. ‘segresnet’ or
[‘segresnet’, ‘dints’] out of the full set of algorithm templates provided by templates_path_or_url.
Defaults to None, to use all available algorithms.</p></li>
<li><p><strong>analyze</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – on/off switch to run DataAnalyzer and generate a datastats report. Defaults to None, to automatically
decide based on cache, and run data analysis only if we have not completed this step yet.</p></li>
<li><p><strong>algo_gen</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – on/off switch to run AlgoGen and generate templated BundleAlgos. Defaults to None, to automatically
decide based on cache, and run algorithm folders generation only if we have not completed this step yet.</p></li>
<li><p><strong>train</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – on/off switch to run training and generate algorithm checkpoints. Defaults to None, to automatically
decide based on cache, and run training only if we have not completed this step yet.</p></li>
<li><p><strong>hpo</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – use hyperparameter optimization (HPO) in the training phase. Users can provide a list of
hyper-parameter and a search will be performed to investigate the algorithm performances.</p></li>
<li><p><strong>hpo_backend</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – a string that indicates the backend of the HPO. Currently, only NNI Grid-search mode
is supported</p></li>
<li><p><strong>ensemble</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – on/off switch to run model ensemble and use the ensemble to predict outputs in testing
datasets.</p></li>
<li><p><strong>not_use_cache</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if the value is True, it will ignore all cached results in data analysis,
algorithm generation, or training, and start the pipeline from scratch.</p></li>
<li><p><strong>templates_path_or_url</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the folder with the algorithm templates or a url. If None provided, the default template
zip url will be downloaded and extracted into the work_dir.</p></li>
<li><p><strong>allow_skip</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – a switch passed to BundleGen process which determines if some Algo in the default templates
can be skipped based on the analysis on the dataset from Auto3DSeg DataAnalyzer.</p></li>
<li><p><strong>mlflow_tracking_uri</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a tracking URI for MLflow server which could be local directory or address of the remote
tracking Server; MLflow runs will be recorded locally in algorithms’ model folder if the value is None.</p></li>
<li><p><strong>mlflow_experiment_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the name of the experiment in MLflow server.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – image writing parameters for the ensemble inference. The kwargs format follows the SaveImage
transform. For more information, check <a class="reference external" href="https://docs.monai.io/en/stable/transforms.html#saveimage">https://docs.monai.io/en/stable/transforms.html#saveimage</a>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<ul class="simple">
<li><p>User can use the one-liner to start the Auto3Dseg workflow</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.auto3dseg<span class="w"> </span>AutoRunner<span class="w"> </span>run<span class="w"> </span>--input<span class="w">             </span><span class="s1">&#39;{&quot;modality&quot;: &quot;ct&quot;, &quot;datalist&quot;: &quot;dl.json&quot;, &quot;dataroot&quot;: &quot;/dr&quot;, &quot;multigpu&quot;: true, &quot;class_names&quot;: [&quot;A&quot;, &quot;B&quot;]}&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can also save the input dictionary as a input YAML file and use the following one-liner</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.auto3dseg<span class="w"> </span>AutoRunner<span class="w"> </span>run<span class="w"> </span>--input<span class="o">=</span>./input.yaml
</pre></div>
</div>
<ul class="simple">
<li><p>User can specify work_dir and data source config input and run AutoRunner:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">work_dir</span> <span class="o">=</span> <span class="s2">&quot;./work_dir&quot;</span>
<span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="n">work_dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can specify a subset of algorithms to use and run AutoRunner:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">work_dir</span> <span class="o">=</span> <span class="s2">&quot;./work_dir&quot;</span>
<span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">algos</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;segresnet&quot;</span><span class="p">,</span> <span class="s2">&quot;dints&quot;</span><span class="p">]</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="n">work_dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">algos</span><span class="o">=</span><span class="n">algos</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can specify a local folder with algorithms templates and run AutoRunner:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">work_dir</span> <span class="o">=</span> <span class="s2">&quot;./work_dir&quot;</span>
<span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">algos</span> <span class="o">=</span> <span class="s2">&quot;segresnet&quot;</span>
<span class="n">templates_path_or_url</span> <span class="o">=</span> <span class="s2">&quot;./local_path_to/algorithm_templates&quot;</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="n">work_dir</span><span class="o">=</span><span class="n">work_dir</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">algos</span><span class="o">=</span><span class="n">algos</span><span class="p">,</span> <span class="n">templates_path_or_url</span><span class="o">=</span><span class="n">templates_path_or_url</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can specify training parameters by:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
<span class="n">train_param</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;num_epochs_per_validation&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;num_images_per_batch&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;num_epochs&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">runner</span><span class="o">.</span><span class="n">set_training_params</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">train_param</span><span class="p">)</span>  <span class="c1"># 2 epochs</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can specify the fold number of cross validation</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">set_num_fold</span><span class="p">(</span><span class="n">n_fold</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can specify the prediction parameters during algo ensemble inference:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">pred_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;files_slices&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
    <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s2">&quot;vote&quot;</span><span class="p">,</span>
    <span class="s1">&#39;sigmoid&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">set_prediction_params</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">pred_params</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>User can define a grid search space and use the HPO during training.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="o">=</span> <span class="s2">&quot;path/to/input_yaml&quot;</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">AutoRunner</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">hpo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">runner</span><span class="o">.</span><span class="n">set_nni_search_space</span><span class="p">({</span><span class="s2">&quot;learning_rate&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;choice&quot;</span><span class="p">,</span> <span class="s2">&quot;_value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]}})</span>
<span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Expected results in the work_dir as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>work_dir/
├── algorithm_templates # bundle algo templates (scripts/configs)
├── cache.yaml          # Autorunner will automatically cache results to save time
├── datastats.yaml      # datastats of the dataset
├── dints_0             # network scripts/configs/checkpoints and pickle object of the algo
├── ensemble_output     # the prediction of testing datasets from the ensemble of the algos
├── input.yaml          # copy of the input data source configs
├── segresnet_0         # network scripts/configs/checkpoints and pickle object of the algo
├── segresnet2d_0       # network scripts/configs/checkpoints and pickle object of the algo
└── swinunetr_0         # network scripts/configs/checkpoints and pickle object of the algo
</pre></div>
</div>
<dl class="simple">
<dt>The input config requires at least the following keys:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">modality</span></code>: the modality of the data, e.g. “ct”, “mri”, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datalist</span></code>: the path to the datalist file in JSON format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dataroot</span></code>: the root directory of the data files.</p></li>
</ul>
</dd>
</dl>
<p>For the datalist file format, see the description under <a class="reference internal" href="data.html#monai.data.load_decathlon_datalist" title="monai.data.load_decathlon_datalist"><code class="xref py py-func docutils literal notranslate"><span class="pre">monai.data.load_decathlon_datalist()</span></code></a>.
Note that the AutoRunner will use the “validation” key in the datalist file if it exists, otherwise
it will do cross-validation, by default with five folds (this is hardcoded).</p>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.export_cache">
<span class="sig-name descname"><span class="pre">export_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L385-L392"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.export_cache" title="Link to this definition">#</a></dt>
<dd><p>Save the cache state as <code class="docutils literal notranslate"><span class="pre">cache.yaml</span></code> in the working directory</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.inspect_datalist_folds">
<span class="sig-name descname"><span class="pre">inspect_datalist_folds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datalist_filename</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L394-L460"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.inspect_datalist_folds" title="Link to this definition">#</a></dt>
<dd><p>Returns number of folds in the datalist file, and assigns fold numbers if not provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>datalist_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – path to the datalist file.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If the fold key is not provided, it auto generates 5 folds assignments in the training key list.
If validation key list is available, then it assumes a single fold validation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.read_cache">
<span class="sig-name descname"><span class="pre">read_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L348-L383"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.read_cache" title="Link to this definition">#</a></dt>
<dd><p>Check if the intermediate result is cached after each step in the current working directory</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>a dict of cache results. If not_use_cache is set to True, or there is no cache file in the
working directory, the result will be <code class="docutils literal notranslate"><span class="pre">empty_cache</span></code> in which all <code class="docutils literal notranslate"><span class="pre">has_cache</span></code> keys are
set to False.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L812-L907"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.run" title="Link to this definition">#</a></dt>
<dd><p>Run the AutoRunner pipeline</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_analyze_params">
<span class="sig-name descname"><span class="pre">set_analyze_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L657-L671"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_analyze_params" title="Link to this definition">#</a></dt>
<dd><p>Set the data analysis extra params.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a dict that defines the overriding key-value pairs during training. The overriding method
is defined by the algo class.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_device_info">
<span class="sig-name descname"><span class="pre">set_device_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cuda_visible_devices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mn_start_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L542-L599"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_device_info" title="Link to this definition">#</a></dt>
<dd><p>Set the device related info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cuda_visible_devices</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – define GPU ids for data analyzer, training, and ensembling.
List of GPU ids [0,1,2,3] or a string “0,1,2,3”.
Default using env “CUDA_VISIBLE_DEVICES” or all devices available.</p></li>
<li><p><strong>num_nodes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – number of nodes for training and ensembling.
Default using env “NUM_NODES” or 1 if “NUM_NODES” is unset.</p></li>
<li><p><strong>mn_start_method</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – multi-node start method. Autorunner will use the method to start multi-node processes.
Default using env “MN_START_METHOD” or ‘bcprun’ if “MN_START_METHOD” is unset.</p></li>
<li><p><strong>cmd_prefix</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – <p>command line prefix for subprocess running in BundleAlgo and EnsembleRunner.
Default using env “CMD_PREFIX” or None, examples are:</p>
<blockquote>
<div><ul>
<li><p>single GPU/CPU or multinode bcprun: “python “ or “/opt/conda/bin/python3.9 “,</p></li>
<li><p>single node multi-GPU running “torchrun –nnodes=1 –nproc_per_node=2 “</p></li>
</ul>
</div></blockquote>
<p>If user define this prefix, please make sure –nproc_per_node matches cuda_visible_device or
os.env[‘CUDA_VISIBLE_DEVICES’]. Also always set –nnodes=1. Set num_nodes for multi-node.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_ensemble_method">
<span class="sig-name descname"><span class="pre">set_ensemble_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ensemble_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AlgoEnsembleBestByFold'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L601-L616"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_ensemble_method" title="Link to this definition">#</a></dt>
<dd><p>Set the bundle ensemble method name and parameters for save image transform parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ensemble_method_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the name of the ensemble method. Only two methods are supported “AlgoEnsembleBestN”
and “AlgoEnsembleBestByFold”.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – the keyword arguments used to define the ensemble method. Currently only <code class="docutils literal notranslate"><span class="pre">n_best</span></code> for
<code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestN</span></code> is supported.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_gpu_customization">
<span class="sig-name descname"><span class="pre">set_gpu_customization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gpu_customization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_customization_specs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L462-L499"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_gpu_customization" title="Link to this definition">#</a></dt>
<dd><p>Set options for GPU-based parameter customization/optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gpu_customization</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – the switch to determine automatically customize/optimize bundle script/config
parameters for each bundleAlgo based on gpus. Custom parameters are obtained through dummy
training to simulate the actual model training process and hyperparameter optimization (HPO)
experiments.</p></li>
<li><p><strong>gpu_customization_specs</strong> (<em>optional</em>) – <p>the dictionary to enable users overwrite the HPO settings. user can
overwrite part of variables as follows or all of them. The structure is as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gpu_customization_specs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ALGO&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;num_trials&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="s1">&#39;range_num_images_per_batch&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
        <span class="s1">&#39;range_num_sw_batch_size&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>ALGO</strong> – <p>the name of algorithm. It could be one of algorithm names (e.g., ‘dints’) or ‘universal’ which
would apply changes to all algorithms. Possible options are</p>
<ul>
<li><p>{<code class="docutils literal notranslate"><span class="pre">&quot;universal&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dints&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;segresnet&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;segresnet2d&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;swinunetr&quot;</span></code>}.</p></li>
</ul>
</p></li>
<li><p><strong>num_trials</strong> – the number of HPO trials/experiments to run.</p></li>
<li><p><strong>range_num_images_per_batch</strong> – the range of number of images per mini-batch.</p></li>
<li><p><strong>range_num_sw_batch_size</strong> – the range of batch size in sliding-window inferer.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_hpo_params">
<span class="sig-name descname"><span class="pre">set_hpo_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L673-L699"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_hpo_params" title="Link to this definition">#</a></dt>
<dd><p>Set parameters for the HPO module and the algos before the training. It will attempt to (1) override bundle
templates with the key-value pairs in <code class="docutils literal notranslate"><span class="pre">params</span></code> (2) change the config of the HPO module (e.g. NNI) if the
key is found to be one of:</p>
<blockquote>
<div><ul class="simple">
<li><p>“trialCodeDirectory”</p></li>
<li><p>“trialGpuNumber”</p></li>
<li><p>“trialConcurrency”</p></li>
<li><p>“maxTrialNumber”</p></li>
<li><p>“maxExperimentDuration”</p></li>
<li><p>“tuner”</p></li>
<li><p>“trainingService”</p></li>
</ul>
</div></blockquote>
<p>and (3) enable the dry-run mode if the user would generate the NNI configs without starting the NNI service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a dict that defines the overriding key-value pairs during instantiation of the algo. For
BundleAlgo, it will override the template config filling.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Users can set <code class="docutils literal notranslate"><span class="pre">nni_dry_run</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> in the <code class="docutils literal notranslate"><span class="pre">params</span></code> to enable the dry-run mode for the NNI backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_image_save_transform">
<span class="sig-name descname"><span class="pre">set_image_save_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L618-L637"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_image_save_transform" title="Link to this definition">#</a></dt>
<dd><p>Set the ensemble output transform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – image writing parameters for the ensemble inference. The kwargs format follows SaveImage
transform. For more information, check <a class="reference external" href="https://docs.monai.io/en/stable/transforms.html#saveimage">https://docs.monai.io/en/stable/transforms.html#saveimage</a>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_nni_search_space">
<span class="sig-name descname"><span class="pre">set_nni_search_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">search_space</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L701-L718"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_nni_search_space" title="Link to this definition">#</a></dt>
<dd><p>Set the search space for NNI parameter search.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>search_space</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]) – hyper parameter search space in the form of dict. For more information, please check
NNI documentation: <a class="reference external" href="https://nni.readthedocs.io/en/v2.2/Tutorial/SearchSpaceSpec.html">https://nni.readthedocs.io/en/v2.2/Tutorial/SearchSpaceSpec.html</a> .</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_num_fold">
<span class="sig-name descname"><span class="pre">set_num_fold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L501-L518"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_num_fold" title="Link to this definition">#</a></dt>
<dd><p>Set the number of cross validation folds for all algos.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – a positive integer to define the number of folds.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_prediction_params">
<span class="sig-name descname"><span class="pre">set_prediction_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L639-L655"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_prediction_params" title="Link to this definition">#</a></dt>
<dd><p>Set the prediction params for all algos.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a dict that defines the overriding key-value pairs during prediction. The overriding method
is defined by the algo class.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl class="simple">
<dt>For BundleAlgo objects, this set of param will specify the algo ensemble to only inference the first</dt><dd><p>two files in the testing datalist {“file_slices”: slice(0, 2)}</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.AutoRunner.set_training_params">
<span class="sig-name descname"><span class="pre">set_training_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/auto_runner.py#L520-L540"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.AutoRunner.set_training_params" title="Link to this definition">#</a></dt>
<dd><p>Set the training params for all algos.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a dict that defines the overriding key-value pairs during training. The overriding method
is defined by the algo class.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<dl class="simple">
<dt>For BundleAlgo objects, the training parameter to shorten the training time to a few epochs can be</dt><dd><p>{“num_epochs”: 2, “num_epochs_per_validation”: 1}</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#monai.apps.auto3dseg.AutoRunner" title="monai.apps.auto3dseg.auto_runner.AutoRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoRunner</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">BundleAlgo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L53-L368"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo" title="Link to this definition">#</a></dt>
<dd><p>An algorithm represented by a set of bundle configurations and scripts.</p>
<p><code class="docutils literal notranslate"><span class="pre">BundleAlgo.cfg</span></code> is a <code class="docutils literal notranslate"><span class="pre">monai.bundle.ConfigParser</span></code> instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps.auto3dseg</span><span class="w"> </span><span class="kn">import</span> <span class="n">BundleAlgo</span>

<span class="n">data_stats_yaml</span> <span class="o">=</span> <span class="s2">&quot;../datastats.yaml&quot;</span>
<span class="n">algo</span> <span class="o">=</span> <span class="n">BundleAlgo</span><span class="p">(</span><span class="n">template_path</span><span class="o">=</span><span class="s2">&quot;../algorithm_templates&quot;</span><span class="p">)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">set_data_stats</span><span class="p">(</span><span class="n">data_stats_yaml</span><span class="p">)</span>
<span class="c1"># algo.set_data_src(&quot;../data_src.json&quot;)</span>
<span class="n">algo</span><span class="o">.</span><span class="n">export_to_disk</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">algo_name</span><span class="o">=</span><span class="s2">&quot;segresnet2d_1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This class creates MONAI bundles from a directory of ‘bundle template’. Different from the regular MONAI bundle
format, the bundle template may contain placeholders that must be filled using <code class="docutils literal notranslate"><span class="pre">fill_template_config</span></code> during
<code class="docutils literal notranslate"><span class="pre">export_to_disk</span></code>. Then created bundle keeps the same file structure as the template.</p>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L75-L102"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.__init__" title="Link to this definition">#</a></dt>
<dd><p>Create an Algo instance based on the predefined Algo template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>template_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>]) – path to a folder that contains the algorithm templates.
Please check <a class="github reference external" href="https://github.com/Project-MONAI/research-contributions/tree/main/auto3dseg/algorithm_templates">Project-MONAI/research-contributions</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.export_to_disk">
<span class="sig-name descname"><span class="pre">export_to_disk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L171-L194"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.export_to_disk" title="Link to this definition">#</a></dt>
<dd><p>Fill the configuration templates, write the bundle (configs + scripts) to folder <cite>output_path/algo_name</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Path to export the ‘scripts’ and ‘configs’ directories.</p></li>
<li><p><strong>algo_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the identifier of the algorithm (usually contains the name and extra info like fold ID).</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other parameters, including: “copy_dirs=True/False” means whether to copy the template as output
instead of inplace operation, “fill_template=True/False” means whether to fill the placeholders
in the template. other parameters are for <cite>fill_template_config</cite> function.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.fill_template_config">
<span class="sig-name descname"><span class="pre">fill_template_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_stats_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L154-L169"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.fill_template_config" title="Link to this definition">#</a></dt>
<dd><p>The configuration files defined when constructing this Algo instance might not have a complete training
and validation pipelines. Some configuration components and hyperparameters of the pipelines depend on the
training data and other factors. This API is provided to allow the creation of fully functioning config files.
Return the records of filling template config: {“&lt;config name&gt;”: {“&lt;placeholder key&gt;”: value, …}, …}.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_stats_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – filename of the data stats report (generated by DataAnalyzer)</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Template filling is optional. The user can construct a set of pre-filled configs without replacing values
by using the data analysis results. It is also intended to be re-implemented in subclasses of BundleAlgo
if the user wants their own way of auto-configured template filling.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.get_inferer">
<span class="sig-name descname"><span class="pre">get_inferer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L315-L351"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.get_inferer" title="Link to this definition">#</a></dt>
<dd><p>Load the InferClass from the infer.py. The InferClass should be defined in the template under the path of
<cite>“scripts/infer.py”</cite>. It is required to define the “InferClass” (name is fixed) with two functions at least
(<code class="docutils literal notranslate"><span class="pre">__init__</span></code> and <code class="docutils literal notranslate"><span class="pre">infer</span></code>). The init class has an override kwargs that can be used to override parameters in
the run-time optionally.</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">InferClass</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">override</span><span class="p">):</span>
        <span class="c1"># read configs from config_file (sequence)</span>
        <span class="c1"># set up transforms</span>
        <span class="c1"># set up model</span>
        <span class="c1"># set up other hyper parameters</span>
        <span class="k">return</span>

    <span class="nd">@torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">()</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">infer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image_file</span><span class="p">):</span>
        <span class="c1"># infer the model and save the results to output</span>
        <span class="k">return</span> <span class="n">output</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.get_output_path">
<span class="sig-name descname"><span class="pre">get_output_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L366-L368"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.get_output_path" title="Link to this definition">#</a></dt>
<dd><p>Returns the algo output paths to find the algo scripts and configs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.get_score">
<span class="sig-name descname"><span class="pre">get_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L302-L313"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.get_score" title="Link to this definition">#</a></dt>
<dd><p>Returns validation scores of the model trained by the current Algo.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.pre_check_skip_algo">
<span class="sig-name descname"><span class="pre">pre_check_skip_algo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skip_bundlegen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L104-L112"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.pre_check_skip_algo" title="Link to this definition">#</a></dt>
<dd><p>Analyse the data analysis report and check if the algorithm needs to be skipped.
This function is overriden within algo.
:type skip_bundlegen: <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>
:param skip_bundlegen: skip generating bundles for this algo if true.
:type skip_info: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>
:param skip_info: info to print when skipped.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predict_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L353-L364"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.predict" title="Link to this definition">#</a></dt>
<dd><p>Use the trained model to predict the outputs with a given input image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predict_files</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>) – a list of paths to files to run inference on [“path_to_image_1”, “path_to_image_2”]</p></li>
<li><p><strong>predict_params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a dict to override the parameters in the bundle config (including the files to predict).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.set_data_source">
<span class="sig-name descname"><span class="pre">set_data_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_src_cfg</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L123-L132"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.set_data_source" title="Link to this definition">#</a></dt>
<dd><p>Set the data source configuration file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_src_cfg</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – path to a configuration file (yaml) that contains datalist, dataroot, and other params.
The config will be in a form of {“modality”: “ct”, “datalist”: “path_to_json_datalist”, “dataroot”:
“path_dir_data”}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.set_data_stats">
<span class="sig-name descname"><span class="pre">set_data_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_stats_files</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L114-L121"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.set_data_stats" title="Link to this definition">#</a></dt>
<dd><p>Set the data analysis report (generated by DataAnalyzer).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_stats_files</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – path to the datastats yaml file</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.set_mlflow_experiment_name">
<span class="sig-name descname"><span class="pre">set_mlflow_experiment_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlflow_experiment_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L145-L152"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.set_mlflow_experiment_name" title="Link to this definition">#</a></dt>
<dd><p>Set the experiment name for MLflow server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mlflow_experiment_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a string to specify the experiment name for MLflow server.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.set_mlflow_tracking_uri">
<span class="sig-name descname"><span class="pre">set_mlflow_tracking_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlflow_tracking_uri</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L134-L143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.set_mlflow_tracking_uri" title="Link to this definition">#</a></dt>
<dd><p>Set the tracking URI for MLflow server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mlflow_tracking_uri</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a tracking URI for MLflow server which could be local directory or address of
the remote tracking Server; MLflow runs will be recorded locally in algorithms’ model folder if
the value is None.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleAlgo.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L279-L300"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleAlgo.train" title="Link to this definition">#</a></dt>
<dd><p>Load the run function in the training script of each model. Training parameter is predefined by the
algo_config.yaml file, which is pre-filled by the fill_template_config function in the same instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]) – training parameters</p></li>
<li><p><strong>device_setting</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]) – device related settings, should follow the device_setting in auto_runner.set_device_info.
‘CUDA_VISIBLE_DEVICES’ should be a string e.g. ‘0,1,2,3’</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CompletedProcess</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">BundleGen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algo_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">templates_path_or_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_stats_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_src_cfg_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_tracking_uri</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mlflow_experiment_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L442-L665"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen" title="Link to this definition">#</a></dt>
<dd><p>This class generates a set of bundles according to the cross-validation folds, each of them can run independently.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>algo_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the directory path to save the algorithm templates. Default is the current working dir.</p></li>
<li><p><strong>algos</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – If dictionary, it outlines the algorithm to use. If a list or a string, defines a subset of names of
the algorithms to use, e.g. (‘segresnet’, ‘dints’) out of the full set of algorithm templates provided
by templates_path_or_url. Defaults to None - to use all available algorithms.</p></li>
<li><p><strong>templates_path_or_url</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the folder with the algorithm templates or a url. If None provided, the default template
zip url will be downloaded and extracted into the algo_path. The current default options are released at:
<a class="github reference external" href="https://github.com/Project-MONAI/research-contributions/tree/main/auto3dseg">Project-MONAI/research-contributions</a>.</p></li>
<li><p><strong>data_stats_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the path to the data stats file (generated by DataAnalyzer).</p></li>
<li><p><strong>data_src_cfg_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the path to the data source config YAML file. The config will be in a form of
{“modality”: “ct”, “datalist”: “path_to_json_datalist”, “dataroot”: “path_dir_data”}.</p></li>
<li><p><strong>mlflow_tracking_uri</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a tracking URI for MLflow server which could be local directory or address of
the remote tracking Server; MLflow runs will be recorded locally in algorithms’ model folder if
the value is None.</p></li>
<li><p><strong>mlfow_experiment_name</strong> – a string to specify the experiment name for MLflow server.</p></li>
</ul>
</dd>
</dl>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.auto3dseg<span class="w"> </span>BundleGen<span class="w"> </span>generate<span class="w"> </span>--data_stats_filename<span class="o">=</span><span class="s2">&quot;../algorithms/datastats.yaml&quot;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_customization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_customization_specs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L589-L665"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.generate" title="Link to this definition">#</a></dt>
<dd><p>Generate the bundle scripts/configs for each bundleAlgo</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the output folder to save each algorithm.</p></li>
<li><p><strong>num_fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – the number of cross validation fold.</p></li>
<li><p><strong>gpu_customization</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – the switch to determine automatically customize/optimize bundle script/config
parameters for each bundleAlgo based on gpus. Custom parameters are obtained through dummy
training to simulate the actual model training process and hyperparameter optimization (HPO)
experiments.</p></li>
<li><p><strong>gpu_customization_specs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the dictionary to enable users overwrite the HPO settings. user can
overwrite part of variables as follows or all of them. The structure is as follows.</p></li>
<li><p><strong>allow_skip</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – <p>a switch to determine if some Algo in the default templates can be skipped based on the
analysis on the dataset from Auto3DSeg DataAnalyzer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gpu_customization_specs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ALGO&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;num_trials&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="s1">&#39;range_num_images_per_batch&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
        <span class="s1">&#39;range_num_sw_batch_size&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</p></li>
<li><p><strong>ALGO</strong> – <p>the name of algorithm. It could be one of algorithm names (e.g., ‘dints’) or ‘universal’ which
would apply changes to all algorithms. Possible options are</p>
<ul>
<li><p>{<code class="docutils literal notranslate"><span class="pre">&quot;universal&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;dints&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;segresnet&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;segresnet2d&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;swinunetr&quot;</span></code>}.</p></li>
</ul>
</p></li>
<li><p><strong>num_trials</strong> – the number of HPO trials/experiments to run.</p></li>
<li><p><strong>range_num_images_per_batch</strong> – the range of number of images per mini-batch.</p></li>
<li><p><strong>range_num_sw_batch_size</strong> – the range of batch size in sliding-window inferer.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.get_data_src">
<span class="sig-name descname"><span class="pre">get_data_src</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L553-L555"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.get_data_src" title="Link to this definition">#</a></dt>
<dd><p>Get the data source filename</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.get_data_stats">
<span class="sig-name descname"><span class="pre">get_data_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L540-L542"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.get_data_stats" title="Link to this definition">#</a></dt>
<dd><p>Get the filename of the data stats</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.get_history">
<span class="sig-name descname"><span class="pre">get_history</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L585-L587"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.get_history" title="Link to this definition">#</a></dt>
<dd><p>Get the history of the bundleAlgo object with their names/identifiers</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.get_mlflow_experiment_name">
<span class="sig-name descname"><span class="pre">get_mlflow_experiment_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L581-L583"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.get_mlflow_experiment_name" title="Link to this definition">#</a></dt>
<dd><p>Get the experiment name for MLflow server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.get_mlflow_tracking_uri">
<span class="sig-name descname"><span class="pre">get_mlflow_tracking_uri</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L577-L579"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.get_mlflow_tracking_uri" title="Link to this definition">#</a></dt>
<dd><p>Get the tracking URI for MLflow server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.set_data_src">
<span class="sig-name descname"><span class="pre">set_data_src</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_src_cfg_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L544-L551"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.set_data_src" title="Link to this definition">#</a></dt>
<dd><p>Set the data source filename</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_src_cfg_name</strong> – filename of data_source file</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.set_data_stats">
<span class="sig-name descname"><span class="pre">set_data_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_stats_filename</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L531-L538"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.set_data_stats" title="Link to this definition">#</a></dt>
<dd><p>Set the data stats filename</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_stats_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – filename of datastats</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.set_mlflow_experiment_name">
<span class="sig-name descname"><span class="pre">set_mlflow_experiment_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlflow_experiment_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L568-L575"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.set_mlflow_experiment_name" title="Link to this definition">#</a></dt>
<dd><p>Set the experiment name for MLflow server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mlflow_experiment_name</strong> – a string to specify the experiment name for MLflow server.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.BundleGen.set_mlflow_tracking_uri">
<span class="sig-name descname"><span class="pre">set_mlflow_tracking_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlflow_tracking_uri</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/bundle_gen.py#L557-L566"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.BundleGen.set_mlflow_tracking_uri" title="Link to this definition">#</a></dt>
<dd><p>Set the tracking URI for MLflow server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mlflow_tracking_uri</strong> – a tracking URI for MLflow server which could be local directory or address of
the remote tracking Server; MLflow runs will be recorded locally in algorithms’ model folder if
the value is None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.DataAnalyzer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">DataAnalyzer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datalist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataroot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./datastats.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">average</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_ccp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cuda'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hist_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hist_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/data_analyzer.py#L48-L386"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.DataAnalyzer" title="Link to this definition">#</a></dt>
<dd><p>The DataAnalyzer automatically analyzes given medical image dataset and reports the statistics.
The module expects file paths to the image data and utilizes the LoadImaged transform to read the
files, which supports nii, nii.gz, png, jpg, bmp, npz, npy, and dcm formats. Currently, only
segmentation task is supported, so the user needs to provide paths to the image and label files
(if have). Also, label data format is preferred to be (1,H,W,D), with the label index in the
first dimension. If it is in onehot format, it will be converted to the preferred format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datalist</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>]) – a Python dictionary storing group, fold, and other information of the medical
image dataset, or a string to the JSON file storing the dictionary.</p></li>
<li><p><strong>dataroot</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – user’s local directory containing the datasets.</p></li>
<li><p><strong>output_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – path to save the analysis result.</p></li>
<li><p><strong>average</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to average the statistical value across different image modalities.</p></li>
<li><p><strong>do_ccp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – apply the connected component algorithm to process the labels/images</p></li>
<li><p><strong>device</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code>]) – a string specifying hardware (CUDA/CPU) utilized for the operations.</p></li>
<li><p><strong>worker</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of workers to use for loading datasets in each GPU/CPU sub-process.</p></li>
<li><p><strong>image_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – a string that user specify for the image. The DataAnalyzer will look it up in the
datalist to locate the image files of the dataset.</p></li>
<li><p><strong>label_key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a string that user specify for the label. The DataAnalyzer will look it up in the
datalist to locate the label files of the dataset. If label_key is NoneType or “None”,
the DataAnalyzer will skip looking for labels and all label-related operations.</p></li>
<li><p><strong>hist_bins</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – bins to compute histogram for each image channel.</p></li>
<li><p><strong>hist_range</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – ranges to compute histogram for each image channel.</p></li>
<li><p><strong>fmt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – format used to save the analysis results. Currently support <code class="docutils literal notranslate"><span class="pre">&quot;json&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;yaml&quot;</span></code>, defaults to “yaml”.</p></li>
<li><p><strong>histogram_only</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to only compute histograms. Defaults to False.</p></li>
<li><p><strong>extra_params</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – other optional arguments. Currently supported arguments are :
‘allowed_shape_difference’ (default 5) can be used to change the default tolerance of
the allowed shape differences between the image and label items. In case of shape mismatch below
the tolerance, the label image will be resized to match the image using nearest interpolation.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps.auto3dseg.data_analyzer</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataAnalyzer</span>

<span class="n">datalist</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;testing&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;image_003.nii.gz&quot;</span><span class="p">}],</span>
    <span class="s2">&quot;training&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;fold&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;image_001.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;label_001.nii.gz&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;fold&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;image_002.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;label_002.nii.gz&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;fold&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;image_001.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;label_001.nii.gz&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;fold&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="s2">&quot;image_004.nii.gz&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;label_004.nii.gz&quot;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">}</span>

<span class="n">dataroot</span> <span class="o">=</span> <span class="s1">&#39;/datasets&#39;</span> <span class="c1"># the directory where you have the image files (nii.gz)</span>
<span class="n">DataAnalyzer</span><span class="p">(</span><span class="n">datalist</span><span class="p">,</span> <span class="n">dataroot</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>The module can also be called from the command line interface (CLI).</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.auto3dseg<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>DataAnalyzer<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>get_all_case_stats<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--datalist<span class="o">=</span><span class="s2">&quot;my_datalist.json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--dataroot<span class="o">=</span><span class="s2">&quot;my_dataroot_dir&quot;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.DataAnalyzer.get_all_case_stats">
<span class="sig-name descname"><span class="pre">get_all_case_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'training'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/data_analyzer.py#L174-L265"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.DataAnalyzer.get_all_case_stats" title="Link to this definition">#</a></dt>
<dd><p>Get all case stats. Caller of the DataAnalyser class. The function initiates multiple GPU or CPU processes of the internal
_get_all_case_stats functions, which iterates datalist and call SegSummarizer to generate stats for each case.
After all case stats are generated, SegSummarizer is called to combine results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – dataset key</p></li>
<li><p><strong>transform_list</strong> – option list of transforms before SegSummarizer</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A data statistics dictionary containing</dt><dd><p>”stats_summary” (summary statistics of the entire datasets). Within stats_summary
there are “image_stats”  (summarizing info of shape, channel, spacing, and etc
using operations_summary), “image_foreground_stats” (info of the intensity for the
non-zero labeled voxels), and “label_stats” (info of the labels, pixel percentage,
image_intensity, and each individual label in a list)
“stats_by_cases” (List type value. Each element of the list is statistics of
an image-label info. Within each element, there are: “image” (value is the
path to an image), “label” (value is the path to the corresponding label), “image_stats”
(summarizing info of shape, channel, spacing, and etc using operations),
“image_foreground_stats” (similar to the previous one but one foreground image), and
“label_stats” (stats of the individual labels )</p>
</dd>
</dl>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Since the backend of the statistics computation are torch/numpy, nan/inf value
may be generated and carried over in the computation. In such cases, the output
dictionary will include .nan/.inf in the statistics.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.EnsembleRunner">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">EnsembleRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_src_cfg_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./work_dir'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensemble_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AlgoEnsembleBestByFold'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mgpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L397-L660"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.EnsembleRunner" title="Link to this definition">#</a></dt>
<dd><p>The Runner for ensembler. It ensembles predictions and saves them to the disk with a support of using multi-GPU.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_src_cfg_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – filename of the data source.</p></li>
<li><p><strong>work_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – working directory to save the intermediate and final results. Default is <cite>./work_dir</cite>.</p></li>
<li><p><strong>num_fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of fold. Default is 5.</p></li>
<li><p><strong>ensemble_method_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – method to ensemble predictions from different model. Default is AlgoEnsembleBestByFold.
Supported methods: [“AlgoEnsembleBestN”, “AlgoEnsembleBestByFold”].</p></li>
<li><p><strong>mgpu</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if using multi-gpu. Default is True.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – additional image writing, ensembling parameters and prediction parameters for the ensemble inference.
- for image saving, please check the supported parameters in SaveImage transform.
- for prediction parameters, please check the supported parameters in the <code class="docutils literal notranslate"><span class="pre">AlgoEnsemble</span></code> callables.
- for ensemble parameters, please check the documentation of the selected AlgoEnsemble callable.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ensemble_runner</span> <span class="o">=</span> <span class="n">EnsembleRunner</span><span class="p">(</span><span class="n">data_src_cfg_name</span><span class="p">,</span>
                                 <span class="n">work_dir</span><span class="p">,</span>
                                 <span class="n">ensemble_method_name</span><span class="p">,</span>
                                 <span class="n">mgpu</span><span class="o">=</span><span class="n">device_setting</span><span class="p">[</span><span class="s1">&#39;n_devices&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">,</span>
                                 <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                                 <span class="o">**</span><span class="n">pred_params</span><span class="p">)</span>
<span class="n">ensemble_runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">device_setting</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.EnsembleRunner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L608-L621"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.EnsembleRunner.run" title="Link to this definition">#</a></dt>
<dd><p>Load the run function in the training script of each model. Training parameter is predefined by the
algo_config.yaml file, which is pre-filled by the fill_template_config function in the same instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device_setting</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – device related settings, should follow the device_setting in auto_runner.set_device_info.
‘CUDA_VISIBLE_DEVICES’ should be a string e.g. ‘0,1,2,3’</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.EnsembleRunner.set_ensemble_method">
<span class="sig-name descname"><span class="pre">set_ensemble_method</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ensemble_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AlgoEnsembleBestByFold'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L452-L472"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.EnsembleRunner.set_ensemble_method" title="Link to this definition">#</a></dt>
<dd><p>Set the bundle ensemble method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ensemble_method_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the name of the ensemble method. Only two methods are supported “AlgoEnsembleBestN”
and “AlgoEnsembleBestByFold”.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – the keyword arguments used to define the ensemble method. Currently only <code class="docutils literal notranslate"><span class="pre">n_best</span></code> for
<code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestN</span></code> is supported.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.EnsembleRunner.set_image_save_transform">
<span class="sig-name descname"><span class="pre">set_image_save_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L522-L538"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.EnsembleRunner.set_image_save_transform" title="Link to this definition">#</a></dt>
<dd><p>Set the ensemble output transform.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – image writing parameters for the ensemble inference. The kwargs format follows SaveImage
transform. For more information, check <a class="reference external" href="https://docs.monai.io/en/stable/transforms.html#saveimage">https://docs.monai.io/en/stable/transforms.html#saveimage</a> .</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.EnsembleRunner.set_num_fold">
<span class="sig-name descname"><span class="pre">set_num_fold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/ensemble_builder.py#L540-L550"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.EnsembleRunner.set_num_fold" title="Link to this definition">#</a></dt>
<dd><p>Set the number of cross validation folds for all algos.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – a positive integer to define the number of folds.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">NNIGen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L66-L239"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen" title="Link to this definition">#</a></dt>
<dd><p>Generate algorithms for the NNI to automate hyperparameter tuning. The module has two major interfaces:
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> which prints out how to set up the NNI, and a trialCommand function <code class="docutils literal notranslate"><span class="pre">run_algo</span></code> for the NNI library to
start the trial of the algo. More about trialCommand function can be found in <code class="docutils literal notranslate"><span class="pre">trail</span> <span class="pre">code</span></code> section in NNI webpage
<a class="reference external" href="https://nni.readthedocs.io/en/latest/tutorials/hpo_quickstart_pytorch/main.html">https://nni.readthedocs.io/en/latest/tutorials/hpo_quickstart_pytorch/main.html</a> .</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>algo</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="auto3dseg.html#monai.auto3dseg.Algo" title="monai.auto3dseg.algo_gen.Algo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Algo</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an Algo object (e.g. BundleAlgo) with defined methods: <code class="docutils literal notranslate"><span class="pre">get_output_path</span></code> and train
and supports saving to and loading from pickle files via <code class="docutils literal notranslate"><span class="pre">algo_from_pickle</span></code> and <code class="docutils literal notranslate"><span class="pre">algo_to_pickle</span></code>.</p></li>
<li><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a set of parameter to override the algo if override is supported by Algo subclass.</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>The experiment will keep generating new folders to save the model checkpoints, scripts, and configs if available.
├── algorithm_templates
│   └── unet
├── unet_0
│   ├── algo_object.pkl
│   ├── configs
│   └── scripts
├── unet_0_learning_rate_0.01
│   ├── algo_object.pkl
│   ├── configs
│   ├── model_fold0
│   └── scripts
└── unet_0_learning_rate_0.1
    ├── algo_object.pkl
    ├── configs
    ├── model_fold0
    └── scripts

.. code-block:: python
    # Bundle Algorithms are already generated by BundleGen in work_dir
    import_bundle_algo_history(work_dir, only_trained=False)
    algo_dict = self.history[0]  # pick the first algorithm
    algo_name = algo_dict[AlgoKeys.ID]
    onealgo = algo_dict[AlgoKeys.ALGO]
    nni_gen = NNIGen(algo=onealgo)
    nni_gen.print_bundle_algo_instruction()
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>The NNIGen will prepare the algorithms in a folder and suggest a command to replace trialCommand in the experiment
config. However, NNIGen will not trigger NNI. User needs to write their NNI experiment configs, and then run the
NNI command manually.</p>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L183-L201"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.generate" title="Link to this definition">#</a></dt>
<dd><p>Generate the record for each Algo. If it is a BundleAlgo, it will generate the config files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the directory nni will save the results to.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.get_hyperparameters">
<span class="sig-name descname"><span class="pre">get_hyperparameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L158-L165"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.get_hyperparameters" title="Link to this definition">#</a></dt>
<dd><p>Get parameter for next round of training from NNI server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.get_obj_filename">
<span class="sig-name descname"><span class="pre">get_obj_filename</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L134-L136"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.get_obj_filename" title="Link to this definition">#</a></dt>
<dd><p>Return the filename of the dumped pickle algo object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.get_task_id">
<span class="sig-name descname"><span class="pre">get_task_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L176-L181"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.get_task_id" title="Link to this definition">#</a></dt>
<dd><p>Get the identifier of the current experiment. In the format of listing the searching parameter name and values
connected by underscore in the file name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.print_bundle_algo_instruction">
<span class="sig-name descname"><span class="pre">print_bundle_algo_instruction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L138-L156"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.print_bundle_algo_instruction" title="Link to this definition">#</a></dt>
<dd><p>Print how to write the trial commands for Bundle Algo.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.run_algo">
<span class="sig-name descname"><span class="pre">run_algo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L212-L239"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.run_algo" title="Link to this definition">#</a></dt>
<dd><p>The python interface for NNI to run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the pickle-exported Algo object.</p></li>
<li><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the root path of the algorithms templates.</p></li>
<li><p><strong>template_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the algorithm_template. It must contain algo.py in the follow path:
<code class="docutils literal notranslate"><span class="pre">{algorithm_templates_dir}/{network}/scripts/algo.py</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.set_score">
<span class="sig-name descname"><span class="pre">set_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acc</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L203-L210"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.set_score" title="Link to this definition">#</a></dt>
<dd><p>Report the acc to NNI server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.NNIGen.update_params">
<span class="sig-name descname"><span class="pre">update_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L167-L174"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.NNIGen.update_params" title="Link to this definition">#</a></dt>
<dd><p>Translate the parameter from monai bundle to meet NNI requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – a dict of parameters.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">OptunaGen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L242-L401"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen" title="Link to this definition">#</a></dt>
<dd><p>Generate algorithms for the Optuna to automate hyperparameter tuning. Please refer to NNI and Optuna
(<a class="reference external" href="https://optuna.readthedocs.io/en/stable/">https://optuna.readthedocs.io/en/stable/</a>) for more information. Optuna has different running scheme
compared to NNI. The hyperparameter samples come from a trial object (trial.suggest…) created by Optuna,
so OptunaGen needs to accept this trial object as input. Meanwhile, Optuna calls OptunaGen,
thus OptunaGen.__call__() should return the accuracy. Use functools.partial to wrap OptunaGen
for addition input arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>algo</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<a class="reference internal" href="auto3dseg.html#monai.auto3dseg.Algo" title="monai.auto3dseg.algo_gen.Algo"><code class="xref py py-class docutils literal notranslate"><span class="pre">Algo</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – an Algo object (e.g. BundleAlgo). The object must at least define two methods: get_output_path and train
and supports saving to and loading from pickle files via <code class="docutils literal notranslate"><span class="pre">algo_from_pickle</span></code> and <code class="docutils literal notranslate"><span class="pre">algo_to_pickle</span></code>.</p></li>
<li><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a set of parameter to override the algo if override is supported by Algo subclass.</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>The experiment will keep generating new folders to save the model checkpoints, scripts, and configs if available.
├── algorithm_templates
│   └── unet
├── unet_0
│   ├── algo_object.pkl
│   ├── configs
│   └── scripts
├── unet_0_learning_rate_0.01
│   ├── algo_object.pkl
│   ├── configs
│   ├── model_fold0
│   └── scripts
└── unet_0_learning_rate_0.1
    ├── algo_object.pkl
    ├── configs
    ├── model_fold0
    └── scripts
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Different from NNI and NNIGen, OptunaGen and Optuna can be ran within the Python process.</p>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trial</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L325-L339"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.__call__" title="Link to this definition">#</a></dt>
<dd><p>Callable that Optuna will use to optimize the hyper-parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the pickle-exported Algo object.</p></li>
<li><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the root path of the algorithms templates.</p></li>
<li><p><strong>template_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the algorithm_template. It must contain algo.py in the follow path:
<code class="docutils literal notranslate"><span class="pre">{algorithm_templates_dir}/{network}/scripts/algo.py</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L357-L373"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.generate" title="Link to this definition">#</a></dt>
<dd><p>Generate the record for each Algo. If it is a BundleAlgo, it will generate the config files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the directory nni will save the results to.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.get_hyperparameters">
<span class="sig-name descname"><span class="pre">get_hyperparameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L305-L315"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.get_hyperparameters" title="Link to this definition">#</a></dt>
<dd><p>Get parameter for next round of training from optuna trial object.
This function requires user rewrite during usage for different search space.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.get_obj_filename">
<span class="sig-name descname"><span class="pre">get_obj_filename</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L301-L303"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.get_obj_filename" title="Link to this definition">#</a></dt>
<dd><p>Return the dumped pickle object of algo.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.get_task_id">
<span class="sig-name descname"><span class="pre">get_task_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L350-L355"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.get_task_id" title="Link to this definition">#</a></dt>
<dd><p>Get the identifier of the current experiment. In the format of listing the searching parameter name and values
connected by underscore in the file name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.run_algo">
<span class="sig-name descname"><span class="pre">run_algo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L375-L401"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.run_algo" title="Link to this definition">#</a></dt>
<dd><p>The python interface for NNI to run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj_filename</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the pickle-exported Algo object.</p></li>
<li><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the root path of the algorithms templates.</p></li>
<li><p><strong>template_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PathLike</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the algorithm_template. It must contain algo.py in the follow path:
<code class="docutils literal notranslate"><span class="pre">{algorithm_templates_dir}/{network}/scripts/algo.py</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.set_score">
<span class="sig-name descname"><span class="pre">set_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">acc</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L317-L319"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.set_score" title="Link to this definition">#</a></dt>
<dd><p>Set the accuracy score</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.set_trial">
<span class="sig-name descname"><span class="pre">set_trial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trial</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L321-L323"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.set_trial" title="Link to this definition">#</a></dt>
<dd><p>Set the Optuna trial</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.OptunaGen.update_params">
<span class="sig-name descname"><span class="pre">update_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/hpo_gen.py#L341-L348"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.OptunaGen.update_params" title="Link to this definition">#</a></dt>
<dd><p>Translate the parameter from monai bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>params</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – a dict of parameters.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.export_bundle_algo_history">
<span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">export_bundle_algo_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">history</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/utils.py#L68-L77"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.export_bundle_algo_history" title="Link to this definition">#</a></dt>
<dd><p>Save all the BundleAlgo in the history to algo_object.pkl in each individual folder</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>history</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#monai.apps.auto3dseg.BundleAlgo" title="monai.apps.auto3dseg.bundle_gen.BundleAlgo"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAlgo</span></code></a>]]) – a List of Bundle. Typically, the history can be obtained from BundleGen get_history method</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.get_name_from_algo_id">
<span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">get_name_from_algo_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/utils.py#L80-L90"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.get_name_from_algo_id" title="Link to this definition">#</a></dt>
<dd><p>Get the name of Algo from the identifier of the Algo.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – identifier which follows a convention of “name_fold_other”.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>name of the Algo.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.auto3dseg.import_bundle_algo_history">
<span class="sig-prename descclassname"><span class="pre">monai.apps.auto3dseg.</span></span><span class="sig-name descname"><span class="pre">import_bundle_algo_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_trained</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/auto3dseg/utils.py#L23-L65"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.auto3dseg.import_bundle_algo_history" title="Link to this definition">#</a></dt>
<dd><p>import the history of the bundleAlgo objects as a list of algo dicts.
each algo_dict has keys name (folder name), algo (bundleAlgo), is_trained (bool),</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the root path of the algorithms templates.</p></li>
<li><p><strong>template_path</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – the algorithm_template. It must contain algo.py in the follow path:
<code class="docutils literal notranslate"><span class="pre">{algorithm_templates_dir}/{network}/scripts/algo.py</span></code>.</p></li>
<li><p><strong>only_trained</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – only read the algo history if the algo is trained.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-monai.apps.nnunet.__main__">
<span id="nnunet"></span><h2><cite>nnUNet</cite><a class="headerlink" href="#module-monai.apps.nnunet.__main__" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">nnUNetV2Runner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainer_class_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nnUNetTrainer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">work_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'work_dir'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_validation_probabilities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L37-L959"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner" title="Link to this definition">#</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner</span></code> provides an interface in MONAI to use <cite>nnU-Net</cite> V2 library to analyze, train, and evaluate
neural networks for medical image segmentation tasks.
A version of nnunetv2 higher than 2.2 is needed for this class.</p>
<p><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner</span></code> can be used in two ways:</p>
<ol class="arabic simple">
<li><p>with one line of code to execute the complete pipeline.</p></li>
<li><p>with a series of commands to run each modules in the pipeline.</p></li>
</ol>
<p>The output of the interface is a directory that contains:</p>
<ol class="arabic simple">
<li><p>converted dataset met the requirement of nnU-Net V2</p></li>
<li><p>data analysis results</p></li>
<li><p>checkpoints from the trained U-Net models</p></li>
<li><p>validation accuracy in each fold of cross-validation</p></li>
<li><p>the predictions on the testing datasets from the final algorithm ensemble and potential post-processing</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_config</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – the configuration dictionary or the file path to the configuration in the form of YAML.
The keys required in the configuration are:
- <code class="docutils literal notranslate"><span class="pre">&quot;datalist&quot;</span></code>: File path to the datalist for the train/testing splits
- <code class="docutils literal notranslate"><span class="pre">&quot;dataroot&quot;</span></code>: File path to the dataset
- <code class="docutils literal notranslate"><span class="pre">&quot;modality&quot;</span></code>: Imaging modality, e.g. “CT”, [“T2”, “ADC”]
Currently, the configuration supports these optional keys:
- <code class="docutils literal notranslate"><span class="pre">&quot;nnunet_raw&quot;</span></code>: File path that will be written to env variable for nnU-Net
- <code class="docutils literal notranslate"><span class="pre">&quot;nnunet_preprocessed&quot;</span></code>: File path that will be written to env variable for nnU-Net
- <code class="docutils literal notranslate"><span class="pre">&quot;nnunet_results&quot;</span></code>: File path that will be written to env variable for nnU-Net
- <code class="docutils literal notranslate"><span class="pre">&quot;nnUNet_trained_models&quot;</span></code>
- <code class="docutils literal notranslate"><span class="pre">&quot;dataset_name_or_id&quot;</span></code>: Name or Integer ID of the dataset
If an optional key is not specified, then the pipeline will use the default values.</p></li>
<li><p><strong>trainer_class_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the trainer class names offered by nnUNetV2 exhibit variations in training duration.
Default: “nnUNetTrainer”. Other options: “nnUNetTrainer_Xepoch”. X could be one of 1,5,10,20,50,100,
250,2000,4000,8000.</p></li>
<li><p><strong>export_validation_probabilities</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – True to save softmax predictions from final validation as npz
files (in addition to predicted segmentations). Needed for finding the best ensemble.
Default: True.</p></li>
<li><p><strong>work_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – working directory to save the intermediate and final results.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<ul class="simple">
<li><p>Use the one-liner to start the nnU-Net workflow</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>run<span class="w"> </span>--input_config<span class="w"> </span>./input.yaml
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Use <cite>convert_dataset</cite> to prepare the data to meet nnU-Net requirements, generate dataset JSON file,</dt><dd><p>and copy the dataset to a location specified by <code class="docutils literal notranslate"><span class="pre">nnunet_raw</span></code> in the input config file</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>convert_dataset<span class="w"> </span>--input_config<span class="o">=</span><span class="s2">&quot;./input.yaml&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><cite>convert_msd_dataset</cite> is an alternative option to prepare the data if the dataset is MSD.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>convert_msd_dataset<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span><span class="w"> </span>--data_dir<span class="w"> </span><span class="s2">&quot;/path/to/Task09_Spleen&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>experiment planning and data pre-processing</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>plan_and_process<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>training all 20 models using all GPUs available.</dt><dd><p>“CUDA_VISIBLE_DEVICES” environment variable is not supported.</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>train<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>training a single model on a single GPU for 5 epochs. Here <code class="docutils literal notranslate"><span class="pre">config</span></code> is used to specify the configuration.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>train_single_model<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--config<span class="w"> </span><span class="s2">&quot;3d_fullres&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--fold<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--gpu_id<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--trainer_class_name<span class="w"> </span><span class="s2">&quot;nnUNetTrainer_5epochs&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--export_validation_probabilities<span class="w"> </span>True
</pre></div>
</div>
<ul class="simple">
<li><p>training for all 20 models (4 configurations by 5 folds) on 2 GPUs</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>train<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span><span class="w"> </span>--gpu_id_for_all<span class="w"> </span><span class="s2">&quot;0,1&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>5-fold training for a single model on 2 GPUs. Here <code class="docutils literal notranslate"><span class="pre">configs</span></code> is used to specify the configurations.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>train<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--configs<span class="w"> </span><span class="s2">&quot;3d_fullres&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--trainer_class_name<span class="w"> </span><span class="s2">&quot;nnUNetTrainer_5epochs&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--export_validation_probabilities<span class="w"> </span>True<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--gpu_id_for_all<span class="w"> </span><span class="s2">&quot;0,1&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>find the best configuration</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>find_best_configuration<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>predict, ensemble, and post-process</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>monai.apps.nnunet<span class="w"> </span>nnUNetV2Runner<span class="w"> </span>predict_ensemble_postprocessing<span class="w"> </span>--input_config<span class="w"> </span><span class="s2">&quot;./input.yaml&quot;</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.convert_dataset">
<span class="sig-name descname"><span class="pre">convert_dataset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L216-L282"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.convert_dataset" title="Link to this definition">#</a></dt>
<dd><p>Convert and make a copy the dataset to meet the requirements of nnU-Net workflow.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.convert_msd_dataset">
<span class="sig-name descname"><span class="pre">convert_msd_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_proc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L284-L298"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.convert_msd_dataset" title="Link to this definition">#</a></dt>
<dd><p>Convert and make a copy the MSD dataset to meet requirements of nnU-Net workflow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – downloaded and extracted MSD dataset folder. CANNOT be nnUNetv1 dataset!
Example: “/workspace/downloads/Task05_Prostate”.</p></li>
<li><p><strong>overwrite_id</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Overwrite the dataset id. If not set then use the id of the MSD task (inferred from
the folder name). Only use this if you already have an equivalently numbered dataset!</p></li>
<li><p><strong>n_proc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of processes used.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.extract_fingerprints">
<span class="sig-name descname"><span class="pre">extract_fingerprints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'DatasetFingerprintExtractor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npfp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify_dataset_integrity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L300-L327"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.extract_fingerprints" title="Link to this definition">#</a></dt>
<dd><p>Extracts the dataset fingerprint used for experiment planning.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] Name of the Dataset Fingerprint Extractor class that should be used. Default is
“DatasetFingerprintExtractor”.</p></li>
<li><p><strong>npfp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – [OPTIONAL] Number of processes used for fingerprint extraction.</p></li>
<li><p><strong>verify_dataset_integrity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – [RECOMMENDED] set this flag to check the dataset integrity. This is
useful and should be done once for each dataset!</p></li>
<li><p><strong>clean</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – [OPTIONAL] Set this flag to overwrite existing fingerprints. If this flag is not set and a
fingerprint already exists, the fingerprint extractor will not run.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – set this to print a lot of stuff. Useful for debugging. Will disable progress bar!
Recommended for cluster environments.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.find_best_configuration">
<span class="sig-name descname"><span class="pre">find_best_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plans='nnUNetPlans'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configs=(2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_cascade_fullres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainers=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_ensembling=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_processes=-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folds=(0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L714-L761"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.find_best_configuration" title="Link to this definition">#</a></dt>
<dd><p>Find the best model configurations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plans</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – list of plan identifiers. Default: nnUNetPlans.</p></li>
<li><p><strong>configs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – list of configurations. Default: [“2d”, “3d_fullres”, “3d_lowres”, “3d_cascade_fullres”].</p></li>
<li><p><strong>trainers</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – list of trainers. Default: nnUNetTrainer.</p></li>
<li><p><strong>allow_ensembling</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – set this flag to enable ensembling.</p></li>
<li><p><strong>num_processes</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of processes to use for ensembling, postprocessing, etc.</p></li>
<li><p><strong>overwrite</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if set we will overwrite already ensembled files etc. May speed up consecutive
runs of this command (not recommended) at the risk of not updating outdated results.</p></li>
<li><p><strong>folds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, …]]) – folds to use. Default: (0, 1, 2, 3, 4).</p></li>
<li><p><strong>strict</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – a switch that triggers RunTimeError if the logging folder cannot be found. Default: False.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.plan_and_process">
<span class="sig-name descname"><span class="pre">plan_and_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fpe='DatasetFingerprintExtractor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npfp=8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify_dataset_integrity=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_pp=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pl='ExperimentPlanner'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_memory_target=8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocessor_name='DefaultPreprocessor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_target_spacing=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_plans_name='nnUNetPlans'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c=(2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_proc=(8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L415-L487"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.plan_and_process" title="Link to this definition">#</a></dt>
<dd><p>Performs experiment planning and preprocessing before the training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fpe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] Name of the Dataset Fingerprint Extractor class that should be used. Default is
“DatasetFingerprintExtractor”.</p></li>
<li><p><strong>npfp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – [OPTIONAL] Number of processes used for fingerprint extraction. Default: 8.</p></li>
<li><p><strong>verify_dataset_integrity</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – [RECOMMENDED] set this flag to check the dataset integrity.
This is useful and should be done once for each dataset!</p></li>
<li><p><strong>no_pp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – [OPTIONAL] Set this to only run fingerprint extraction and experiment planning (no
preprocessing). Useful for debugging.</p></li>
<li><p><strong>clean</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – [OPTIONAL] Set this flag to overwrite existing fingerprints. If this flag is not set and a
fingerprint already exists, the fingerprint extractor will not run. REQUIRED IF YOU
CHANGE THE DATASET FINGERPRINT EXTRACTOR OR MAKE CHANGES TO THE DATASET!</p></li>
<li><p><strong>pl</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] Name of the Experiment Planner class that should be used. Default is “ExperimentPlanner”.
Note: There is no longer a distinction between 2d and 3d planner. It’s an all-in-one solution now.</p></li>
<li><p><strong>gpu_memory_target</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – [OPTIONAL] DANGER ZONE! Sets a custom GPU memory target. Default: 8 [GB].
Changing this will affect patch and batch size and will
definitely affect your models’ performance! Only use this if you really know what you
are doing and NEVER use this without running the default nnU-Net first (as a baseline).</p></li>
<li><p><strong>preprocessor_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] DANGER ZONE! Sets a custom preprocessor class. This class must be located in
nnunetv2.preprocessing. Default: “DefaultPreprocessor”. Changing this may affect your
models’ performance! Only use this if you really know what you
are doing and NEVER use this without running the default nnU-Net first (as a baseline).</p></li>
<li><p><strong>overwrite_target_spacing</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – [OPTIONAL] DANGER ZONE! Sets a custom target spacing for the 3d_fullres and
3d_cascade_fullres configurations. Default: None [no changes]. Changing this will affect image size and
potentially patch and batch size. This will definitely affect your models performance!
Only use this if you really know what you are doing and NEVER use this without running the
default nnU-Net first (as a baseline). Changing the target spacing for the other
configurations is currently not implemented. New target spacing must be a list of three numbers!</p></li>
<li><p><strong>overwrite_plans_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] USE A CUSTOM PLANS IDENTIFIER. If you used -gpu_memory_target,
-preprocessor_name or -overwrite_target_spacing it is best practice to use -overwrite_plans_name to
generate a differently named plans file such that the nnunet default plans are not
overwritten. You will then need to specify your custom plans file with -p whenever
running other nnunet commands (training, inference, etc)</p></li>
<li><p><strong>c</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – [OPTIONAL] Configurations for which the preprocessing should be run. Default: 2d 3f_fullres
3d_lowres. 3d_cascade_fullres does not need to be specified because it uses the data
from 3f_fullres. Configurations that do not exist for some datasets will be skipped.</p></li>
<li><p><strong>n_proc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – [OPTIONAL] Use this to define how many processes are to be used. If this is just one number then
this number of processes is used for all configurations specified with -c. If it’s a
list of numbers this list must have as many elements as there are configurations. We
then iterate over zip(configs, num_processes) to determine the number of processes
used for each configuration. More processes are always faster (up to the number of
threads your PC can support, so 8 for a 4-core CPU with hyperthreading. If you don’t
know what that is then don’t touch it, or at least don’t increase it!). DANGER: More
often than not the number of processes that can be used is limited by the amount of
RAM available. Image resampling takes up a lot of RAM. MONITOR RAM USAGE AND
DECREASE -n_proc IF YOUR RAM FILLS UP TOO MUCH! Default: 8 4 8 (=8 processes for 2d, 4
for 3d_fullres and 8 for 3d_lowres if -c is at its default).</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Set this to print a lot of stuff. Useful for debugging. Will disable progress bar!
(Recommended for cluster environments).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.plan_experiments">
<span class="sig-name descname"><span class="pre">plan_experiments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ExperimentPlanner'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_memory_target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preprocessor_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'DefaultPreprocessor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_target_spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_plans_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nnUNetPlans'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L329-L372"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.plan_experiments" title="Link to this definition">#</a></dt>
<dd><p>Generate a configuration file that specifies the details of the experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pl</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] Name of the Experiment Planner class that should be used. Default is “ExperimentPlanner”.
Note: There is no longer a distinction between 2d and 3d planner. It’s an all-in-one solution now.</p></li>
<li><p><strong>gpu_memory_target</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – [OPTIONAL] DANGER ZONE! Sets a custom GPU memory target. Default: 8 [GB].
Changing this will affect patch and batch size and will definitely affect your models’ performance!
Only use this if you really know what you are doing and NEVER use this without running the
default nnU-Net first (as a baseline).</p></li>
<li><p><strong>preprocessor_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] DANGER ZONE! Sets a custom preprocessor class. This class must be located in
nnunetv2.preprocessing. Default: “DefaultPreprocessor”. Changing this may affect your models’
performance! Only use this if you really know what you are doing and NEVER use this without running the
default nnU-Net first (as a baseline).</p></li>
<li><p><strong>overwrite_target_spacing</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – [OPTIONAL] DANGER ZONE! Sets a custom target spacing for the 3d_fullres
and 3d_cascade_fullres configurations. Default: None [no changes]. Changing this will affect
image size and potentially patch and batch size. This will definitely affect your models’ performance!
Only use this if you really know what you are doing and NEVER use this without running the
default nnU-Net first (as a baseline). Changing the target spacing for the other configurations
is currently not implemented. New target spacing must be a list of three numbers!</p></li>
<li><p><strong>overwrite_plans_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] DANGER ZONE! If you used -gpu_memory_target, -preprocessor_name or
-overwrite_target_spacing it is best practice to use -overwrite_plans_name to generate
a differently named plans file such that the nnunet default plans are not overwritten.
You will then need to specify your custom plan.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">list_of_lists_or_source_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_training_output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_folds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tile_step_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_gaussian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_mirroring</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perform_everything_on_gpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_probabilities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'checkpoint_final.pth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder_with_segs_from_prev_stage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_parts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_processes_preprocessing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_processes_segmentation_export</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L763-L848"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.predict" title="Link to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Use this to run inference with nnU-Net. This function is used when you want to manually specify a folder containing</dt><dd><p>a trained nnU-Net model. This is useful when the nnunet environment variables (nnUNet_results) are not set.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_of_lists_or_source_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) – input folder. Remember to use the correct channel numberings for
your files (_0000 etc). File endings must be the same as the training dataset!</p></li>
<li><p><strong>output_folder</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – Output folder. If it does not exist it will be created. Predicted segmentations will
have the same name as their source images.</p></li>
<li><p><strong>model_training_output_dir</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – folder in which the trained model is. Must have subfolders fold_X for the
different folds you trained.</p></li>
<li><p><strong>use_folds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, …], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – specify the folds of the trained model that should be used for prediction
Default: (0, 1, 2, 3, 4).</p></li>
<li><p><strong>tile_step_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – step size for sliding window prediction. The larger it is the faster but less accurate
the prediction. Default: 0.5. Cannot be larger than 1. We recommend the default.</p></li>
<li><p><strong>use_gaussian</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – use Gaussian smoothing as test-time augmentation.</p></li>
<li><p><strong>use_mirroring</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – use mirroring/flipping as test-time augmentation.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – set this if you like being talked to. You will have to be a good listener/reader.</p></li>
<li><p><strong>save_probabilities</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – set this to export predicted class “probabilities”. Required if you want to ensemble
multiple configurations.</p></li>
<li><p><strong>overwrite</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – overwrite an existing previous prediction (will not overwrite existing files)</p></li>
<li><p><strong>checkpoint_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – name of the checkpoint you want to use. Default: checkpoint_final.pth.</p></li>
<li><p><strong>folder_with_segs_from_prev_stage</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – folder containing the predictions of the previous stage.
Required for cascaded models.</p></li>
<li><p><strong>num_parts</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – number of separate nnUNetv2_predict call that you will be making. Default: 1 (= this one
call predicts everything).</p></li>
<li><p><strong>part_id</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – if multiple nnUNetv2_predict exist, which one is this? IDs start with 0 can end with
num_parts - 1. So when you submit 5 nnUNetv2_predict calls you need to set -num_parts
5 and use -part_id 0, 1, 2, 3 and 4.</p></li>
<li><p><strong>num_processes_preprocessing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – out-of-RAM issues.</p></li>
<li><p><strong>num_processes_segmentation_export</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of processes used for segmentation export.
More is not always better. Beware of out-of-RAM issues.</p></li>
<li><p><strong>gpu_id</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – which GPU to use for prediction.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.predict_ensemble_postprocessing">
<span class="sig-name descname"><span class="pre">predict_ensemble_postprocessing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_ensemble</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_predict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_postprocessing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L850-L924"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.predict_ensemble_postprocessing" title="Link to this definition">#</a></dt>
<dd><p>Run prediction, ensemble, and/or postprocessing optionally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>folds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – which folds to use</p></li>
<li><p><strong>run_ensemble</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to run ensembling.</p></li>
<li><p><strong>run_predict</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to predict using trained checkpoints</p></li>
<li><p><strong>run_postprocessing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to conduct post-processing</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – this optional parameter allows you to specify additional arguments defined in the
<code class="docutils literal notranslate"><span class="pre">predict</span></code> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.preprocess">
<span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">c=(2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_proc=(8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite_plans_name='nnUNetPlans'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L374-L413"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.preprocess" title="Link to this definition">#</a></dt>
<dd><p>Apply a set of preprocessing operations to the input data before the training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>overwrite_plans_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – [OPTIONAL] You can use this to specify a custom plans file that you may have
generated.</p></li>
<li><p><strong>c</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – [OPTIONAL] Configurations for which the preprocessing should be run. Default: 2d 3f_fullres
3d_lowres. 3d_cascade_fullres does not need to be specified because it uses the data
from 3f_fullres. Configurations that do not exist for some datasets will be skipped).</p></li>
<li><p><strong>n_proc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – [OPTIONAL] Use this to define how many processes are to be used. If this is just one number then
this number of processes is used for all configurations specified with -c. If it’s a
list of numbers this list must have as many elements as there are configurations. We
then iterate over zip(configs, num_processes) to determine the number of processes
used for each configuration. More processes are always faster (up to the number of
threads your PC can support, so 8 for a 4-core CPU with hyperthreading. If you don’t
know what that is then don’t touch it, or at least don’t increase it!). DANGER: More
often than not the number of processes that can be used is limited by the amount of
RAM available. Image resampling takes up a lot of RAM. MONITOR RAM USAGE AND
DECREASE -n_proc IF YOUR RAM FILLS UP TOO MUCH! Default: 8 4 8 (=8 processes for 2d, 4
for 3d_fullres and 8 for 3d_lowres if -c is at its default).</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Set this to print a lot of stuff. Useful for debugging. Will disable the progress bar!
Recommended for cluster environments.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_convert_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_plan_and_process</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_find_best_configuration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_predict_ensemble_postprocessing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L926-L959"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.run" title="Link to this definition">#</a></dt>
<dd><p>Run the nnU-Net pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_convert_dataset</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to convert datasets, defaults to True.</p></li>
<li><p><strong>run_plan_and_process</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to preprocess and analyze the dataset, defaults to True.</p></li>
<li><p><strong>run_train</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to train models, defaults to True.</p></li>
<li><p><strong>run_find_best_configuration</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to find the best model (ensemble) configurations, defaults to True.</p></li>
<li><p><strong>run_predict_ensemble_postprocessing</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to make predictions on test datasets, defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configs=(3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_cascade_fullres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_id_for_all=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L558-L590"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.train" title="Link to this definition">#</a></dt>
<dd><p>Run the training for all the models specified by the configurations.
Note: to set the number of GPUs to use, use <code class="docutils literal notranslate"><span class="pre">gpu_id_for_all</span></code> instead of the <cite>CUDA_VISIBLE_DEVICES</cite>
environment variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – configurations that should be trained.
Default: (“2d”, “3d_fullres”, “3d_lowres”, “3d_cascade_fullres”).</p></li>
<li><p><strong>gpu_id_for_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a tuple/list/integer of GPU device ID(s) to use for the training. Default:
None (all available GPUs).</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – this optional parameter allows you to specify additional arguments defined in the
<code class="docutils literal notranslate"><span class="pre">train_single_model</span></code> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.train_parallel">
<span class="sig-name descname"><span class="pre">train_parallel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configs=(3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_cascade_fullres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_id_for_all=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L645-L684"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.train_parallel" title="Link to this definition">#</a></dt>
<dd><p>Create the line command for subprocess call for parallel training.
Note: to set the number of GPUs to use, use <code class="docutils literal notranslate"><span class="pre">gpu_id_for_all</span></code> instead of the <cite>CUDA_VISIBLE_DEVICES</cite>
environment variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – configurations that should be trained.
default: (“2d”, “3d_fullres”, “3d_lowres”, “3d_cascade_fullres”).</p></li>
<li><p><strong>gpu_id_for_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a tuple/list/integer of GPU device ID(s) to use for the training. Default:
None (all available GPUs).</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – this optional parameter allows you to specify additional arguments defined in the
<code class="docutils literal notranslate"><span class="pre">train_single_model</span></code> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.train_parallel_cmd">
<span class="sig-name descname"><span class="pre">train_parallel_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configs=(3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_cascade_fullres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_id_for_all=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L592-L643"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.train_parallel_cmd" title="Link to this definition">#</a></dt>
<dd><p>Create the line command for subprocess call for parallel training.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – configurations that should be trained.
Default: (“2d”, “3d_fullres”, “3d_lowres”, “3d_cascade_fullres”).</p></li>
<li><p><strong>gpu_id_for_all</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – a tuple/list/integer of GPU device ID(s) to use for the training. Default:
None (all available GPUs).</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – this optional parameter allows you to specify additional arguments defined in the
<code class="docutils literal notranslate"><span class="pre">train_single_model</span></code> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.train_single_model">
<span class="sig-name descname"><span class="pre">train_single_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gpu_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L489-L529"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.train_single_model" title="Link to this definition">#</a></dt>
<dd><p>Run the training on a single GPU with one specified configuration provided.
Note: this will override the environment variable <cite>CUDA_VISIBLE_DEVICES</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – configuration that should be trained. Examples: “2d”, “3d_fullres”, “3d_lowres”.</p></li>
<li><p><strong>fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – fold of the 5-fold cross-validation. Should be an int between 0 and 4.</p></li>
<li><p><strong>gpu_id</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">UnionType</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – an integer to select the device to use, or a tuple/list of GPU device indices used for multi-GPU
training (e.g., (0,1)). Default: 0.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – <p>this optional parameter allows you to specify additional arguments in
<code class="docutils literal notranslate"><span class="pre">nnunetv2.run.run_training.run_training_entry</span></code>.</p>
<p>Currently supported args are:</p>
<ul>
<li><p>p: custom plans identifier. Default: “nnUNetPlans”.</p></li>
<li><dl class="simple">
<dt>pretrained_weights: path to nnU-Net checkpoint file to be used as pretrained model. Will only be</dt><dd><p>used when actually training. Beta. Use with caution. Default: False.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>use_compressed: True to use compressed data for training. Reading compressed data is much</dt><dd><p>more CPU and (potentially) RAM intensive and should only be used if you know what you are
doing. Default: False.</p>
</dd>
</dl>
</li>
<li><p>c: continue training from latest checkpoint. Default: False.</p></li>
<li><dl class="simple">
<dt>val: True to run the validation only. Requires training to have finished.</dt><dd><p>Default: False.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>disable_checkpointing: True to disable checkpointing. Ideal for testing things out and you</dt><dd><p>don’t want to flood your hard drive with checkpoints. Default: False.</p>
</dd>
</dl>
</li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configs=(3d_fullres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">2d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_lowres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">3d_cascade_fullres)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L698-L712"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.validate" title="Link to this definition">#</a></dt>
<dd><p>Perform validation in all models defined by the configurations over 5 folds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>) – configurations that should be trained.
default: (“2d”, “3d_fullres”, “3d_lowres”, “3d_cascade_fullres”).</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – this optional parameter allows you to specify additional arguments defined in the
<code class="docutils literal notranslate"><span class="pre">train_single_model</span></code> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.nnUNetV2Runner.validate_single_model">
<span class="sig-name descname"><span class="pre">validate_single_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fold</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunetv2_runner.py#L686-L696"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.nnUNetV2Runner.validate_single_model" title="Link to this definition">#</a></dt>
<dd><p>Perform validation on single model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – configuration that should be trained.</p></li>
<li><p><strong>fold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – fold of the 5-fold cross-validation. Should be an int between 0 and 4.</p></li>
<li><p><strong>kwargs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – this optional parameter allows you to specify additional arguments defined in the
<code class="docutils literal notranslate"><span class="pre">train_single_model</span></code> method.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="nnunet-bundle">
<h2><cite>nnUNet Bundle</cite><a class="headerlink" href="#nnunet-bundle" title="Link to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="monai.apps.nnunet.ModelnnUNetWrapper">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">ModelnnUNetWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'model.pt'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L142-L294"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.ModelnnUNetWrapper" title="Link to this definition">#</a></dt>
<dd><p>A wrapper class for nnUNet model integration with MONAI framework.
The wrapper can be use to integrate the nnUNet Bundle within MONAI framework for inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predictor</strong> (<em>nnUNetPredictor</em>) – The nnUNet predictor object used for inference.</p></li>
<li><p><strong>model_folder</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>Path</em><em>]</em>) – The folder path where the model and related files are stored.</p></li>
<li><p><strong>model_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the model file, by default “model.pt”.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.nnunet.ModelnnUNetWrapper.predictor">
<span class="sig-name descname"><span class="pre">predictor</span></span><a class="headerlink" href="#monai.apps.nnunet.ModelnnUNetWrapper.predictor" title="Link to this definition">#</a></dt>
<dd><p>The nnUNet predictor object used for inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nnUNetPredictor</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="monai.apps.nnunet.ModelnnUNetWrapper.network_weights">
<span class="sig-name descname"><span class="pre">network_weights</span></span><a class="headerlink" href="#monai.apps.nnunet.ModelnnUNetWrapper.network_weights" title="Link to this definition">#</a></dt>
<dd><p>The network weights of the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>torch.nn.Module</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>This class integrates nnUNet model with MONAI framework by loading necessary configurations,
restoring network architecture, and setting up the predictor for inference.</p>
<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.ModelnnUNetWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'model.pt'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L169-L237"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.ModelnnUNetWrapper.__init__" title="Link to this definition">#</a></dt>
<dd><p>Initialize internal Module state, shared by both nn.Module and ScriptModule.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="monai.apps.nnunet.ModelnnUNetWrapper.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L239-L294"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.ModelnnUNetWrapper.forward" title="Link to this definition">#</a></dt>
<dd><p>Forward pass for the nnUNet model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>x</strong> (<a class="reference internal" href="data.html#monai.data.MetaTensor" title="monai.data.MetaTensor"><em>MetaTensor</em></a>) – Input tensor. If the input is a tuple,
it is assumed to be a decollated batch (list of tensors). Otherwise, it is assumed to be a collated batch.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The output tensor with the same metadata as the input.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="data.html#monai.data.MetaTensor" title="monai.data.MetaTensor">MetaTensor</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – If the input is not a torch.Tensor or a tuple of MetaTensors.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>If the input is a tuple, the filenames are extracted from the metadata of each tensor in the tuple.</p></li>
<li><p>If the input is a collated batch, the filenames are extracted from the metadata of the input tensor.</p></li>
<li><p>The filenames are used to generate predictions using the nnUNet predictor.</p></li>
<li><p>The predictions are converted to torch tensors, with added batch and channel dimensions.</p></li>
<li><p>The output tensor is concatenated along the batch dimension and returned as a MetaTensor with the same metadata.</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.nnunet.get_nnunet_trainer">
<span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">get_nnunet_trainer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_name_or_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainer_class_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nnUNetTrainer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plans_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nnUNetPlans'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_compressed_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continue_training</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">only_run_validation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disable_checkpointing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cuda'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pretrained_model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L38-L139"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.get_nnunet_trainer" title="Link to this definition">#</a></dt>
<dd><p>Get the nnUNet trainer instance based on the provided configuration.
The returned nnUNet trainer can be used to initialize the SupervisedTrainer for training, including the network,
optimizer, loss function, DataLoader, etc.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.apps</span><span class="w"> </span><span class="kn">import</span> <span class="n">SupervisedTrainer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">monai.bundle.nnunet</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_nnunet_trainer</span>

<span class="n">dataset_name_or_id</span> <span class="o">=</span> <span class="s1">&#39;Task009_Spleen&#39;</span>
<span class="n">fold</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">configuration</span> <span class="o">=</span> <span class="s1">&#39;3d_fullres&#39;</span>
<span class="n">nnunet_trainer</span> <span class="o">=</span> <span class="n">get_nnunet_trainer</span><span class="p">(</span><span class="n">dataset_name_or_id</span><span class="p">,</span> <span class="n">configuration</span><span class="p">,</span> <span class="n">fold</span><span class="p">)</span>

<span class="n">trainer</span> <span class="o">=</span> <span class="n">SupervisedTrainer</span><span class="p">(</span>
    <span class="n">device</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
    <span class="n">max_epochs</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">num_epochs</span><span class="p">,</span>
    <span class="n">train_data_loader</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">dataloader_train</span><span class="p">,</span>
    <span class="n">network</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">network</span><span class="p">,</span>
    <span class="n">optimizer</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">optimizer</span><span class="p">,</span>
    <span class="n">loss_function</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">loss_function</span><span class="p">,</span>
    <span class="n">epoch_length</span><span class="o">=</span><span class="n">nnunet_trainer</span><span class="o">.</span><span class="n">num_iterations_per_epoch</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_name_or_id</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em>) – The name or ID of the dataset to be used.</p></li>
<li><p><strong>configuration</strong> (<em>str</em>) – The configuration name for the training.</p></li>
<li><p><strong>fold</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – The fold number or ‘all’ for cross-validation.</p></li>
<li><p><strong>trainer_class_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The class name of the trainer to be used. Default is ‘nnUNetTrainer’.
For a complete list of supported trainers, check:
<a class="github reference external" href="https://github.com/MIC-DKFZ/nnUNet/tree/master/nnunetv2/training/nnUNetTrainer/variants">MIC-DKFZ/nnUNet</a></p></li>
<li><p><strong>plans_identifier</strong> (<em>str</em><em>, </em><em>optional</em>) – Identifier for the plans to be used. Default is ‘nnUNetPlans’.</p></li>
<li><p><strong>use_compressed_data</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to use compressed data. Default is False.</p></li>
<li><p><strong>continue_training</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to continue training from a checkpoint. Default is False.</p></li>
<li><p><strong>only_run_validation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to only run validation. Default is False.</p></li>
<li><p><strong>disable_checkpointing</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to disable checkpointing. Default is False.</p></li>
<li><p><strong>device</strong> (<em>str</em><em>, </em><em>optional</em>) – The device to be used for training. Default is ‘cuda’.</p></li>
<li><p><strong>pretrained_model</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Path to the pretrained model file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>nnunet_trainer</strong> – The nnUNet trainer instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.nnunet.get_nnunet_monai_predictor">
<span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">get_nnunet_monai_predictor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'model.pt'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L297-L348"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.get_nnunet_monai_predictor" title="Link to this definition">#</a></dt>
<dd><p>Initializes and returns a <cite>nnUNetMONAIModelWrapper</cite> containing the corresponding <cite>nnUNetPredictor</cite>.
The model folder should contain the following files, created during training:</p>
<blockquote>
<div><ul class="simple">
<li><p>dataset.json: from the nnUNet results folder</p></li>
<li><p>plans.json: from the nnUNet results folder</p></li>
<li><p>nnunet_checkpoint.pth: The nnUNet checkpoint file, containing the nnUNet training configuration</p></li>
<li><p>model.pt: The checkpoint file containing the model weights.</p></li>
</ul>
</div></blockquote>
<p>The returned wrapper object can be used for inference with MONAI framework:</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">monai.bundle.nnunet</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_nnunet_monai_predictor</span>

<span class="n">model_folder</span> <span class="o">=</span> <span class="s1">&#39;path/to/monai_bundle/model&#39;</span>
<span class="n">model_name</span> <span class="o">=</span> <span class="s1">&#39;model.pt&#39;</span>
<span class="n">wrapper</span> <span class="o">=</span> <span class="n">get_nnunet_monai_predictor</span><span class="p">(</span><span class="n">model_folder</span><span class="p">,</span> <span class="n">model_name</span><span class="p">)</span>

<span class="c1"># Perform inference</span>
<span class="n">input_data</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">wrapper</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_folder</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>Path</em><em>]</em>) – The folder where the model is stored.</p></li>
<li><p><strong>model_name</strong> (<em>str</em><em>, </em><em>optional</em>) – The name of the model file, by default “model.pt”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A wrapper object that contains the nnUNetPredictor and the loaded model.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#monai.apps.nnunet.ModelnnUNetWrapper" title="monai.apps.nnunet.ModelnnUNetWrapper">ModelnnUNetWrapper</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.nnunet.convert_nnunet_to_monai_bundle">
<span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">convert_nnunet_to_monai_bundle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nnunet_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bundle_root_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L351-L422"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.convert_nnunet_to_monai_bundle" title="Link to this definition">#</a></dt>
<dd><p>Convert nnUNet model checkpoints and configuration to MONAI bundle format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nnunet_config</strong> (<em>dict</em>) – Configuration dictionary for nnUNet, containing keys such as ‘dataset_name_or_id’, ‘nnunet_configuration’,
‘nnunet_trainer’, and ‘nnunet_plans’.</p></li>
<li><p><strong>bundle_root_folder</strong> (<em>str</em>) – Root folder where the MONAI bundle will be saved.</p></li>
<li><p><strong>fold</strong> (<em>int</em><em>, </em><em>optional</em>) – Fold number of the nnUNet model to be converted, by default 0.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.nnunet.convert_monai_bundle_to_nnunet">
<span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">convert_monai_bundle_to_nnunet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nnunet_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bundle_root_folder</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L486-L602"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.convert_monai_bundle_to_nnunet" title="Link to this definition">#</a></dt>
<dd><p>Convert a MONAI bundle to nnU-Net format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nnunet_config</strong> (<em>dict</em>) – Configuration dictionary for nnU-Net. Expected keys are:
- “dataset_name_or_id”: str, name or ID of the dataset.
- “nnunet_trainer”: str, optional, name of the nnU-Net trainer (default is “nnUNetTrainer”).
- “nnunet_plans”: str, optional, name of the nnU-Net plans (default is “nnUNetPlans”).</p></li>
<li><p><strong>bundle_root_folder</strong> (<em>str</em>) – Path to the root folder of the MONAI bundle.</p></li>
<li><p><strong>fold</strong> (<em>int</em><em>, </em><em>optional</em>) – Fold number for cross-validation (default is 0).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monai.apps.nnunet.get_network_from_nnunet_plans">
<span class="sig-prename descclassname"><span class="pre">monai.apps.nnunet.</span></span><span class="sig-name descname"><span class="pre">get_network_from_nnunet_plans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plans_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_ckpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_key_in_ckpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'model'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/Project-MONAI/MONAI/blob/dev/monai/apps/nnunet/nnunet_bundle.py#L425-L483"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#monai.apps.nnunet.get_network_from_nnunet_plans" title="Link to this definition">#</a></dt>
<dd><p>Load and initialize a nnUNet network based on nnUNet plans and configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plans_file</strong> (<em>str</em>) – Path to the JSON file containing the nnUNet plans.</p></li>
<li><p><strong>dataset_file</strong> (<em>str</em>) – Path to the JSON file containing the dataset information.</p></li>
<li><p><strong>configuration</strong> (<em>str</em>) – The configuration name to be used from the plans.</p></li>
<li><p><strong>model_ckpt</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – Path to the model checkpoint file. If None, the network is returned without loading weights (default is None).</p></li>
<li><p><strong>model_key_in_ckpt</strong> (<em>str</em><em>, </em><em>optional</em>) – The key in the checkpoint file that contains the model state dictionary (default is “model”).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>network</strong> – The initialized neural network, with weights loaded if <cite>model_ckpt</cite> is provided.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>torch.nn.Module</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="api.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">API Reference</p>
      </div>
    </a>
    <a class="right-next"
       href="auto3dseg.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Auto3dseg</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#datasets"><cite>Datasets</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.MedNISTDataset"><code class="docutils literal notranslate"><span class="pre">MedNISTDataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.MedNISTDataset.get_num_classes"><code class="docutils literal notranslate"><span class="pre">MedNISTDataset.get_num_classes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.MedNISTDataset.randomize"><code class="docutils literal notranslate"><span class="pre">MedNISTDataset.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.DecathlonDataset"><code class="docutils literal notranslate"><span class="pre">DecathlonDataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.DecathlonDataset.get_indices"><code class="docutils literal notranslate"><span class="pre">DecathlonDataset.get_indices()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.DecathlonDataset.get_properties"><code class="docutils literal notranslate"><span class="pre">DecathlonDataset.get_properties()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.DecathlonDataset.randomize"><code class="docutils literal notranslate"><span class="pre">DecathlonDataset.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.TciaDataset"><code class="docutils literal notranslate"><span class="pre">TciaDataset</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.TciaDataset.get_indices"><code class="docutils literal notranslate"><span class="pre">TciaDataset.get_indices()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.TciaDataset.randomize"><code class="docutils literal notranslate"><span class="pre">TciaDataset.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.CrossValidation"><code class="docutils literal notranslate"><span class="pre">CrossValidation</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.CrossValidation.get_dataset"><code class="docutils literal notranslate"><span class="pre">CrossValidation.get_dataset()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clara-mmars"><cite>Clara MMARs</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.download_mmar"><code class="docutils literal notranslate"><span class="pre">download_mmar()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.load_from_mmar"><code class="docutils literal notranslate"><span class="pre">load_from_mmar()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.MODEL_DESC"><code class="docutils literal notranslate"><span class="pre">MODEL_DESC</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#utilities"><cite>Utilities</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.check_hash"><code class="docutils literal notranslate"><span class="pre">check_hash()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.download_url"><code class="docutils literal notranslate"><span class="pre">download_url()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.extractall"><code class="docutils literal notranslate"><span class="pre">extractall()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.download_and_extract"><code class="docutils literal notranslate"><span class="pre">download_and_extract()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.deepgrow.dataset"><cite>Deepgrow</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.dataset.create_dataset"><code class="docutils literal notranslate"><span class="pre">create_dataset()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.interaction.Interaction"><code class="docutils literal notranslate"><span class="pre">Interaction</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.AddInitialSeedPointd"><code class="docutils literal notranslate"><span class="pre">AddInitialSeedPointd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.AddInitialSeedPointd.randomize"><code class="docutils literal notranslate"><span class="pre">AddInitialSeedPointd.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.AddGuidanceSignald"><code class="docutils literal notranslate"><span class="pre">AddGuidanceSignald</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.AddRandomGuidanced"><code class="docutils literal notranslate"><span class="pre">AddRandomGuidanced</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.AddRandomGuidanced.randomize"><code class="docutils literal notranslate"><span class="pre">AddRandomGuidanced.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.AddGuidanceFromPointsd"><code class="docutils literal notranslate"><span class="pre">AddGuidanceFromPointsd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.SpatialCropForegroundd"><code class="docutils literal notranslate"><span class="pre">SpatialCropForegroundd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.SpatialCropGuidanced"><code class="docutils literal notranslate"><span class="pre">SpatialCropGuidanced</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.RestoreLabeld"><code class="docutils literal notranslate"><span class="pre">RestoreLabeld</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.ResizeGuidanced"><code class="docutils literal notranslate"><span class="pre">ResizeGuidanced</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.FindDiscrepancyRegionsd"><code class="docutils literal notranslate"><span class="pre">FindDiscrepancyRegionsd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.FindAllValidSlicesd"><code class="docutils literal notranslate"><span class="pre">FindAllValidSlicesd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.deepgrow.transforms.Fetch2DSliced"><code class="docutils literal notranslate"><span class="pre">Fetch2DSliced</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.pathology.inferers"><cite>Pathology</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.inferers.SlidingWindowHoVerNetInferer"><code class="docutils literal notranslate"><span class="pre">SlidingWindowHoVerNetInferer</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.losses.hovernet_loss.HoVerNetLoss"><code class="docutils literal notranslate"><span class="pre">HoVerNetLoss</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.losses.hovernet_loss.HoVerNetLoss.forward"><code class="docutils literal notranslate"><span class="pre">HoVerNetLoss.forward()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.metrics.LesionFROC"><code class="docutils literal notranslate"><span class="pre">LesionFROC</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.metrics.LesionFROC.compute_fp_tp"><code class="docutils literal notranslate"><span class="pre">LesionFROC.compute_fp_tp()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.metrics.LesionFROC.evaluate"><code class="docutils literal notranslate"><span class="pre">LesionFROC.evaluate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.metrics.LesionFROC.prepare_ground_truth"><code class="docutils literal notranslate"><span class="pre">LesionFROC.prepare_ground_truth()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.metrics.LesionFROC.prepare_inference_result"><code class="docutils literal notranslate"><span class="pre">LesionFROC.prepare_inference_result()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.utils.compute_multi_instance_mask"><code class="docutils literal notranslate"><span class="pre">compute_multi_instance_mask()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.utils.compute_isolated_tumor_cells"><code class="docutils literal notranslate"><span class="pre">compute_isolated_tumor_cells()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.utils.PathologyProbNMS"><code class="docutils literal notranslate"><span class="pre">PathologyProbNMS</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.stain.array.ExtractHEStains"><code class="docutils literal notranslate"><span class="pre">ExtractHEStains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.stain.array.NormalizeHEStains"><code class="docutils literal notranslate"><span class="pre">NormalizeHEStains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.stain.dictionary.ExtractHEStainsd"><code class="docutils literal notranslate"><span class="pre">ExtractHEStainsd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.stain.dictionary.NormalizeHEStainsd"><code class="docutils literal notranslate"><span class="pre">NormalizeHEStainsd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateSuccinctContour"><code class="docutils literal notranslate"><span class="pre">GenerateSuccinctContour</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceContour"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceContour</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceCentroid"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceCentroid</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceType"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceType</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.Watershed"><code class="docutils literal notranslate"><span class="pre">Watershed</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateWatershedMask"><code class="docutils literal notranslate"><span class="pre">GenerateWatershedMask</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateInstanceBorder"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceBorder</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateDistanceMap"><code class="docutils literal notranslate"><span class="pre">GenerateDistanceMap</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.GenerateWatershedMarkers"><code class="docutils literal notranslate"><span class="pre">GenerateWatershedMarkers</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.HoVerNetNuclearTypePostProcessing"><code class="docutils literal notranslate"><span class="pre">HoVerNetNuclearTypePostProcessing</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.array.HoVerNetInstanceMapPostProcessing"><code class="docutils literal notranslate"><span class="pre">HoVerNetInstanceMapPostProcessing</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateSuccinctContourd"><code class="docutils literal notranslate"><span class="pre">GenerateSuccinctContourd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceContourd"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceContourd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceCentroidd"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceCentroidd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceTyped"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceTyped</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.Watershedd"><code class="docutils literal notranslate"><span class="pre">Watershedd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateWatershedMaskd"><code class="docutils literal notranslate"><span class="pre">GenerateWatershedMaskd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateInstanceBorderd"><code class="docutils literal notranslate"><span class="pre">GenerateInstanceBorderd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateDistanceMapd"><code class="docutils literal notranslate"><span class="pre">GenerateDistanceMapd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.GenerateWatershedMarkersd"><code class="docutils literal notranslate"><span class="pre">GenerateWatershedMarkersd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.HoVerNetInstanceMapPostProcessingd"><code class="docutils literal notranslate"><span class="pre">HoVerNetInstanceMapPostProcessingd</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.pathology.transforms.post.dictionary.HoVerNetNuclearTypePostProcessingd"><code class="docutils literal notranslate"><span class="pre">HoVerNetNuclearTypePostProcessingd</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#detection"><cite>Detection</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.utils.hard_negative_sampler"><cite>Hard Negative Sampler</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler"><code class="docutils literal notranslate"><span class="pre">HardNegativeSampler</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.get_num_neg"><code class="docutils literal notranslate"><span class="pre">HardNegativeSampler.get_num_neg()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.get_num_pos"><code class="docutils literal notranslate"><span class="pre">HardNegativeSampler.get_num_pos()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_positives"><code class="docutils literal notranslate"><span class="pre">HardNegativeSampler.select_positives()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_samples_img_list"><code class="docutils literal notranslate"><span class="pre">HardNegativeSampler.select_samples_img_list()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSampler.select_samples_per_img"><code class="docutils literal notranslate"><span class="pre">HardNegativeSampler.select_samples_per_img()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSamplerBase"><code class="docutils literal notranslate"><span class="pre">HardNegativeSamplerBase</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.hard_negative_sampler.HardNegativeSamplerBase.select_negatives"><code class="docutils literal notranslate"><span class="pre">HardNegativeSamplerBase.select_negatives()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.networks.retinanet_network"><cite>RetinaNet Network</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.RetinaNet"><code class="docutils literal notranslate"><span class="pre">RetinaNet</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.RetinaNet.forward"><code class="docutils literal notranslate"><span class="pre">RetinaNet.forward()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.RetinaNetClassificationHead"><code class="docutils literal notranslate"><span class="pre">RetinaNetClassificationHead</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.RetinaNetClassificationHead.forward"><code class="docutils literal notranslate"><span class="pre">RetinaNetClassificationHead.forward()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.RetinaNetRegressionHead"><code class="docutils literal notranslate"><span class="pre">RetinaNetRegressionHead</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.RetinaNetRegressionHead.forward"><code class="docutils literal notranslate"><span class="pre">RetinaNetRegressionHead.forward()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_network.resnet_fpn_feature_extractor"><code class="docutils literal notranslate"><span class="pre">resnet_fpn_feature_extractor()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.networks.retinanet_detector"><cite>RetinaNet Detector</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_anchor_matched_idxs"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.compute_anchor_matched_idxs()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_box_loss"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.compute_box_loss()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_cls_loss"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.compute_cls_loss()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.compute_loss"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.compute_loss()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.forward"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.forward()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.generate_anchors"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.generate_anchors()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.get_box_train_sample_per_image"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.get_box_train_sample_per_image()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.get_cls_train_sample_per_image"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.get_cls_train_sample_per_image()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.postprocess_detections"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.postprocess_detections()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_atss_matcher"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_atss_matcher()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_balanced_sampler"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_balanced_sampler()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_coder_weights"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_box_coder_weights()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_regression_loss"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_box_regression_loss()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_box_selector_parameters"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_box_selector_parameters()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_cls_loss"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_cls_loss()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_hard_negative_sampler"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_hard_negative_sampler()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_regular_matcher"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_regular_matcher()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_sliding_window_inferer"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_sliding_window_inferer()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.RetinaNetDetector.set_target_keys"><code class="docutils literal notranslate"><span class="pre">RetinaNetDetector.set_target_keys()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.networks.retinanet_detector.retinanet_resnet50_fpn_detector"><code class="docutils literal notranslate"><span class="pre">retinanet_resnet50_fpn_detector()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.transforms.box_ops"><cite>Transforms</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.apply_affine_to_boxes"><code class="docutils literal notranslate"><span class="pre">apply_affine_to_boxes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.convert_box_to_mask"><code class="docutils literal notranslate"><span class="pre">convert_box_to_mask()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.convert_mask_to_box"><code class="docutils literal notranslate"><span class="pre">convert_mask_to_box()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.flip_boxes"><code class="docutils literal notranslate"><span class="pre">flip_boxes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.resize_boxes"><code class="docutils literal notranslate"><span class="pre">resize_boxes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.rot90_boxes"><code class="docutils literal notranslate"><span class="pre">rot90_boxes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.select_labels"><code class="docutils literal notranslate"><span class="pre">select_labels()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.swapaxes_boxes"><code class="docutils literal notranslate"><span class="pre">swapaxes_boxes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.box_ops.zoom_boxes"><code class="docutils literal notranslate"><span class="pre">zoom_boxes()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.AffineBox"><code class="docutils literal notranslate"><span class="pre">AffineBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.BoxToMask"><code class="docutils literal notranslate"><span class="pre">BoxToMask</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.ClipBoxToImage"><code class="docutils literal notranslate"><span class="pre">ClipBoxToImage</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.ConvertBoxMode"><code class="docutils literal notranslate"><span class="pre">ConvertBoxMode</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.ConvertBoxToStandardMode"><code class="docutils literal notranslate"><span class="pre">ConvertBoxToStandardMode</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.FlipBox"><code class="docutils literal notranslate"><span class="pre">FlipBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.MaskToBox"><code class="docutils literal notranslate"><span class="pre">MaskToBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.ResizeBox"><code class="docutils literal notranslate"><span class="pre">ResizeBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.RotateBox90"><code class="docutils literal notranslate"><span class="pre">RotateBox90</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.SpatialCropBox"><code class="docutils literal notranslate"><span class="pre">SpatialCropBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.StandardizeEmptyBox"><code class="docutils literal notranslate"><span class="pre">StandardizeEmptyBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.array.ZoomBox"><code class="docutils literal notranslate"><span class="pre">ZoomBox</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinateD"><code class="docutils literal notranslate"><span class="pre">AffineBoxToImageCoordinateD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinateDict"><code class="docutils literal notranslate"><span class="pre">AffineBoxToImageCoordinateDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated"><code class="docutils literal notranslate"><span class="pre">AffineBoxToImageCoordinated</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.AffineBoxToImageCoordinated.inverse"><code class="docutils literal notranslate"><span class="pre">AffineBoxToImageCoordinated.inverse()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.BoxToMaskD"><code class="docutils literal notranslate"><span class="pre">BoxToMaskD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.BoxToMaskDict"><code class="docutils literal notranslate"><span class="pre">BoxToMaskDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.BoxToMaskd"><code class="docutils literal notranslate"><span class="pre">BoxToMaskd</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImageD"><code class="docutils literal notranslate"><span class="pre">ClipBoxToImageD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImageDict"><code class="docutils literal notranslate"><span class="pre">ClipBoxToImageDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ClipBoxToImaged"><code class="docutils literal notranslate"><span class="pre">ClipBoxToImaged</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModeD"><code class="docutils literal notranslate"><span class="pre">ConvertBoxModeD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModeDict"><code class="docutils literal notranslate"><span class="pre">ConvertBoxModeDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed"><code class="docutils literal notranslate"><span class="pre">ConvertBoxModed</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed.__init__"><code class="docutils literal notranslate"><span class="pre">ConvertBoxModed.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxModed.inverse"><code class="docutils literal notranslate"><span class="pre">ConvertBoxModed.inverse()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModeD"><code class="docutils literal notranslate"><span class="pre">ConvertBoxToStandardModeD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModeDict"><code class="docutils literal notranslate"><span class="pre">ConvertBoxToStandardModeDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed"><code class="docutils literal notranslate"><span class="pre">ConvertBoxToStandardModed</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed.__init__"><code class="docutils literal notranslate"><span class="pre">ConvertBoxToStandardModed.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ConvertBoxToStandardModed.inverse"><code class="docutils literal notranslate"><span class="pre">ConvertBoxToStandardModed.inverse()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.FlipBoxD"><code class="docutils literal notranslate"><span class="pre">FlipBoxD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.FlipBoxDict"><code class="docutils literal notranslate"><span class="pre">FlipBoxDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.FlipBoxd"><code class="docutils literal notranslate"><span class="pre">FlipBoxd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.FlipBoxd.inverse"><code class="docutils literal notranslate"><span class="pre">FlipBoxd.inverse()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.MaskToBoxD"><code class="docutils literal notranslate"><span class="pre">MaskToBoxD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.MaskToBoxDict"><code class="docutils literal notranslate"><span class="pre">MaskToBoxDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.MaskToBoxd"><code class="docutils literal notranslate"><span class="pre">MaskToBoxd</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabelD"><code class="docutils literal notranslate"><span class="pre">RandCropBoxByPosNegLabelD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabelDict"><code class="docutils literal notranslate"><span class="pre">RandCropBoxByPosNegLabelDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld"><code class="docutils literal notranslate"><span class="pre">RandCropBoxByPosNegLabeld</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandCropBoxByPosNegLabeld.randomize"><code class="docutils literal notranslate"><span class="pre">RandCropBoxByPosNegLabeld.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxD"><code class="docutils literal notranslate"><span class="pre">RandFlipBoxD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxDict"><code class="docutils literal notranslate"><span class="pre">RandFlipBoxDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd"><code class="docutils literal notranslate"><span class="pre">RandFlipBoxd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd.inverse"><code class="docutils literal notranslate"><span class="pre">RandFlipBoxd.inverse()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandFlipBoxd.set_random_state"><code class="docutils literal notranslate"><span class="pre">RandFlipBoxd.set_random_state()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90D"><code class="docutils literal notranslate"><span class="pre">RandRotateBox90D</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90Dict"><code class="docutils literal notranslate"><span class="pre">RandRotateBox90Dict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d"><code class="docutils literal notranslate"><span class="pre">RandRotateBox90d</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d.inverse"><code class="docutils literal notranslate"><span class="pre">RandRotateBox90d.inverse()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandRotateBox90d.randomize"><code class="docutils literal notranslate"><span class="pre">RandRotateBox90d.randomize()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxD"><code class="docutils literal notranslate"><span class="pre">RandZoomBoxD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxDict"><code class="docutils literal notranslate"><span class="pre">RandZoomBoxDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd"><code class="docutils literal notranslate"><span class="pre">RandZoomBoxd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd.inverse"><code class="docutils literal notranslate"><span class="pre">RandZoomBoxd.inverse()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RandZoomBoxd.set_random_state"><code class="docutils literal notranslate"><span class="pre">RandZoomBoxd.set_random_state()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RotateBox90D"><code class="docutils literal notranslate"><span class="pre">RotateBox90D</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RotateBox90Dict"><code class="docutils literal notranslate"><span class="pre">RotateBox90Dict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RotateBox90d"><code class="docutils literal notranslate"><span class="pre">RotateBox90d</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.RotateBox90d.inverse"><code class="docutils literal notranslate"><span class="pre">RotateBox90d.inverse()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxD"><code class="docutils literal notranslate"><span class="pre">StandardizeEmptyBoxD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxDict"><code class="docutils literal notranslate"><span class="pre">StandardizeEmptyBoxDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd"><code class="docutils literal notranslate"><span class="pre">StandardizeEmptyBoxd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd.__init__"><code class="docutils literal notranslate"><span class="pre">StandardizeEmptyBoxd.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.StandardizeEmptyBoxd.inverse"><code class="docutils literal notranslate"><span class="pre">StandardizeEmptyBoxd.inverse()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ZoomBoxD"><code class="docutils literal notranslate"><span class="pre">ZoomBoxD</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ZoomBoxDict"><code class="docutils literal notranslate"><span class="pre">ZoomBoxDict</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ZoomBoxd"><code class="docutils literal notranslate"><span class="pre">ZoomBoxd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.transforms.dictionary.ZoomBoxd.inverse"><code class="docutils literal notranslate"><span class="pre">ZoomBoxd.inverse()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.utils.anchor_utils"><cite>Anchor</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator"><code class="docutils literal notranslate"><span class="pre">AnchorGenerator</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.forward"><code class="docutils literal notranslate"><span class="pre">AnchorGenerator.forward()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.generate_anchors"><code class="docutils literal notranslate"><span class="pre">AnchorGenerator.generate_anchors()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.grid_anchors"><code class="docutils literal notranslate"><span class="pre">AnchorGenerator.grid_anchors()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.num_anchors_per_location"><code class="docutils literal notranslate"><span class="pre">AnchorGenerator.num_anchors_per_location()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGenerator.set_cell_anchors"><code class="docutils literal notranslate"><span class="pre">AnchorGenerator.set_cell_anchors()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGeneratorWithAnchorShape"><code class="docutils literal notranslate"><span class="pre">AnchorGeneratorWithAnchorShape</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.anchor_utils.AnchorGeneratorWithAnchorShape.generate_anchors_using_shape"><code class="docutils literal notranslate"><span class="pre">AnchorGeneratorWithAnchorShape.generate_anchors_using_shape()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.utils.ATSS_matcher"><cite>Matcher</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.ATSS_matcher.ATSSMatcher"><code class="docutils literal notranslate"><span class="pre">ATSSMatcher</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.ATSS_matcher.ATSSMatcher.__init__"><code class="docutils literal notranslate"><span class="pre">ATSSMatcher.__init__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.ATSS_matcher.ATSSMatcher.compute_matches"><code class="docutils literal notranslate"><span class="pre">ATSSMatcher.compute_matches()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.ATSS_matcher.Matcher"><code class="docutils literal notranslate"><span class="pre">Matcher</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.ATSS_matcher.Matcher.compute_matches"><code class="docutils literal notranslate"><span class="pre">Matcher.compute_matches()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.utils.box_coder"><cite>Box coder</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_coder.BoxCoder"><code class="docutils literal notranslate"><span class="pre">BoxCoder</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_coder.BoxCoder.decode"><code class="docutils literal notranslate"><span class="pre">BoxCoder.decode()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_coder.BoxCoder.decode_single"><code class="docutils literal notranslate"><span class="pre">BoxCoder.decode_single()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_coder.BoxCoder.encode"><code class="docutils literal notranslate"><span class="pre">BoxCoder.encode()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_coder.BoxCoder.encode_single"><code class="docutils literal notranslate"><span class="pre">BoxCoder.encode_single()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_coder.encode_boxes"><code class="docutils literal notranslate"><span class="pre">encode_boxes()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.utils.detector_utils"><cite>Detection Utilities</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.detector_utils.check_input_images"><code class="docutils literal notranslate"><span class="pre">check_input_images()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.detector_utils.check_training_targets"><code class="docutils literal notranslate"><span class="pre">check_training_targets()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.detector_utils.pad_images"><code class="docutils literal notranslate"><span class="pre">pad_images()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.detector_utils.preprocess_images"><code class="docutils literal notranslate"><span class="pre">preprocess_images()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.predict_utils.check_dict_values_same_length"><code class="docutils literal notranslate"><span class="pre">check_dict_values_same_length()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.predict_utils.ensure_dict_value_to_list_"><code class="docutils literal notranslate"><span class="pre">ensure_dict_value_to_list_()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.predict_utils.predict_with_inferer"><code class="docutils literal notranslate"><span class="pre">predict_with_inferer()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.utils.box_selector"><cite>Inference box selector</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_selector.BoxSelector"><code class="docutils literal notranslate"><span class="pre">BoxSelector</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_selector.BoxSelector.select_boxes_per_image"><code class="docutils literal notranslate"><span class="pre">BoxSelector.select_boxes_per_image()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.utils.box_selector.BoxSelector.select_top_score_idx_per_level"><code class="docutils literal notranslate"><span class="pre">BoxSelector.select_top_score_idx_per_level()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.detection.metrics.coco"><cite>Detection metrics</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.detection.metrics.matching.matching_batch"><code class="docutils literal notranslate"><span class="pre">matching_batch()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reconstruction"><cite>Reconstruction</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fastmrireader">FastMRIReader</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader"><code class="docutils literal notranslate"><span class="pre">FastMRIReader</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader.get_data"><code class="docutils literal notranslate"><span class="pre">FastMRIReader.get_data()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader.read"><code class="docutils literal notranslate"><span class="pre">FastMRIReader.read()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.fastmri_reader.FastMRIReader.verify_suffix"><code class="docutils literal notranslate"><span class="pre">FastMRIReader.verify_suffix()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#converttotensorcomplex"><cite>ConvertToTensorComplex</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.complex_utils.convert_to_tensor_complex"><code class="docutils literal notranslate"><span class="pre">convert_to_tensor_complex()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complexabs"><cite>ComplexAbs</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.complex_utils.complex_abs"><code class="docutils literal notranslate"><span class="pre">complex_abs()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rootsumofsquares"><cite>RootSumOfSquares</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.mri_utils.root_sum_of_squares"><code class="docutils literal notranslate"><span class="pre">root_sum_of_squares()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complexmul"><cite>ComplexMul</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.complex_utils.complex_mul"><code class="docutils literal notranslate"><span class="pre">complex_mul()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complexconj"><cite>ComplexConj</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.reconstruction.complex_utils.complex_conj"><code class="docutils literal notranslate"><span class="pre">complex_conj()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.vista3d.inferer"><cite>Vista3d</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.inferer.point_based_window_inferer"><code class="docutils literal notranslate"><span class="pre">point_based_window_inferer()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.transforms.VistaPreTransformd"><code class="docutils literal notranslate"><span class="pre">VistaPreTransformd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.transforms.VistaPreTransformd.__init__"><code class="docutils literal notranslate"><span class="pre">VistaPreTransformd.__init__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.transforms.VistaPostTransformd"><code class="docutils literal notranslate"><span class="pre">VistaPostTransformd</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.transforms.VistaPostTransformd.__init__"><code class="docutils literal notranslate"><span class="pre">VistaPostTransformd.__init__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.transforms.Relabeld"><code class="docutils literal notranslate"><span class="pre">Relabeld</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.transforms.Relabeld.__init__"><code class="docutils literal notranslate"><span class="pre">Relabeld.__init__()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.vista3d.sampler.sample_prompt_pairs"><code class="docutils literal notranslate"><span class="pre">sample_prompt_pairs()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.auto3dseg"><cite>Auto3DSeg</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble.__call__"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble.ensemble_pred"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble.ensemble_pred()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble.get_algo"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble.get_algo()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble.get_algo_ensemble"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble.get_algo_ensemble()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble.set_algos"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble.set_algos()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsemble.set_infer_files"><code class="docutils literal notranslate"><span class="pre">AlgoEnsemble.set_infer_files()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBestByFold"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestByFold</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBestByFold.collect_algos"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestByFold.collect_algos()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBestN"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestN</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBestN.collect_algos"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestN.collect_algos()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBestN.sort_score"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBestN.sort_score()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBuilder</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder.add_inferer"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBuilder.add_inferer()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder.get_ensemble"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBuilder.get_ensemble()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AlgoEnsembleBuilder.set_ensemble_method"><code class="docutils literal notranslate"><span class="pre">AlgoEnsembleBuilder.set_ensemble_method()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner"><code class="docutils literal notranslate"><span class="pre">AutoRunner</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.export_cache"><code class="docutils literal notranslate"><span class="pre">AutoRunner.export_cache()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.inspect_datalist_folds"><code class="docutils literal notranslate"><span class="pre">AutoRunner.inspect_datalist_folds()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.read_cache"><code class="docutils literal notranslate"><span class="pre">AutoRunner.read_cache()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.run"><code class="docutils literal notranslate"><span class="pre">AutoRunner.run()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_analyze_params"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_analyze_params()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_device_info"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_device_info()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_ensemble_method"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_ensemble_method()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_gpu_customization"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_gpu_customization()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_hpo_params"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_hpo_params()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_image_save_transform"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_image_save_transform()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_nni_search_space"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_nni_search_space()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_num_fold"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_num_fold()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_prediction_params"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_prediction_params()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.AutoRunner.set_training_params"><code class="docutils literal notranslate"><span class="pre">AutoRunner.set_training_params()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo"><code class="docutils literal notranslate"><span class="pre">BundleAlgo</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.__init__"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.__init__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.export_to_disk"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.export_to_disk()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.fill_template_config"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.fill_template_config()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.get_inferer"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.get_inferer()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.get_output_path"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.get_output_path()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.get_score"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.get_score()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.pre_check_skip_algo"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.pre_check_skip_algo()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.predict"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.predict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.set_data_source"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.set_data_source()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.set_data_stats"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.set_data_stats()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.set_mlflow_experiment_name"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.set_mlflow_experiment_name()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.set_mlflow_tracking_uri"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.set_mlflow_tracking_uri()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleAlgo.train"><code class="docutils literal notranslate"><span class="pre">BundleAlgo.train()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen"><code class="docutils literal notranslate"><span class="pre">BundleGen</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.generate"><code class="docutils literal notranslate"><span class="pre">BundleGen.generate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.get_data_src"><code class="docutils literal notranslate"><span class="pre">BundleGen.get_data_src()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.get_data_stats"><code class="docutils literal notranslate"><span class="pre">BundleGen.get_data_stats()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.get_history"><code class="docutils literal notranslate"><span class="pre">BundleGen.get_history()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.get_mlflow_experiment_name"><code class="docutils literal notranslate"><span class="pre">BundleGen.get_mlflow_experiment_name()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.get_mlflow_tracking_uri"><code class="docutils literal notranslate"><span class="pre">BundleGen.get_mlflow_tracking_uri()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.set_data_src"><code class="docutils literal notranslate"><span class="pre">BundleGen.set_data_src()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.set_data_stats"><code class="docutils literal notranslate"><span class="pre">BundleGen.set_data_stats()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.set_mlflow_experiment_name"><code class="docutils literal notranslate"><span class="pre">BundleGen.set_mlflow_experiment_name()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.BundleGen.set_mlflow_tracking_uri"><code class="docutils literal notranslate"><span class="pre">BundleGen.set_mlflow_tracking_uri()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.DataAnalyzer"><code class="docutils literal notranslate"><span class="pre">DataAnalyzer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.DataAnalyzer.get_all_case_stats"><code class="docutils literal notranslate"><span class="pre">DataAnalyzer.get_all_case_stats()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.EnsembleRunner"><code class="docutils literal notranslate"><span class="pre">EnsembleRunner</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.EnsembleRunner.run"><code class="docutils literal notranslate"><span class="pre">EnsembleRunner.run()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.EnsembleRunner.set_ensemble_method"><code class="docutils literal notranslate"><span class="pre">EnsembleRunner.set_ensemble_method()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.EnsembleRunner.set_image_save_transform"><code class="docutils literal notranslate"><span class="pre">EnsembleRunner.set_image_save_transform()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.EnsembleRunner.set_num_fold"><code class="docutils literal notranslate"><span class="pre">EnsembleRunner.set_num_fold()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen"><code class="docutils literal notranslate"><span class="pre">NNIGen</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.generate"><code class="docutils literal notranslate"><span class="pre">NNIGen.generate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.get_hyperparameters"><code class="docutils literal notranslate"><span class="pre">NNIGen.get_hyperparameters()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.get_obj_filename"><code class="docutils literal notranslate"><span class="pre">NNIGen.get_obj_filename()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.get_task_id"><code class="docutils literal notranslate"><span class="pre">NNIGen.get_task_id()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.print_bundle_algo_instruction"><code class="docutils literal notranslate"><span class="pre">NNIGen.print_bundle_algo_instruction()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.run_algo"><code class="docutils literal notranslate"><span class="pre">NNIGen.run_algo()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.set_score"><code class="docutils literal notranslate"><span class="pre">NNIGen.set_score()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.NNIGen.update_params"><code class="docutils literal notranslate"><span class="pre">NNIGen.update_params()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen"><code class="docutils literal notranslate"><span class="pre">OptunaGen</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.__call__"><code class="docutils literal notranslate"><span class="pre">OptunaGen.__call__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.generate"><code class="docutils literal notranslate"><span class="pre">OptunaGen.generate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.get_hyperparameters"><code class="docutils literal notranslate"><span class="pre">OptunaGen.get_hyperparameters()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.get_obj_filename"><code class="docutils literal notranslate"><span class="pre">OptunaGen.get_obj_filename()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.get_task_id"><code class="docutils literal notranslate"><span class="pre">OptunaGen.get_task_id()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.run_algo"><code class="docutils literal notranslate"><span class="pre">OptunaGen.run_algo()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.set_score"><code class="docutils literal notranslate"><span class="pre">OptunaGen.set_score()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.set_trial"><code class="docutils literal notranslate"><span class="pre">OptunaGen.set_trial()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.OptunaGen.update_params"><code class="docutils literal notranslate"><span class="pre">OptunaGen.update_params()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.export_bundle_algo_history"><code class="docutils literal notranslate"><span class="pre">export_bundle_algo_history()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.get_name_from_algo_id"><code class="docutils literal notranslate"><span class="pre">get_name_from_algo_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.auto3dseg.import_bundle_algo_history"><code class="docutils literal notranslate"><span class="pre">import_bundle_algo_history()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-monai.apps.nnunet.__main__"><cite>nnUNet</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.convert_dataset"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.convert_dataset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.convert_msd_dataset"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.convert_msd_dataset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.extract_fingerprints"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.extract_fingerprints()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.find_best_configuration"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.find_best_configuration()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.plan_and_process"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.plan_and_process()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.plan_experiments"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.plan_experiments()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.predict"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.predict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.predict_ensemble_postprocessing"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.predict_ensemble_postprocessing()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.preprocess"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.preprocess()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.run"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.run()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.train"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.train()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.train_parallel"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.train_parallel()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.train_parallel_cmd"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.train_parallel_cmd()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.train_single_model"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.train_single_model()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.validate"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.validate()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.nnUNetV2Runner.validate_single_model"><code class="docutils literal notranslate"><span class="pre">nnUNetV2Runner.validate_single_model()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nnunet-bundle"><cite>nnUNet Bundle</cite></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.ModelnnUNetWrapper"><code class="docutils literal notranslate"><span class="pre">ModelnnUNetWrapper</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.ModelnnUNetWrapper.predictor"><code class="docutils literal notranslate"><span class="pre">ModelnnUNetWrapper.predictor</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.ModelnnUNetWrapper.network_weights"><code class="docutils literal notranslate"><span class="pre">ModelnnUNetWrapper.network_weights</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.ModelnnUNetWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">ModelnnUNetWrapper.__init__()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.ModelnnUNetWrapper.forward"><code class="docutils literal notranslate"><span class="pre">ModelnnUNetWrapper.forward()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.get_nnunet_trainer"><code class="docutils literal notranslate"><span class="pre">get_nnunet_trainer()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.get_nnunet_monai_predictor"><code class="docutils literal notranslate"><span class="pre">get_nnunet_monai_predictor()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.convert_nnunet_to_monai_bundle"><code class="docutils literal notranslate"><span class="pre">convert_nnunet_to_monai_bundle()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.convert_monai_bundle_to_nnunet"><code class="docutils literal notranslate"><span class="pre">convert_monai_bundle_to_nnunet()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#monai.apps.nnunet.get_network_from_nnunet_plans"><code class="docutils literal notranslate"><span class="pre">get_network_from_nnunet_plans()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/apps.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright MONAI Consortium.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>